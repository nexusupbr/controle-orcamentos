(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[599],{92457:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62898).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},41298:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62898).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},66654:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62898).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},74522:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62898).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},85790:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62898).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},78079:function(e,t,s){Promise.resolve().then(s.bind(s,53643))},53643:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(57437),r=s(2265),l=s(92457),n=s(85790),o=s(74522),c=s(41298),i=s(66654);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,s(62898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);var x=s(548),m=s(14958),h=s(22169);function u(){let[e,t]=(0,r.useState)([]),[s,u]=(0,r.useState)(!0),[f,p]=(0,r.useState)(null),[j,N]=(0,r.useState)(null);(0,r.useEffect)(()=>{g()},[]);let g=async()=>{try{u(!0);let e=await (0,m.SL)(),s=v(e);t(s),p(null)}catch(e){console.error("Erro ao carregar dados:",e),p("Erro ao carregar dados")}finally{u(!1)}},v=e=>{let t=new Map;return e.forEach(e=>{let s=t.get(e.mes)||{mes:e.mes,totalOrcamentos:0,totalFechados:0,totalPerdidos:0,valorProposto:0,valorFechado:0,taxaConversao:0};s.totalOrcamentos++,s.valorProposto+=e.valor_proposto,"Fechado"===e.status?(s.totalFechados++,s.valorFechado+=e.valor_fechado):s.totalPerdidos++,s.taxaConversao=(0,h.d5)(s.totalFechados,s.totalOrcamentos),t.set(e.mes,s)}),Array.from(t.values()).sort((e,t)=>{let[s,a]=e.mes.split("/"),[r,l]=t.mes.split("/"),n=new Date(parseInt(a),parseInt(s)-1);return new Date(parseInt(l),parseInt(r)-1).getTime()-n.getTime()})},b=e.reduce((e,t)=>({totalOrcamentos:e.totalOrcamentos+t.totalOrcamentos,totalFechados:e.totalFechados+t.totalFechados,totalPerdidos:e.totalPerdidos+t.totalPerdidos,valorProposto:e.valorProposto+t.valorProposto,valorFechado:e.valorFechado+t.valorFechado}),{totalOrcamentos:0,totalFechados:0,totalPerdidos:0,valorProposto:0,valorFechado:0}),y=(0,h.d5)(b.totalFechados,b.totalOrcamentos);return s?(0,a.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,a.jsx)(x.TK,{size:"lg"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold font-heading text-white",children:"Resumo Mensal"}),(0,a.jsx)("p",{className:"text-dark-400 mt-1",children:"Vis\xe3o consolidada dos or\xe7amentos por m\xeas"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"glass-card p-4 lg:p-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-3",children:(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary-500/10 flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"w-5 h-5 text-primary-400"})})}),(0,a.jsx)("p",{className:"text-2xl lg:text-3xl font-bold text-white",children:b.totalOrcamentos}),(0,a.jsx)("p",{className:"text-sm text-dark-400",children:"Total Or\xe7amentos"})]}),(0,a.jsxs)("div",{className:"glass-card p-4 lg:p-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-3",children:(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/10 flex items-center justify-center",children:(0,a.jsx)(n.Z,{className:"w-5 h-5 text-emerald-400"})})}),(0,a.jsx)("p",{className:"text-2xl lg:text-3xl font-bold text-emerald-400",children:b.totalFechados}),(0,a.jsx)("p",{className:"text-sm text-dark-400",children:"Fechados"})]}),(0,a.jsxs)("div",{className:"glass-card p-4 lg:p-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-3",children:(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-red-500/10 flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-5 h-5 text-red-400"})})}),(0,a.jsx)("p",{className:"text-2xl lg:text-3xl font-bold text-red-400",children:b.totalPerdidos}),(0,a.jsx)("p",{className:"text-sm text-dark-400",children:"Perdidos"})]}),(0,a.jsxs)("div",{className:"glass-card p-4 lg:p-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-3",children:(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary-500/10 flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"w-5 h-5 text-primary-400"})})}),(0,a.jsx)("p",{className:"text-xl lg:text-2xl font-bold text-white",children:(0,h.xG)(b.valorFechado)}),(0,a.jsx)("p",{className:"text-sm text-dark-400",children:"Valor Total Fechado"})]}),(0,a.jsxs)("div",{className:"glass-card p-4 lg:p-6 col-span-2 lg:col-span-1",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-3",children:(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"w-5 h-5 text-amber-400"})})}),(0,a.jsx)("p",{className:"text-2xl lg:text-3xl font-bold text-amber-400",children:(0,h.T3)(y)}),(0,a.jsx)("p",{className:"text-sm text-dark-400",children:"Taxa de Convers\xe3o"})]})]}),(0,a.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 lg:p-6 border-b border-dark-700",children:(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,a.jsx)(d,{className:"w-5 h-5 text-primary-400"}),"Resumo por M\xeas"]})}),e.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"data-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"M\xeas"}),(0,a.jsx)("th",{className:"text-center",children:"Or\xe7amentos"}),(0,a.jsx)("th",{className:"text-center",children:"Fechados"}),(0,a.jsx)("th",{className:"text-center",children:"Perdidos"}),(0,a.jsx)("th",{className:"text-right",children:"Valor Proposto"}),(0,a.jsx)("th",{className:"text-right",children:"Valor Fechado"}),(0,a.jsx)("th",{className:"text-center",children:"Taxa Convers\xe3o"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"cursor-pointer transition-colors ".concat(j===e.mes?"bg-primary-500/10":""),onClick:()=>N(j===e.mes?null:e.mes),children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500/20 to-primary-600/20 flex items-center justify-center",children:(0,a.jsx)(d,{className:"w-4 h-4 text-primary-400"})}),(0,a.jsx)("span",{className:"font-semibold text-white",children:e.mes})]})}),(0,a.jsx)("td",{className:"text-center",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-lg bg-dark-800 text-dark-300 font-medium",children:e.totalOrcamentos})}),(0,a.jsx)("td",{className:"text-center",children:(0,a.jsx)(x.Ct,{variant:"success",children:e.totalFechados})}),(0,a.jsx)("td",{className:"text-center",children:(0,a.jsx)(x.Ct,{variant:"danger",children:e.totalPerdidos})}),(0,a.jsx)("td",{className:"text-right text-dark-300",children:(0,h.xG)(e.valorProposto)}),(0,a.jsx)("td",{className:"text-right font-semibold text-primary-400",children:(0,h.xG)(e.valorFechado)}),(0,a.jsx)("td",{className:"text-center",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-20 h-2 bg-dark-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-primary-500 to-emerald-500 rounded-full transition-all duration-500",style:{width:"".concat(e.taxaConversao,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(e.taxaConversao>=70?"text-emerald-400":e.taxaConversao>=50?"text-amber-400":"text-red-400"),children:(0,h.T3)(e.taxaConversao)})]})})]},e.mes))}),(0,a.jsx)("tfoot",{className:"border-t-2 border-dark-600",children:(0,a.jsxs)("tr",{className:"bg-dark-800/50",children:[(0,a.jsx)("td",{className:"font-bold text-white",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500/30 to-emerald-500/30 flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"w-4 h-4 text-white"})}),"TOTAL GERAL"]})}),(0,a.jsx)("td",{className:"text-center font-bold text-white",children:b.totalOrcamentos}),(0,a.jsx)("td",{className:"text-center font-bold text-emerald-400",children:b.totalFechados}),(0,a.jsx)("td",{className:"text-center font-bold text-red-400",children:b.totalPerdidos}),(0,a.jsx)("td",{className:"text-right font-bold text-dark-300",children:(0,h.xG)(b.valorProposto)}),(0,a.jsx)("td",{className:"text-right font-bold text-primary-400",children:(0,h.xG)(b.valorFechado)}),(0,a.jsx)("td",{className:"text-center font-bold text-amber-400",children:(0,h.T3)(y)})]})})]})}):(0,a.jsx)(x.ub,{title:"Nenhum dado dispon\xedvel",description:"Adicione or\xe7amentos para ver o resumo mensal"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"glass-card p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"\uD83D\uDCCA Performance Geral"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-dark-400",children:"Ticket M\xe9dio (Fechado)"}),(0,a.jsx)("span",{className:"text-white font-semibold",children:b.totalFechados>0?(0,h.xG)(b.valorFechado/b.totalFechados):(0,h.xG)(0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-dark-400",children:"Ticket M\xe9dio (Proposto)"}),(0,a.jsx)("span",{className:"text-white font-semibold",children:b.totalOrcamentos>0?(0,h.xG)(b.valorProposto/b.totalOrcamentos):(0,h.xG)(0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-dark-400",children:"Convers\xe3o de Valor"}),(0,a.jsx)("span",{className:"font-semibold ".concat(b.valorProposto>0?b.valorFechado/b.valorProposto>=.5?"text-emerald-400":"text-amber-400":"text-dark-400"),children:b.valorProposto>0?(0,h.T3)(b.valorFechado/b.valorProposto*100):"0%"})]})]})]}),(0,a.jsxs)("div",{className:"glass-card p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"\uD83C\uDFAF Metas e Objetivos"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsx)("span",{className:"text-dark-400",children:"Taxa de Convers\xe3o"}),(0,a.jsxs)("span",{className:"text-white",children:[(0,h.T3)(y)," / 70%"]})]}),(0,a.jsx)("div",{className:"w-full h-3 bg-dark-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-primary-500 to-emerald-500 rounded-full transition-all duration-700",style:{width:"".concat(Math.min(y/70*100,100),"%")}})})]}),(0,a.jsx)("div",{className:"p-4 rounded-xl bg-dark-800/50 border border-dark-700",children:(0,a.jsx)("p",{className:"text-sm text-dark-400",children:y>=70?"\uD83C\uDF89 Excelente! Voc\xea est\xe1 acima da meta de convers\xe3o!":y>=50?"\uD83D\uDC4D Bom trabalho! Continue assim para atingir a meta.":"\uD83D\uDCAA H\xe1 espa\xe7o para melhorias. Foque na qualifica\xe7\xe3o dos leads."})})]})]})]})]})}},548:function(e,t,s){"use strict";s.d(t,{Ct:function(){return c},TK:function(){return o},ub:function(){return n}});var a=s(57437),r=s(22169),l=s(92851);function n(e){let{icon:t,title:s,description:r,action:n}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-dark-800 flex items-center justify-center mb-6",children:t||(0,a.jsx)(l.Z,{className:"w-10 h-10 text-dark-500"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:s}),r&&(0,a.jsx)("p",{className:"text-dark-400 max-w-sm mb-6",children:r}),n]})}function o(e){let{size:t="md"}=e;return(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:(0,r.cn)("rounded-full border-dark-700 border-t-primary-500 animate-spin",{sm:"w-6 h-6 border-2",md:"w-10 h-10 border-3",lg:"w-16 h-16 border-4"}[t])})})}function c(e){let{children:t,variant:s="success"}=e;return(0,a.jsx)("span",{className:(0,r.cn)("badge",{success:"badge-success",danger:"badge-danger",warning:"badge-warning",info:"badge-info"}[s]),children:t})}},14958:function(e,t,s){"use strict";s.d(t,{GL:function(){return x},JA:function(){return d},SL:function(){return c},nx:function(){return i}});var a=s(69073),r=s(62601);let l=r.env.NEXT_PUBLIC_SUPABASE_URL||"https://yhiiupamxdjmnrktkjku.supabase.co",n=r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InloaWl1cGFteGRqbW5ya3Rramt1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0ODg2NzUsImV4cCI6MjA4NDA2NDY3NX0._QjYtYAlypJdursHe0-rPz14QOT4NNP2EklqcJ6TpkI",o=(0,a.eI)(l,n);async function c(){let{data:e,error:t}=await o.from("orcamentos").select("*").order("data",{ascending:!1});if(t)throw console.error("Erro ao buscar or\xe7amentos:",t),t;return e||[]}async function i(e){let{data:t,error:s}=await o.from("orcamentos").insert([e]).select().single();if(s)throw console.error("Erro ao criar or\xe7amento:",s),Error(s.message);return t}async function d(e,t){let{data:s,error:a}=await o.from("orcamentos").update(t).eq("id",e).select().single();if(a)throw console.error("Erro ao atualizar or\xe7amento:",a),Error(a.message);return s}async function x(e){let{error:t}=await o.from("orcamentos").delete().eq("id",e);if(t)throw console.error("Erro ao excluir or\xe7amento:",t),Error(t.message)}},22169:function(e,t,s){"use strict";s.d(t,{T3:function(){return c},cn:function(){return l},d5:function(){return i},p6:function(){return o},xG:function(){return n}});var a=s(57042),r=s(74769);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}function n(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function o(e){if(!e)return"-";let t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString("pt-BR")}function c(e){return"".concat(e.toFixed(1),"%")}function i(e,t){return t&&0!==t?e/t*100:0}}},function(e){e.O(0,[61,730,971,938,744],function(){return e(e.s=78079)}),_N_E=e.O()}]);