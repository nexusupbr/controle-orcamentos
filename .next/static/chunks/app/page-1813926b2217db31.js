(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{48957:function(e,t,a){Promise.resolve().then(a.bind(a,59135))},59135:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var s=a(57437),r=a(2265),n=a(41298),o=a(74522),i=a(66654),c=a(85790),l=a(22169);let d={success:(0,s.jsx)(n.Z,{className:"w-8 h-8"}),danger:(0,s.jsx)(o.Z,{className:"w-8 h-8"}),info:(0,s.jsx)(i.Z,{className:"w-8 h-8"}),warning:(0,s.jsx)(c.Z,{className:"w-8 h-8"})},u={success:"text-primary-400",danger:"text-red-400",info:"text-blue-400",warning:"text-amber-400"},m={success:"bg-primary-500/10",danger:"bg-red-500/10",info:"bg-blue-500/10",warning:"bg-amber-500/10"};function x(e){let{title:t,value:a,subtitle:r,variant:n,icon:i,trend:x,delay:h=0}=e;return(0,s.jsxs)("div",{className:(0,l.cn)("kpi-card group cursor-default animate-slide-up",n),style:{animationDelay:"".concat(h,"ms")},children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-dark-400 uppercase tracking-wider",children:t}),(0,s.jsx)("p",{className:(0,l.cn)("text-3xl font-bold font-heading",u[n]),children:"number"==typeof a?(0,l.xG)(a):a}),r&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[x&&("up"===x?(0,s.jsx)(c.Z,{className:"w-4 h-4 text-primary-400"}):(0,s.jsx)(o.Z,{className:"w-4 h-4 text-red-400"})),(0,s.jsx)("span",{className:"text-sm text-dark-500",children:r})]})]}),(0,s.jsx)("div",{className:(0,l.cn)("p-3 rounded-xl transition-transform duration-300 group-hover:scale-110",m[n]),children:(0,s.jsx)("div",{className:u[n],children:i||d[n]})})]}),(0,s.jsx)("div",{className:"absolute bottom-0 right-0 w-32 h-32 opacity-5 pointer-events-none",children:(0,s.jsx)("div",{className:(0,l.cn)("w-full h-full rounded-tl-full","success"===n&&"bg-primary-500","danger"===n&&"bg-red-500","info"===n&&"bg-blue-500","warning"===n&&"bg-amber-500")})})]})}var h=a(45253),f=a(44909),j=a(16573),p=a(24235),g=a(50039),b=a(86812),N=a(31346),v=a(57703),w=a(28485),y=a(36612),k=a(79857);function F(e){let{title:t,children:a}=e;return(0,s.jsxs)("div",{className:"glass-card p-6 animate-slide-up",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-6",children:t}),a]})}function S(e){let{data:t}=e;return(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(h.h,{width:"100%",height:"100%",children:(0,s.jsxs)(f.v,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[(0,s.jsx)(j.q,{strokeDasharray:"3 3",stroke:"#334155"}),(0,s.jsx)(p.K,{dataKey:"mes",stroke:"#94a3b8",fontSize:12,tickLine:!1}),(0,s.jsx)(g.B,{stroke:"#94a3b8",fontSize:12,tickLine:!1,tickFormatter:e=>"R$ ".concat((e/1e3).toFixed(0),"k")}),(0,s.jsx)(b.u,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.3)"},labelStyle:{color:"#f8fafc",fontWeight:600},formatter:e=>[(0,l.xG)(e),""]}),(0,s.jsx)(N.$,{dataKey:"fechado",name:"Fechado",fill:"#10b981",radius:[6,6,0,0],maxBarSize:50}),(0,s.jsx)(N.$,{dataKey:"perdido",name:"Perdido",fill:"#ef4444",radius:[6,6,0,0],maxBarSize:50})]})})})}function D(e){let{data:t}=e,a=["#10b981","#ef4444"];return(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(h.h,{width:"100%",height:"100%",children:(0,s.jsxs)(v.u,{children:[(0,s.jsx)(w.b,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",label:e=>{let{name:t,percent:a}=e;return"".concat(t," ").concat((100*a).toFixed(0),"%")},labelLine:!1,children:t.map((e,t)=>(0,s.jsx)(y.b,{fill:e.color||a[t%a.length],stroke:"transparent"},"cell-".concat(t)))}),(0,s.jsx)(b.u,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"12px"},formatter:e=>[e,"Quantidade"]}),(0,s.jsx)(k.D,{verticalAlign:"bottom",iconType:"circle",formatter:e=>(0,s.jsx)("span",{className:"text-dark-300",children:e})})]})})})}var E=a(548),C=a(14958),I=a(90998),_=a(76637);function P(){let[e,t]=(0,r.useState)([]),[a,d]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null);(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{d(!0);let e=await (0,C.SL)();t(e),m(null)}catch(e){console.error("Erro ao carregar dados:",e),m("Erro ao carregar dados. Verifique a conex\xe3o com o Supabase.")}finally{d(!1)}},f=e.reduce((e,t)=>("Fechado"===t.status?(e.fechados++,e.totalFechado+=t.valor_fechado||0):(e.perdidos++,e.totalPerdido+=t.valor_proposto||0),e.total++,e),{totalFechado:0,totalPerdido:0,fechados:0,perdidos:0,total:0,taxaConversao:0});f.taxaConversao=(0,l.d5)(f.fechados,f.total);let j=Object.values(e.reduce((e,t)=>{let a=t.mes;return e[a]||(e[a]={mes:a,totalFechado:0,totalPerdido:0,fechados:0,perdidos:0}),"Fechado"===t.status?(e[a].fechados++,e[a].totalFechado+=t.valor_fechado||0):(e[a].perdidos++,e[a].totalPerdido+=t.valor_proposto||0),e},{})).sort((e,t)=>{let[a,s]=e.mes.split("/").map(Number),[r,n]=t.mes.split("/").map(Number);return s-n||a-r}).map(e=>({mes:e.mes,fechado:e.totalFechado,perdido:e.totalPerdido})),p=[{name:"Fechados",value:f.fechados,color:"#10b981"},{name:"Perdidos",value:f.perdidos,color:"#ef4444"}];return a?(0,s.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,s.jsx)(E.TK,{size:"lg"})}):u?(0,s.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,s.jsx)(E.ub,{icon:(0,s.jsx)(I.Z,{className:"w-10 h-10 text-red-400"}),title:"Erro ao carregar dados",description:u})}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold font-heading text-white",children:"Dashboard"}),(0,s.jsx)("p",{className:"text-dark-400 mt-1",children:"Vis\xe3o geral dos seus or\xe7amentos"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-dark-400",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:[f.total," or\xe7amentos cadastrados"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[(0,s.jsx)(x,{title:"Total Fechado",value:f.totalFechado,subtitle:"Vendas conclu\xeddas",variant:"success",trend:"up",icon:(0,s.jsx)(n.Z,{className:"w-8 h-8"}),delay:0}),(0,s.jsx)(x,{title:"Total Perdido",value:f.totalPerdido,subtitle:"Oportunidades perdidas",variant:"danger",trend:"down",icon:(0,s.jsx)(o.Z,{className:"w-8 h-8"}),delay:100}),(0,s.jsx)(x,{title:"Taxa de Convers\xe3o",value:"".concat(f.taxaConversao.toFixed(1),"%"),subtitle:"".concat(f.fechados," de ").concat(f.total),variant:"info",icon:(0,s.jsx)(i.Z,{className:"w-8 h-8"}),delay:200}),(0,s.jsx)(x,{title:"Ticket M\xe9dio",value:f.fechados>0?f.totalFechado/f.fechados:0,subtitle:"Por or\xe7amento fechado",variant:"warning",icon:(0,s.jsx)(c.Z,{className:"w-8 h-8"}),delay:300})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(F,{title:"\uD83D\uDCC8 Evolu\xe7\xe3o Mensal",children:j.length>0?(0,s.jsx)(S,{data:j}):(0,s.jsx)(E.ub,{title:"Sem dados",description:"Adicione or\xe7amentos para ver o gr\xe1fico"})}),(0,s.jsx)(F,{title:"\uD83E\uDD67 Distribui\xe7\xe3o por Status",children:f.total>0?(0,s.jsx)(D,{data:p}):(0,s.jsx)(E.ub,{title:"Sem dados",description:"Adicione or\xe7amentos para ver o gr\xe1fico"})})]}),(0,s.jsxs)("div",{className:"glass-card p-6 animate-slide-up",style:{animationDelay:"400ms"},children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-6",children:"\uD83D\uDCCB \xdaltimos Or\xe7amentos"}),e.length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Cliente"}),(0,s.jsx)("th",{children:"Valor"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Data"})]})}),(0,s.jsx)("tbody",{children:e.slice(0,5).map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"font-medium text-white",children:e.cliente}),(0,s.jsx)("td",{className:"text-primary-400 font-semibold",children:(0,l.xG)("Fechado"===e.status?e.valor_fechado:e.valor_proposto)}),(0,s.jsx)("td",{children:(0,s.jsxs)("span",{className:"badge ".concat("Fechado"===e.status?"badge-success":"badge-danger"),children:["Fechado"===e.status?"✅":"❌"," ",e.status]})}),(0,s.jsx)("td",{className:"text-dark-400",children:e.mes})]},e.id))})]})}):(0,s.jsx)(E.ub,{title:"Nenhum or\xe7amento",description:"Adicione seu primeiro or\xe7amento"})]})]})}},548:function(e,t,a){"use strict";a.d(t,{Ct:function(){return c},TK:function(){return i},ub:function(){return o}});var s=a(57437),r=a(22169),n=a(92851);function o(e){let{icon:t,title:a,description:r,action:o}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-dark-800 flex items-center justify-center mb-6",children:t||(0,s.jsx)(n.Z,{className:"w-10 h-10 text-dark-500"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:a}),r&&(0,s.jsx)("p",{className:"text-dark-400 max-w-sm mb-6",children:r}),o]})}function i(e){let{size:t="md"}=e;return(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:(0,r.cn)("rounded-full border-dark-700 border-t-primary-500 animate-spin",{sm:"w-6 h-6 border-2",md:"w-10 h-10 border-3",lg:"w-16 h-16 border-4"}[t])})})}function c(e){let{children:t,variant:a="success"}=e;return(0,s.jsx)("span",{className:(0,r.cn)("badge",{success:"badge-success",danger:"badge-danger",warning:"badge-warning",info:"badge-info"}[a]),children:t})}},14958:function(e,t,a){"use strict";a.d(t,{GL:function(){return u},JA:function(){return d},SL:function(){return c},nx:function(){return l}});var s=a(69073),r=a(62601);let n=r.env.NEXT_PUBLIC_SUPABASE_URL||"https://yhiiupamxdjmnrktkjku.supabase.co",o=r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InloaWl1cGFteGRqbW5ya3Rramt1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0ODg2NzUsImV4cCI6MjA4NDA2NDY3NX0._QjYtYAlypJdursHe0-rPz14QOT4NNP2EklqcJ6TpkI",i=(0,s.eI)(n,o);async function c(){let{data:e,error:t}=await i.from("orcamentos").select("*").order("data",{ascending:!1});if(t)throw console.error("Erro ao buscar or\xe7amentos:",t),t;return e||[]}async function l(e){let{data:t,error:a}=await i.from("orcamentos").insert([e]).select().single();if(a)throw console.error("Erro ao criar or\xe7amento:",a),Error(a.message);return t}async function d(e,t){let{data:a,error:s}=await i.from("orcamentos").update(t).eq("id",e).select().single();if(s)throw console.error("Erro ao atualizar or\xe7amento:",s),Error(s.message);return a}async function u(e){let{error:t}=await i.from("orcamentos").delete().eq("id",e);if(t)throw console.error("Erro ao excluir or\xe7amento:",t),Error(t.message)}},22169:function(e,t,a){"use strict";a.d(t,{T3:function(){return c},cn:function(){return n},d5:function(){return l},p6:function(){return i},xG:function(){return o}});var s=a(57042),r=a(74769);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}function o(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function i(e){if(!e)return"-";let t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString("pt-BR")}function c(e){return"".concat(e.toFixed(1),"%")}function l(e,t){return t&&0!==t?e/t*100:0}}},function(e){e.O(0,[61,730,170,971,938,744],function(){return e(e.s=48957)}),_N_E=e.O()}]);