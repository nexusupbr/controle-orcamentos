(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[297],{72894:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},98783:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},98253:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},28203:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},13008:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},41298:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},35817:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},99670:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},76637:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},86264:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4322:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},64280:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},41827:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},92851:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},45367:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},31541:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},82549:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},62400:function(e,a,t){Promise.resolve().then(t.bind(t,82499))},82499:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return b}});var s=t(57437),r=t(2265);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t(62898).Z)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);var i=t(98783),n=t(31541),o=t(76637),d=t(41298),c=t(28203),x=t(4322),m=t(13008),h=t(41827),u=t(64280),p=t(45367),v=t(99670),j=t(35817),f=t(98253),N=t(72894),g=t(66651),k=t(548),y=t(70492),_=t(87431),w=t(22169);function b(){var e,a,t,b,z,C,F;let[Z,S]=(0,r.useState)(!0),[E,M]=(0,r.useState)([]),[L,T]=(0,r.useState)([]),[A,q]=(0,r.useState)([]),[D,P]=(0,r.useState)([]),[I,V]=(0,r.useState)(""),[G,O]=(0,r.useState)("todos"),[B,X]=(0,r.useState)("entrada"),[H,R]=(0,r.useState)(!1),[U,K]=(0,r.useState)(null),[J,Q]=(0,r.useState)(!1),[W,Y]=(0,r.useState)("upload"),[$,ee]=(0,r.useState)(!1),[ea,et]=(0,r.useState)(null),[es,er]=(0,r.useState)(!1),[el,ei]=(0,r.useState)(null),[en,eo]=(0,r.useState)({}),[ed,ec]=(0,r.useState)(new Set),[ex,em]=(0,r.useState)(!1),[eh,eu]=(0,r.useState)(!1),[ep,ev]=(0,r.useState)({current:0,total:0,errors:0});(0,r.useEffect)(()=>{ej()},[]);let ej=async()=>{try{S(!0);let[e,a,t,s]=await Promise.all([(0,_.TM)(),(0,_.sL)(),(0,_.Df)(),(0,_.Xh)()]);M(e),T(a),q(t),P(s)}catch(e){console.error("Erro ao carregar dados:",e)}finally{S(!1)}},ef=e=>{let a=new Set(Array.from(ed));a.has(e)?a.delete(e):a.add(e),ec(a)},eN=async()=>{if(0===ed.size)return;eu(!0),ev({current:0,total:ed.size,errors:0});let e=0,a=0;for(let t of Array.from(ed)){try{!(await (0,_.fz)(t)).success&&e++}catch(a){console.error("Erro ao excluir nota ".concat(t,":"),a),e++}ev({current:++a,total:ed.size,errors:e})}eu(!1),em(!1),ec(new Set),await ej(),e>0&&alert("Exclus\xe3o conclu\xedda. ".concat(a-e," exclu\xeddas, ").concat(e," erros."))},eg=e=>{try{var a;let t=new DOMParser().parseFromString(e,"text/xml"),s=(e,a)=>{let t=e.getElementsByTagName(a)[0];return(null==t?void 0:t.textContent)||""},r=t.getElementsByTagName("NFe")[0]||t.getElementsByTagName("nfeProc")[0];if(!r)throw Error("XML inv\xe1lido - n\xe3o \xe9 uma NFe");let l=r.getElementsByTagName("infNFe")[0],i=l.getElementsByTagName("ide")[0],n=l.getElementsByTagName("emit")[0],o=l.getElementsByTagName("total")[0].getElementsByTagName("ICMSTot")[0],d=n.getElementsByTagName("enderEmit")[0],c={cnpj:s(n,"CNPJ"),razao_social:s(n,"xNome"),nome_fantasia:s(n,"xFant"),endereco:"".concat(s(d,"xLgr"),", ").concat(s(d,"nro")),cidade:s(d,"xMun"),estado:s(d,"UF")},x=l.getElementsByTagName("det"),m=[];for(let e=0;e<x.length;e++){let a=x[e].getElementsByTagName("prod")[0],t={codigo_produto_nf:s(a,"cProd"),descricao:s(a,"xProd"),ncm:s(a,"NCM"),cfop:s(a,"CFOP"),unidade:(0,w.zm)(s(a,"uCom")),quantidade:parseFloat(s(a,"qCom"))||0,valor_unitario:parseFloat(s(a,"vUnCom"))||0,valor_total:parseFloat(s(a,"vProd"))||0,valor_desconto:parseFloat(s(a,"vDesc"))||0,acao:"cadastrado"},r=D.find(e=>e.nome.toLowerCase()===t.descricao.toLowerCase()||e.codigo===t.codigo_produto_nf||e.codigo_barras===s(a,"cEAN"));r&&(t.acao="existente",t.produto_id=r.id,t.produtoExistente=r),m.push(t)}let h=l.getElementsByTagName("pag")[0],u=null==h?void 0:h.getElementsByTagName("detPag")[0],p=u?s(u,"tPag"):"";return{numero:s(i,"nNF"),serie:s(i,"serie"),chave_acesso:(null===(a=l.getAttribute("Id"))||void 0===a?void 0:a.replace("NFe",""))||"",data_emissao:s(i,"dhEmi").split("T")[0],fornecedor:c,itens:m,valor_produtos:parseFloat(s(o,"vProd"))||0,valor_frete:parseFloat(s(o,"vFrete"))||0,valor_seguro:parseFloat(s(o,"vSeg"))||0,valor_desconto:parseFloat(s(o,"vDesc"))||0,valor_ipi:parseFloat(s(o,"vIPI"))||0,valor_icms:parseFloat(s(o,"vICMS"))||0,valor_pis:parseFloat(s(o,"vPIS"))||0,valor_cofins:parseFloat(s(o,"vCOFINS"))||0,valor_total:parseFloat(s(o,"vNF"))||0,forma_pagamento:({"01":"dinheiro","02":"cheque","03":"credito","04":"debito","05":"credito_loja",10:"vale_alimentacao",11:"vale_refeicao",12:"vale_presente",13:"vale_combustivel",14:"duplicata",15:"boleto",16:"deposito",17:"pix",18:"transferencia",19:"cashback",90:"sem_pagamento",99:"outros"})[p]||"outros"}}catch(e){return console.error("Erro ao parsear XML:",e),null}},ek=async e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!t)return;let s=new FileReader;s.onload=e=>{var a;let t=eg(null===(a=e.target)||void 0===a?void 0:a.result);if(t){K(t),Y("review");let e={};t.itens.forEach((a,t)=>{"existente"===a.acao?e[t]="substituir":e[t]="cadastrar"}),eo(e)}else alert("Erro ao processar o XML. Verifique se \xe9 uma NFe v\xe1lida.")},s.readAsText(t)},ey=async()=>{if(U){Q(!0);try{let e=A.find(e=>e.cnpj===U.fornecedor.cnpj);e||(e=await (0,_.gO)({razao_social:U.fornecedor.razao_social,nome_fantasia:U.fornecedor.nome_fantasia,cnpj:U.fornecedor.cnpj,endereco:U.fornecedor.endereco,cidade:U.fornecedor.cidade,estado:U.fornecedor.estado,ativo:!0}));let a=[];for(let t=0;t<U.itens.length;t++){let s=U.itens[t],r=en[t],l=s.produto_id;if("cadastrar"===r){let a=await (0,_.LK)({codigo:s.codigo_produto_nf,nome:s.descricao,ncm:s.ncm,cfop:s.cfop,unidade:s.unidade,valor_custo:s.valor_unitario,custo_ultima_compra:s.valor_unitario,fornecedor_id:e.id,ativo:!0});l=a.id,await (0,_.QV)({produto_id:a.id,tipo:"entrada",quantidade:s.quantidade,valor_unitario:s.valor_unitario,valor_total:s.valor_total,motivo:"NF ".concat(U.numero),observacao:"Entrada via XML - NF ".concat(U.numero)})}else"substituir"===r&&s.produto_id&&(l=s.produto_id,await (0,_.QV)({produto_id:s.produto_id,tipo:"entrada",quantidade:s.quantidade,valor_unitario:s.valor_unitario,valor_total:s.valor_total,motivo:"NF ".concat(U.numero),observacao:"Entrada via XML - NF ".concat(U.numero)}));a.push({produto_id:l,codigo_produto_nf:s.codigo_produto_nf,descricao:s.descricao,ncm:s.ncm,cfop:s.cfop,unidade:s.unidade,quantidade:s.quantidade,valor_unitario:s.valor_unitario,valor_total:s.valor_total,valor_desconto:s.valor_desconto,acao:"cadastrar"===r?"cadastrado":"substituir"===r?"existente":"ignorado"})}let t=await (0,_.Fd)({numero:U.numero,serie:U.serie,chave_acesso:U.chave_acesso,data_emissao:U.data_emissao,fornecedor_id:e.id,fornecedor_cnpj:U.fornecedor.cnpj,fornecedor_razao_social:U.fornecedor.razao_social,valor_produtos:U.valor_produtos,valor_frete:U.valor_frete,valor_seguro:U.valor_seguro,valor_desconto:U.valor_desconto,valor_ipi:U.valor_ipi,valor_icms:U.valor_icms,valor_pis:U.valor_pis,valor_cofins:U.valor_cofins,valor_total:U.valor_total,forma_pagamento:U.forma_pagamento,status:"processada"},a);await (0,_.NV)({fornecedor_id:e.id,descricao:"NF ".concat(U.numero," - ").concat(U.fornecedor.razao_social),valor:U.valor_total,data_vencimento:new Date(new Date(U.data_emissao).getTime()+2592e6).toISOString().split("T")[0],nota_fiscal_id:t.id,status:"pendente",com_nota_fiscal:!0}),await ej(),R(!1),K(null),Y("upload"),alert("Nota fiscal importada com sucesso!")}catch(e){console.error("Erro ao importar NF:",e),alert("Erro ao importar nota fiscal")}finally{Q(!1)}}},e_=e=>{et(e),ee(!0)},ew=e=>{ei(e),er(!0)},eb=E.filter(e=>{var a,t,s;return(null===(a=e.numero)||void 0===a?void 0:a.toLowerCase().includes(I.toLowerCase()))||(null===(t=e.fornecedor_razao_social)||void 0===t?void 0:t.toLowerCase().includes(I.toLowerCase()))||(null===(s=e.chave_acesso)||void 0===s?void 0:s.includes(I))}),ez=L.filter(e=>{var a,t,s,r,l;let i=e.destinatario_nome||(null===(a=e.cliente)||void 0===a?void 0:a.nome)||(null===(t=e.cliente)||void 0===t?void 0:t.razao_social)||"";return(null===(s=e.numero)||void 0===s?void 0:s.toLowerCase().includes(I.toLowerCase()))||i.toLowerCase().includes(I.toLowerCase())||(null===(r=e.chave_acesso)||void 0===r?void 0:r.toLowerCase().includes(I.toLowerCase()))||(null===(l=e.referencia)||void 0===l?void 0:l.toLowerCase().includes(I.toLowerCase()))}),eC=E.length,eF=E.reduce((e,a)=>e+(a.valor_total||0),0),eZ=E.filter(e=>e.data_entrada===new Date().toISOString().split("T")[0]).length,eS=L.length,eE=L.filter(e=>"autorizado"===e.status||"autorizada"===e.status),eM=eE.reduce((e,a)=>e+(a.valor_total||0),0),eL=L.filter(e=>{let a=e.emitida_em||e.created_at;return(null==a?void 0:a.split("T")[0])===new Date().toISOString().split("T")[0]}).length,eT=e=>{let a={autorizado:{variant:"success",label:"Autorizada"},autorizada:{variant:"success",label:"Autorizada"},pendente:{variant:"warning",label:"Pendente"},processando:{variant:"info",label:"Processando"},processando_autorizacao:{variant:"info",label:"Aguardando SEFAZ"},cancelada:{variant:"danger",label:"Cancelada"},rejeitada:{variant:"danger",label:"Rejeitada"},denegada:{variant:"danger",label:"Denegada"},erro_autorizacao:{variant:"danger",label:"Erro"}}[e]||{variant:"warning",label:e};return(0,s.jsx)(k.Ct,{variant:a.variant,children:a.label})},eA=e=>"autorizado"===e||"autorizada"===e,eq=()=>"https://homologacao.focusnfe.com.br",eD=e=>{if(e.url_danfe){let a=e.url_danfe.startsWith("http")?e.url_danfe:"".concat(eq()).concat(e.url_danfe);window.open(a,"_blank")}else e.referencia&&window.open("".concat(eq(),"/v2/nfe/").concat(e.referencia,"/danfe"),"_blank")},eP=e=>{if(e.url_xml){let a=e.url_xml.startsWith("http")?e.url_xml:"".concat(eq()).concat(e.url_xml);window.open(a,"_blank")}else e.referencia&&window.open("".concat(eq(),"/v2/nfe/").concat(e.referencia,"/xml"),"_blank")},eI=async e=>{if("autorizado"===e.status||"autorizada"===e.status){alert("⚠️ N\xe3o \xe9 poss\xedvel excluir uma nota fiscal j\xe1 autorizada pela SEFAZ.\n\nUse a op\xe7\xe3o de cancelamento na tela de Vendas.");return}if(confirm("Tem certeza que deseja excluir esta nota fiscal?\n\nRefer\xeancia: ".concat(e.referencia,"\nStatus: ").concat(e.status,"\n\nEsta a\xe7\xe3o n\xe3o pode ser desfeita.")))try{let a=await (0,_.YB)(e.id);a.success?(alert("✅ "+a.message),await ej()):alert("❌ "+a.message)}catch(e){console.error("Erro ao excluir nota:",e),alert("❌ Erro ao excluir nota fiscal: "+(e.message||e))}},eV=[{id:"entrada",label:"NF Entrada",icon:l},{id:"saida",label:"NF Sa\xedda",icon:i.Z}];return Z?(0,s.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,s.jsx)(k.TK,{size:"lg"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold font-heading text-white",children:"Notas Fiscais"}),(0,s.jsx)("p",{className:"text-dark-400 mt-1",children:"Gerencie notas fiscais de entrada e sa\xedda"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(g.z,{variant:"secondary",onClick:()=>{Y("upload"),K(null),R(!0)},leftIcon:(0,s.jsx)(n.Z,{className:"w-4 h-4"}),children:"Importar XML"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,w.cn)("p-2 rounded-lg","entrada"===B?"bg-primary-500/20":"bg-orange-500/20"),children:(0,s.jsx)(o.Z,{className:(0,w.cn)("w-5 h-5","entrada"===B?"text-primary-400":"text-orange-400")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"entrada"===B?"Total NF Entrada":"Total NF Sa\xedda"}),(0,s.jsx)("p",{className:"text-xl font-bold text-white",children:"entrada"===B?eC:eS})]})]})}),(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-green-500/20",children:(0,s.jsx)(d.Z,{className:"w-5 h-5 text-green-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"entrada"===B?"Valor Total Entrada":"Valor Autorizadas"}),(0,s.jsx)("p",{className:"text-xl font-bold text-green-400",children:(0,w.xG)("entrada"===B?eF:eM)})]})]})}),(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-blue-500/20",children:(0,s.jsx)(c.Z,{className:"w-5 h-5 text-blue-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Notas Hoje"}),(0,s.jsx)("p",{className:"text-xl font-bold text-blue-400",children:"entrada"===B?eZ:eL})]})]})}),(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,w.cn)("p-2 rounded-lg","entrada"===B?"bg-purple-500/20":"bg-emerald-500/20"),children:"entrada"===B?(0,s.jsx)(x.Z,{className:"w-5 h-5 text-purple-400"}):(0,s.jsx)(m.Z,{className:"w-5 h-5 text-emerald-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"entrada"===B?"Produtos Cadastrados":"Autorizadas"}),(0,s.jsx)("p",{className:(0,w.cn)("text-xl font-bold","entrada"===B?"text-purple-400":"text-emerald-400"),children:"entrada"===B?D.length:eE.length})]})]})})]}),(0,s.jsx)("div",{className:"flex gap-2 border-b border-dark-600 pb-2",children:eV.map(e=>(0,s.jsxs)("button",{onClick:()=>X(e.id),className:(0,w.cn)("flex items-center gap-2 px-4 py-2 rounded-t-lg transition-colors",B===e.id?"bg-primary-500 text-white":"text-dark-400 hover:text-white hover:bg-dark-700"),children:[(0,s.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))}),(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"relative md:col-span-2",children:[(0,s.jsx)(h.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar por n\xfamero, fornecedor ou chave...",value:I,onChange:e=>V(e.target.value),className:"input pl-12 w-full"})]}),(0,s.jsx)(g.z,{variant:"secondary",leftIcon:(0,s.jsx)(u.Z,{className:"w-4 h-4"}),onClick:ej,children:"Atualizar"})]})}),"entrada"===B&&(0,s.jsxs)("div",{className:"glass-card overflow-hidden",children:[ed.size>0&&(0,s.jsxs)("div",{className:"p-4 border-b border-dark-700 flex items-center justify-between bg-dark-800",children:[(0,s.jsxs)("span",{className:"text-dark-300 text-sm",children:[ed.size," ",1===ed.size?"nota selecionada":"notas selecionadas"]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(g.z,{variant:"danger",size:"sm",leftIcon:(0,s.jsx)(p.Z,{className:"w-4 h-4"}),onClick:()=>em(!0),children:"Excluir Selecionadas"}),(0,s.jsx)(g.z,{variant:"secondary",size:"sm",onClick:()=>ec(new Set),children:"Limpar"})]})]}),eb.length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"w-10",children:(0,s.jsx)("input",{type:"checkbox",checked:ed.size===eb.length&&eb.length>0,onChange:()=>{ed.size===eb.length?ec(new Set):ec(new Set(eb.map(e=>e.id)))},className:"w-4 h-4 rounded border-dark-500 bg-dark-700 text-primary-500 focus:ring-primary-500"})}),(0,s.jsx)("th",{children:"N\xfamero"}),(0,s.jsx)("th",{children:"Data"}),(0,s.jsx)("th",{children:"Fornecedor"}),(0,s.jsx)("th",{className:"text-right",children:"Valor"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{className:"text-right",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{children:eb.map(e=>(0,s.jsxs)("tr",{className:"group ".concat(ed.has(e.id)?"bg-primary-500/10":""),children:[(0,s.jsx)("td",{onClick:e=>e.stopPropagation(),children:(0,s.jsx)("input",{type:"checkbox",checked:ed.has(e.id),onChange:()=>ef(e.id),className:"w-4 h-4 rounded border-dark-500 bg-dark-700 text-primary-500 focus:ring-primary-500"})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-white",children:e.numero}),(0,s.jsxs)("span",{className:"text-dark-400 text-sm block",children:["S\xe9rie ",e.serie]})]})}),(0,s.jsx)("td",{className:"text-dark-300",children:(0,w.p6)(e.data_emissao||"")}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-white",children:e.fornecedor_razao_social}),(0,s.jsx)("span",{className:"text-dark-400 text-sm block",children:e.fornecedor_cnpj})]})}),(0,s.jsx)("td",{className:"text-right font-medium text-white",children:(0,w.xG)(e.valor_total||0)}),(0,s.jsx)("td",{children:(0,s.jsx)(k.Ct,{variant:"processada"===e.status?"success":"warning",children:"processada"===e.status?"Processada":"Pendente"})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)("button",{onClick:()=>e_(e),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors",title:"Visualizar",children:(0,s.jsx)(v.Z,{className:"w-4 h-4 text-dark-400"})}),(0,s.jsx)("button",{className:"p-2 hover:bg-dark-600 rounded-lg transition-colors",title:"Download XML",children:(0,s.jsx)(j.Z,{className:"w-4 h-4 text-dark-400"})}),(0,s.jsx)("button",{onClick:async()=>{if(!confirm("Tem certeza que deseja excluir a NF ".concat(e.numero,"?\n\nIsso ir\xe1 reverter o estoque e remover lan\xe7amentos financeiros vinculados.")))return;let a=await (0,_.fz)(e.id);a.success?(alert("✅ "+a.message),await ej()):alert("❌ "+a.message)},className:"p-2 hover:bg-red-500/20 rounded-lg transition-colors",title:"Excluir nota fiscal",children:(0,s.jsx)(p.Z,{className:"w-4 h-4 text-red-400"})})]})})]},e.id))})]})}):(0,s.jsx)(k.ub,{icon:(0,s.jsx)(o.Z,{className:"w-10 h-10 text-dark-500"}),title:"Nenhuma nota fiscal encontrada",description:"Importe XMLs de notas fiscais para come\xe7ar",action:(0,s.jsx)(g.z,{onClick:()=>{Y("upload"),K(null),R(!0)},leftIcon:(0,s.jsx)(n.Z,{className:"w-4 h-4"}),children:"Importar XML"})})]}),"saida"===B&&(0,s.jsx)("div",{className:"glass-card overflow-hidden",children:ez.length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"N\xfamero"}),(0,s.jsx)("th",{children:"Data"}),(0,s.jsx)("th",{children:"Cliente"}),(0,s.jsx)("th",{className:"text-right",children:"Valor"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{className:"text-right",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{children:ez.map(e=>{var a,t,r,l,i;let n=e.destinatario_nome||(null===(a=e.cliente)||void 0===a?void 0:a.nome)||(null===(t=e.cliente)||void 0===t?void 0:t.razao_social)||"Consumidor Final",d=e.destinatario_documento||(null===(r=e.cliente)||void 0===r?void 0:r.cnpj)||(null===(l=e.cliente)||void 0===l?void 0:l.cpf)||"",c=e.emitida_em||e.created_at;return(0,s.jsxs)("tr",{className:"group",children:[(0,s.jsx)("td",{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-white",children:e.numero||"-"}),(0,s.jsx)("span",{className:"text-dark-400 text-sm block",children:e.serie?"S\xe9rie ".concat(e.serie):"Ref: ".concat(null===(i=e.referencia)||void 0===i?void 0:i.slice(0,12),"...")})]})}),(0,s.jsx)("td",{className:"text-dark-300",children:c?(0,w.p6)(c.split("T")[0]):"-"}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-white",children:n}),d&&(0,s.jsx)("span",{className:"text-dark-400 text-sm block",children:d})]})}),(0,s.jsx)("td",{className:"text-right font-medium text-white",children:(0,w.xG)(e.valor_total||0)}),(0,s.jsx)("td",{children:eT(e.status)}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)("button",{onClick:()=>ew(e),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors",title:"Visualizar",children:(0,s.jsx)(v.Z,{className:"w-4 h-4 text-dark-400"})}),eA(e.status)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>eD(e),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors",title:"Download DANFE",children:(0,s.jsx)(o.Z,{className:"w-4 h-4 text-blue-400"})}),(0,s.jsx)("button",{onClick:()=>eP(e),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors",title:"Download XML",children:(0,s.jsx)(j.Z,{className:"w-4 h-4 text-green-400"})})]}),!eA(e.status)&&(0,s.jsx)("button",{onClick:()=>eI(e),className:"p-2 hover:bg-red-500/20 rounded-lg transition-colors",title:"Excluir nota fiscal",children:(0,s.jsx)(p.Z,{className:"w-4 h-4 text-red-400"})})]})})]},e.id)})})]})}):(0,s.jsx)(k.ub,{icon:(0,s.jsx)(i.Z,{className:"w-10 h-10 text-dark-500"}),title:"Nenhuma nota fiscal de sa\xedda encontrada",description:"As notas fiscais de sa\xedda s\xe3o geradas a partir das vendas. V\xe1 em Comercial → Vendas para emitir NF."})}),(0,s.jsxs)(y.u,{isOpen:H,onClose:()=>R(!1),title:"Importar Nota Fiscal (XML)",size:"xl",children:["upload"===W&&(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"border-2 border-dashed border-dark-500 rounded-lg p-8 text-center",children:[(0,s.jsx)(n.Z,{className:"w-12 h-12 text-dark-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-white font-medium mb-2",children:"Arraste o arquivo XML ou clique para selecionar"}),(0,s.jsx)("p",{className:"text-dark-400 text-sm mb-4",children:"Suporte para NFe (Nota Fiscal Eletr\xf4nica)"}),(0,s.jsx)("input",{type:"file",accept:".xml",onChange:ek,className:"hidden",id:"xml-upload"}),(0,s.jsx)("label",{htmlFor:"xml-upload",children:(0,s.jsx)("span",{className:"btn btn-primary cursor-pointer",children:"Selecionar Arquivo"})})]})}),"review"===W&&U&&(0,s.jsxs)("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"glass-card p-4 bg-dark-700/50",children:[(0,s.jsxs)("h3",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"w-5 h-5"}),"Dados da Nota Fiscal"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"N\xfamero"}),(0,s.jsx)("p",{className:"text-white font-medium",children:U.numero})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"S\xe9rie"}),(0,s.jsx)("p",{className:"text-white font-medium",children:U.serie})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Data Emiss\xe3o"}),(0,s.jsx)("p",{className:"text-white font-medium",children:(0,w.p6)(U.data_emissao)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Valor Total"}),(0,s.jsx)("p",{className:"text-green-400 font-bold",children:(0,w.xG)(U.valor_total)})]})]})]}),(0,s.jsxs)("div",{className:"glass-card p-4 bg-dark-700/50",children:[(0,s.jsxs)("h3",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[(0,s.jsx)(f.Z,{className:"w-5 h-5"}),"Fornecedor",!A.find(e=>e.cnpj===U.fornecedor.cnpj)&&(0,s.jsx)(k.Ct,{variant:"warning",children:"Novo"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"CNPJ"}),(0,s.jsx)("p",{className:"text-white font-medium",children:U.fornecedor.cnpj})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Raz\xe3o Social"}),(0,s.jsx)("p",{className:"text-white font-medium",children:U.fornecedor.razao_social})]})]}),!A.find(e=>e.cnpj===U.fornecedor.cnpj)&&(0,s.jsx)("p",{className:"text-yellow-400 text-sm mt-2",children:"⚠️ Este fornecedor ser\xe1 cadastrado automaticamente"})]}),(0,s.jsxs)("div",{className:"glass-card p-4 bg-dark-700/50",children:[(0,s.jsxs)("h3",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5"}),"Itens (",U.itens.length,")"]}),(0,s.jsx)("div",{className:"space-y-3",children:U.itens.map((e,a)=>{var t;return(0,s.jsxs)("div",{className:"p-3 bg-dark-800 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-white font-medium",children:e.descricao}),(0,s.jsxs)("p",{className:"text-dark-400 text-sm",children:["C\xf3digo: ",e.codigo_produto_nf," | NCM: ",e.ncm," | ",e.quantidade," ",e.unidade]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-green-400 font-medium",children:(0,w.xG)(e.valor_total)}),(0,s.jsxs)("p",{className:"text-dark-400 text-sm",children:[(0,w.xG)(e.valor_unitario),"/un"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-3 pt-3 border-t border-dark-600",children:["existente"===e.acao?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Ct,{variant:"success",children:"Produto existente"}),(0,s.jsxs)("span",{className:"text-dark-400 text-sm",children:["→ ",null===(t=e.produtoExistente)||void 0===t?void 0:t.nome]})]}):(0,s.jsx)(k.Ct,{variant:"warning",children:"Novo produto"}),(0,s.jsx)("select",{value:en[a]||"cadastrar",onChange:e=>{let t=e.target.value;eo(e=>({...e,[a]:t}))},className:"input text-sm ml-auto",children:"existente"===e.acao?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"substituir",children:"Atualizar estoque"}),(0,s.jsx)("option",{value:"ignorar",children:"Ignorar"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"cadastrar",children:"Cadastrar novo produto"}),(0,s.jsx)("option",{value:"ignorar",children:"Ignorar"})]})})]})]},a)})})]}),(0,s.jsxs)("div",{className:"glass-card p-4 bg-dark-700/50",children:[(0,s.jsx)("h3",{className:"text-white font-medium mb-3",children:"Resumo Financeiro"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Produtos"}),(0,s.jsx)("p",{className:"text-white",children:(0,w.xG)(U.valor_produtos)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Frete"}),(0,s.jsx)("p",{className:"text-white",children:(0,w.xG)(U.valor_frete)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Desconto"}),(0,s.jsx)("p",{className:"text-red-400",children:(0,w.xG)(U.valor_desconto)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Total"}),(0,s.jsx)("p",{className:"text-green-400 font-bold text-lg",children:(0,w.xG)(U.valor_total)})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between pt-4 border-t border-dark-600",children:[(0,s.jsx)(g.z,{variant:"secondary",onClick:()=>{Y("upload"),K(null)},children:"Voltar"}),(0,s.jsx)(g.z,{onClick:ey,disabled:J,children:J?(0,s.jsx)(k.TK,{size:"sm"}):"Importar Nota Fiscal"})]})]})]}),(0,s.jsx)(y.u,{isOpen:$,onClose:()=>ee(!1),title:"NF ".concat(null==ea?void 0:ea.numero),size:"lg",children:ea&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"N\xfamero/S\xe9rie"}),(0,s.jsxs)("p",{className:"text-white font-medium",children:[ea.numero," / ",ea.serie]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Data Emiss\xe3o"}),(0,s.jsx)("p",{className:"text-white font-medium",children:(0,w.p6)(ea.data_emissao||"")})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Fornecedor"}),(0,s.jsx)("p",{className:"text-white font-medium",children:ea.fornecedor_razao_social}),(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:ea.fornecedor_cnpj})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Chave de Acesso"}),(0,s.jsx)("p",{className:"text-white font-mono text-sm break-all",children:ea.chave_acesso})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-dark-600",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Produtos"}),(0,s.jsx)("p",{className:"text-white",children:(0,w.xG)(ea.valor_produtos||0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Frete"}),(0,s.jsx)("p",{className:"text-white",children:(0,w.xG)(ea.valor_frete||0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Desconto"}),(0,s.jsx)("p",{className:"text-red-400",children:(0,w.xG)(ea.valor_desconto||0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Total"}),(0,s.jsx)("p",{className:"text-green-400 font-bold",children:(0,w.xG)(ea.valor_total||0)})]})]}),(0,s.jsx)("div",{className:"flex justify-end gap-3",children:(0,s.jsx)(g.z,{variant:"secondary",leftIcon:(0,s.jsx)(j.Z,{className:"w-4 h-4"}),children:"Download XML"})})]})}),(0,s.jsx)(y.u,{isOpen:ex,onClose:()=>!eh&&em(!1),title:"Excluir Notas Fiscais Selecionadas",size:"md",children:(0,s.jsx)("div",{className:"space-y-4",children:eh?(0,s.jsx)("div",{className:"py-8",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)(k.TK,{size:"lg"}),(0,s.jsxs)("p",{className:"text-white",children:["Excluindo... ",ep.current," de ",ep.total]}),ep.errors>0&&(0,s.jsxs)("p",{className:"text-yellow-400 text-sm",children:[ep.errors," erro",ep.errors>1?"s":""," (ser\xe3o ignorados)"]}),(0,s.jsx)("div",{className:"w-full bg-dark-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-primary-500 h-2 rounded-full transition-all",style:{width:"".concat(ep.current/ep.total*100,"%")}})})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:[(0,s.jsx)(N.Z,{className:"w-6 h-6 text-red-400 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-white font-medium",children:["Tem certeza que deseja excluir ",ed.size," nota",ed.size>1?"s":""," fiscal",ed.size>1?"is":"","?"]}),(0,s.jsx)("p",{className:"text-dark-400 text-sm mt-1",children:"Esta a\xe7\xe3o ir\xe1 reverter o estoque, remover lan\xe7amentos financeiros e contas a pagar vinculadas."})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(g.z,{variant:"secondary",onClick:()=>em(!1),children:"Cancelar"}),(0,s.jsxs)(g.z,{variant:"danger",onClick:eN,children:["Excluir ",ed.size," nota",ed.size>1?"s":""]})]})]})})}),(0,s.jsx)(y.u,{isOpen:es,onClose:()=>er(!1),title:"NF Sa\xedda ".concat((null==el?void 0:el.numero)||(null==el?void 0:null===(e=el.referencia)||void 0===e?void 0:e.slice(0,12))+"..."),size:"lg",children:el&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[eT(el.status),"autorizado"===el.status&&"homologacao"===el.ambiente&&(0,s.jsx)("span",{className:"text-xs text-yellow-400 bg-yellow-400/10 px-2 py-1 rounded",children:"HOMOLOGA\xc7\xc3O"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"N\xfamero/S\xe9rie"}),(0,s.jsxs)("p",{className:"text-white font-medium",children:[el.numero||"-"," / ",el.serie||"1"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Data Emiss\xe3o"}),(0,s.jsx)("p",{className:"text-white font-medium",children:el.emitida_em?(0,w.p6)(el.emitida_em.split("T")[0]):el.created_at?(0,w.p6)(el.created_at.split("T")[0]):"-"})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Cliente/Destinat\xe1rio"}),(0,s.jsx)("p",{className:"text-white font-medium",children:el.destinatario_nome||(null===(a=el.cliente)||void 0===a?void 0:a.nome)||(null===(t=el.cliente)||void 0===t?void 0:t.razao_social)||"Consumidor Final"}),(el.destinatario_documento||(null===(b=el.cliente)||void 0===b?void 0:b.cnpj)||(null===(z=el.cliente)||void 0===z?void 0:z.cpf))&&(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:el.destinatario_documento||(null===(C=el.cliente)||void 0===C?void 0:C.cnpj)||(null===(F=el.cliente)||void 0===F?void 0:F.cpf)})]}),el.chave_acesso&&(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Chave de Acesso"}),(0,s.jsx)("p",{className:"text-white font-mono text-sm break-all",children:el.chave_acesso})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Refer\xeancia"}),(0,s.jsx)("p",{className:"text-white font-mono text-sm",children:el.referencia})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-dark-600",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Produtos"}),(0,s.jsx)("p",{className:"text-white",children:(0,w.xG)(el.valor_produtos||0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Frete"}),(0,s.jsx)("p",{className:"text-white",children:(0,w.xG)(el.valor_frete||0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Desconto"}),(0,s.jsx)("p",{className:"text-red-400",children:(0,w.xG)(el.valor_desconto||0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Total"}),(0,s.jsx)("p",{className:"text-green-400 font-bold",children:(0,w.xG)(el.valor_total||0)})]})]}),el.mensagem_sefaz&&(0,s.jsxs)("div",{className:"pt-4 border-t border-dark-600",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Mensagem SEFAZ"}),(0,s.jsx)("p",{className:"text-white text-sm",children:el.mensagem_sefaz})]}),"cancelada"===el.status&&(0,s.jsxs)("div",{className:"pt-4 border-t border-dark-600 bg-red-500/10 p-3 rounded-lg",children:[(0,s.jsx)("p",{className:"text-red-400 font-medium",children:"Nota Cancelada"}),el.cancelada_em&&(0,s.jsxs)("p",{className:"text-dark-400 text-sm",children:["Data: ",(0,w.p6)(el.cancelada_em.split("T")[0])]}),el.cancelamento_justificativa&&(0,s.jsxs)("p",{className:"text-dark-300 text-sm mt-1",children:["Justificativa: ",el.cancelamento_justificativa]}),el.cancelamento_protocolo&&(0,s.jsxs)("p",{className:"text-dark-400 text-sm",children:["Protocolo: ",el.cancelamento_protocolo]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-600",children:["autorizado"===el.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.z,{variant:"secondary",leftIcon:(0,s.jsx)(o.Z,{className:"w-4 h-4"}),onClick:()=>eD(el),children:"DANFE"}),(0,s.jsx)(g.z,{variant:"secondary",leftIcon:(0,s.jsx)(j.Z,{className:"w-4 h-4"}),onClick:()=>eP(el),children:"XML"})]}),(0,s.jsx)(g.z,{variant:"secondary",onClick:()=>er(!1),children:"Fechar"})]})]})})]})}},70492:function(e,a,t){"use strict";t.d(a,{u:function(){return n}});var s=t(57437),r=t(82549),l=t(2265),i=t(22169);function n(e){let{isOpen:a,onClose:t,title:n,children:o,size:d="md"}=e;return((0,l.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a]),a)?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:t}),(0,s.jsxs)("div",{className:(0,i.cn)("relative w-full bg-dark-900 border border-dark-700 rounded-2xl shadow-2xl animate-slide-up",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[d]),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-700",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white",children:n}),(0,s.jsx)("button",{onClick:t,className:"p-2 rounded-xl text-dark-400 hover:text-white hover:bg-dark-800 transition-colors",children:(0,s.jsx)(r.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"px-6 py-6 max-h-[70vh] overflow-y-auto scrollbar-thin",children:o})]})]}):null}}},function(e){e.O(0,[149,985,900,971,938,744],function(){return e(e.s=62400)}),_N_E=e.O()}]);