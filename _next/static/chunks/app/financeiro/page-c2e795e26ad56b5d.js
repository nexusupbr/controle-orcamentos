(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{11981:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},72894:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},98253:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},13008:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6141:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},41298:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},76637:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},41310:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},94136:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},64280:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},92851:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},74522:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},85790:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},31541:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},34822:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])},38955:function(e,a,t){Promise.resolve().then(t.bind(t,96903))},96903:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return M}});var s=t(57437),r=t(2265),n=t(9883),l=t(98253),i=t(74522),c=t(85790),o=t(34822),d=t(72894),m=t(76637),x=t(41298),u=t(41827),h=t(64280),p=t(41310),j=t(31541),v=t(13008),g=t(62898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=(0,g.Z)("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);var f=t(94136),N=t(45367),_=t(6141);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let k=(0,g.Z)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);var y=t(11981),w=t(28203),C=t(66651),S=t(70492),Z=t(548),D=t(40971),E=t(87431),z=t(22169);function M(){let[e,a]=(0,r.useState)("pagar"),[t,g]=(0,r.useState)(!0),[M,T]=(0,r.useState)(!1),[I,F]=(0,r.useState)([]),[R,P]=(0,r.useState)([]),[O,V]=(0,r.useState)([]),[q,G]=(0,r.useState)([]),[A,B]=(0,r.useState)([]),[L,H]=(0,r.useState)([]),[X,Y]=(0,r.useState)([]),[J,U]=(0,r.useState)(""),[Q,W]=(0,r.useState)("todos"),[K,$]=(0,r.useState)("mes"),[ee,ea]=(0,r.useState)(null),[et,es]=(0,r.useState)(!1),[er,en]=(0,r.useState)(!1),[el,ei]=(0,r.useState)(!1),[ec,eo]=(0,r.useState)(!1),[ed,em]=(0,r.useState)(!1),[ex,eu]=(0,r.useState)(!1),[eh,ep]=(0,r.useState)(!1),[ej,ev]=(0,r.useState)(!1),[eg,eb]=(0,r.useState)(null),[ef,eN]=(0,r.useState)(null),[e_,ek]=(0,r.useState)(null),[ey,ew]=(0,r.useState)(null),[eC,eS]=(0,r.useState)(null),[eZ,eD]=(0,r.useState)({fornecedor_key:"",descricao:"",valor:0,data_vencimento:"",data_pagamento:"",categoria_id:null,conta_bancaria_id:null,forma_pagamento:"boleto",numero_documento:"",parcela_atual:1,total_parcelas:1,observacoes:"",recorrente:!1,meses_recorrentes:1,dia_vencimento:1}),[eE,ez]=(0,r.useState)({cliente_id:null,descricao:"",valor:0,data_vencimento:"",data_recebimento:"",categoria_id:null,conta_bancaria_id:null,forma_pagamento:"pix",numero_documento:"",parcela_atual:1,total_parcelas:1,observacoes:"",recorrente:!1,meses_recorrentes:1,dia_vencimento:1}),[eM,eT]=(0,r.useState)(null),[eI,eF]=(0,r.useState)({nome:"",banco:"",agencia:"",conta:"",tipo:"corrente",saldo_inicial:0}),[eR,eP]=(0,r.useState)({nome:"",tipo:"despesa",cor:"#3B82F6"}),[eO,eV]=(0,r.useState)([]),[eq,eG]=(0,r.useState)({}),[eA,eB]=(0,r.useState)(null),[eL,eH]=(0,r.useState)(!1),[eX,eY]=(0,r.useState)([]),[eJ,eU]=(0,r.useState)(!1),eQ=(0,r.useRef)({}),eW=(0,r.useRef)({}),eK=(0,r.useRef)(null),[e$,e0]=(0,r.useState)(!1),[e1,e2]=(0,r.useState)("pagar"),[e4,e5]=(0,r.useState)(null),[e3,e8]=(0,r.useState)(""),[e7,e6]=(0,r.useState)(!1),[e9,ae]=(0,r.useState)(null),[aa,at]=(0,r.useState)(!1);(0,r.useEffect)(()=>{as()},[]);let as=async()=>{try{g(!0);let[e,a,t,s,r,n,l]=await Promise.all([(0,E.CF)(),(0,E.Cd)(),(0,E.i1)(),(0,E.SJ)(),(0,E.e6)(),(0,E.Df)(),(0,E.H3)()]);F(e),P(a),V(t),G(s),B(r),Y(l);let i=l.filter(e=>"fornecedor"===e.tipo_cadastro||"ambos"===e.tipo_cadastro).map(e=>({id:e.id,razao_social:e.razao_social||e.nome_fantasia||e.nome||"Sem nome",cnpj:e.cnpj,_origem:"clientes"})),c=n.map(e=>({...e,_origem:"fornecedores"})),o=new Set((e||[]).map(e=>null==e?void 0:e.fornecedor_id).filter(e=>"number"==typeof e)),d=new Set(i.map(e=>e.cnpj).filter(Boolean)),m=c.filter(e=>!!o.has(e.id)||!e.cnpj||!d.has(e.cnpj)),x=[...i,...m].sort((e,a)=>(e.razao_social||"").localeCompare(a.razao_social||""));H(x)}catch(e){console.error("Erro ao carregar dados:",e)}finally{g(!1)}},ar=I.filter(e=>"pago"!==e.status).reduce((e,a)=>e+a.valor,0),an=R.filter(e=>"recebido"!==e.status).reduce((e,a)=>e+a.valor,0),al=O.reduce((e,a)=>e+a.saldo_atual,0),ai=I.filter(e=>"vencido"===e.status).length+R.filter(e=>"vencido"===e.status).length,ac=I.filter(e=>{var a;let t=null===(a=e.descricao)||void 0===a?void 0:a.toLowerCase().includes(J.toLowerCase()),s="todos"===Q||e.status===Q,r=!ee||e.conta_bancaria_id===ee;return t&&s&&r}),ao=R.filter(e=>{var a;let t=null===(a=e.descricao)||void 0===a?void 0:a.toLowerCase().includes(J.toLowerCase()),s="todos"===Q||e.status===Q,r=!ee||e.conta_bancaria_id===ee;return t&&s&&r}),ad=A.filter(e=>{var a;let t=null===(a=e.descricao)||void 0===a?void 0:a.toLowerCase().includes(J.toLowerCase()),s=!ee||e.conta_id===ee;return t&&s}),am=e=>{e?(ew(e),eD({fornecedor_key:e.fornecedor_id?"fornecedores:".concat(e.fornecedor_id):"",descricao:e.descricao,valor:e.valor,data_vencimento:e.data_vencimento,data_pagamento:e.data_pagamento||"",categoria_id:e.categoria_id,conta_bancaria_id:e.conta_bancaria_id,forma_pagamento:e.forma_pagamento||"boleto",numero_documento:e.numero_documento||"",parcela_atual:e.parcela_atual||1,total_parcelas:e.total_parcelas||1,observacoes:e.observacoes||"",recorrente:!1,meses_recorrentes:1,dia_vencimento:new Date(e.data_vencimento).getDate()||1})):(ew(null),eD({fornecedor_key:"",descricao:"",valor:0,data_vencimento:"",data_pagamento:"",categoria_id:null,conta_bancaria_id:null,forma_pagamento:"boleto",numero_documento:"",parcela_atual:1,total_parcelas:1,observacoes:"",recorrente:!1,meses_recorrentes:1,dia_vencimento:1})),es(!0)},ax=async e=>{if(!e)return null;let[a,t]=e.split(":"),s=Number(t);if(!a||!t||Number.isNaN(s))return null;if("fornecedores"===a)return s;if("clientes"===a){let e=X.find(e=>e.id===s);if(!e)throw Error("Cliente/fornecedor selecionado n\xe3o encontrado");let a=e.razao_social||e.nome_fantasia||e.nome||"Sem nome";if(e.cnpj){let a=await (0,E.GZ)(e.cnpj);if(null==a?void 0:a.id)return a.id}if(e.cpf){let a=await (0,E.Ol)(e.cpf);if(null==a?void 0:a.id)return a.id}return(await (0,E.gO)({razao_social:a,nome_fantasia:e.nome_fantasia,cnpj:e.cnpj,cpf:e.cpf,inscricao_estadual:e.inscricao_estadual,endereco:e.endereco,numero:e.numero,complemento:e.complemento,bairro:e.bairro,cidade:e.cidade,estado:e.estado,cep:e.cep,telefone:e.telefone||e.celular,email:e.email,observacoes:e.observacoes,ativo:!0})).id}return null},au=async e=>{e.preventDefault(),T(!0);try{let e=await ax(eZ.fornecedor_key);if(!ey&&eZ.recorrente&&eZ.meses_recorrentes>1){let a=new Date(eZ.data_vencimento);for(let t=0;t<eZ.meses_recorrentes;t++){let s=new Date(a);s.setMonth(s.getMonth()+t),s.setDate(Math.min(eZ.dia_vencimento,new Date(s.getFullYear(),s.getMonth()+1,0).getDate()));let r=s.toISOString().split("T")[0],n=s<new Date?"vencido":"pendente",l={fornecedor_id:e,descricao:eZ.descricao,valor:eZ.valor,data_vencimento:r,data_pagamento:null,categoria_id:eZ.categoria_id,conta_bancaria_id:eZ.conta_bancaria_id,forma_pagamento:eZ.forma_pagamento,numero_documento:eZ.numero_documento,parcela_atual:t+1,total_parcelas:eZ.meses_recorrentes,observacoes:eZ.observacoes?"".concat(eZ.observacoes," (Recorrente ").concat(t+1,"/").concat(eZ.meses_recorrentes,")"):"Recorrente ".concat(t+1,"/").concat(eZ.meses_recorrentes),status:n};await (0,E.NV)(l)}}else{let a=eZ.data_pagamento?"pago":new Date(eZ.data_vencimento)<new Date?"vencido":"pendente",t={fornecedor_id:e,descricao:eZ.descricao,valor:eZ.valor,data_vencimento:eZ.data_vencimento,data_pagamento:eZ.data_pagamento||null,categoria_id:eZ.categoria_id,conta_bancaria_id:eZ.conta_bancaria_id,forma_pagamento:eZ.forma_pagamento,numero_documento:eZ.numero_documento,parcela_atual:eZ.parcela_atual,total_parcelas:eZ.total_parcelas,observacoes:eZ.observacoes,status:a};ey?await (0,E.rO)(ey.id,t):await (0,E.NV)(t)}await as(),es(!1)}catch(a){console.error("Erro ao salvar:",a);let e=a instanceof Error?a.message:"Erro desconhecido";alert("Erro ao salvar conta: ".concat(e))}finally{T(!1)}},ah=async e=>{e2("pagar"),e5(e),e8(new Date().toISOString().split("T")[0]),e0(!0)},ap=async e=>{if(confirm("Deseja anular o pagamento desta conta? O status voltar\xe1 para pendente e o lan\xe7amento financeiro ser\xe1 removido."))try{await (0,E.sE)(e.id),await as()}catch(e){console.error("Erro ao anular pagamento:",e),alert("Erro ao anular pagamento: "+(e instanceof Error?e.message:"Erro desconhecido"))}},aj=async()=>{if(e4&&e3)try{T(!0),"pagar"===e1?(await (0,E.rO)(e4.id,{status:"pago",data_pagamento:e3}),e4.conta_bancaria_id&&await (0,E.ZH)({conta_id:e4.conta_bancaria_id,tipo:"despesa",valor:e4.valor,data_lancamento:e3,descricao:e4.descricao,categoria_id:e4.categoria_id,conciliado:!1})):(await (0,E.yY)(e4.id,{status:"recebido",data_recebimento:e3}),e4.conta_bancaria_id&&await (0,E.ZH)({conta_id:e4.conta_bancaria_id,tipo:"receita",valor:e4.valor,data_lancamento:e3,descricao:e4.descricao,categoria_id:e4.categoria_id,conciliado:!1})),e0(!1),e5(null),await as()}catch(e){console.error("Erro ao confirmar:",e),alert("Erro: "+(e instanceof Error?e.message:"Erro desconhecido"))}finally{T(!1)}},av=async e=>{if(confirm("Tem certeza que deseja excluir esta conta?"))try{await (0,E.aP)(e),await as()}catch(e){console.error("Erro ao excluir:",e)}},ag=e=>{e?(eS(e),ez({cliente_id:e.cliente_id,descricao:e.descricao,valor:e.valor,data_vencimento:e.data_vencimento,data_recebimento:e.data_recebimento||"",categoria_id:e.categoria_id,conta_bancaria_id:e.conta_bancaria_id,forma_pagamento:e.forma_pagamento||"pix",numero_documento:e.numero_documento||"",parcela_atual:e.parcela_atual||1,total_parcelas:e.total_parcelas||1,observacoes:e.observacoes||"",recorrente:!1,meses_recorrentes:1,dia_vencimento:new Date(e.data_vencimento).getDate()||1})):(eS(null),ez({cliente_id:null,descricao:"",valor:0,data_vencimento:"",data_recebimento:"",categoria_id:null,conta_bancaria_id:null,forma_pagamento:"pix",numero_documento:"",parcela_atual:1,total_parcelas:1,observacoes:"",recorrente:!1,meses_recorrentes:1,dia_vencimento:1})),en(!0)},ab=async e=>{e.preventDefault(),T(!0);try{if(!eC&&eE.recorrente&&eE.meses_recorrentes>1){let e=new Date(eE.data_vencimento);for(let a=0;a<eE.meses_recorrentes;a++){let t=new Date(e);t.setMonth(t.getMonth()+a),t.setDate(Math.min(eE.dia_vencimento,new Date(t.getFullYear(),t.getMonth()+1,0).getDate()));let s=t.toISOString().split("T")[0],r=t<new Date?"vencido":"pendente",n={cliente_id:eE.cliente_id,descricao:eE.descricao,valor:eE.valor,data_vencimento:s,data_recebimento:null,categoria_id:eE.categoria_id,conta_bancaria_id:eE.conta_bancaria_id,forma_pagamento:eE.forma_pagamento,numero_documento:eE.numero_documento,parcela_atual:a+1,total_parcelas:eE.meses_recorrentes,observacoes:eE.observacoes?"".concat(eE.observacoes," (Recorrente ").concat(a+1,"/").concat(eE.meses_recorrentes,")"):"Recorrente ".concat(a+1,"/").concat(eE.meses_recorrentes),status:r};await (0,E.te)(n)}}else{let e=eE.data_recebimento?"recebido":new Date(eE.data_vencimento)<new Date?"vencido":"pendente",a={cliente_id:eE.cliente_id,descricao:eE.descricao,valor:eE.valor,data_vencimento:eE.data_vencimento,data_recebimento:eE.data_recebimento||null,categoria_id:eE.categoria_id,conta_bancaria_id:eE.conta_bancaria_id,forma_pagamento:eE.forma_pagamento,numero_documento:eE.numero_documento,parcela_atual:eE.parcela_atual,total_parcelas:eE.total_parcelas,observacoes:eE.observacoes,status:e};eC?await (0,E.yY)(eC.id,a):await (0,E.te)(a)}await as(),en(!1)}catch(e){console.error("Erro ao salvar:",e),alert("Erro ao salvar conta")}finally{T(!1)}},af=async e=>{e2("receber"),e5(e),e8(new Date().toISOString().split("T")[0]),e0(!0)},aN=async e=>{if(confirm("Deseja anular o recebimento desta conta? O status voltar\xe1 para pendente e o lan\xe7amento financeiro ser\xe1 removido."))try{await (0,E.A6)(e.id),await as()}catch(e){console.error("Erro ao anular recebimento:",e),alert("Erro ao anular recebimento: "+(e instanceof Error?e.message:"Erro desconhecido"))}},a_=async()=>{at(!0),ae(null);try{let e=await (0,E.G_)("pagar",ee||void 0),a=await (0,E.G_)("receber",ee||void 0),t={totalContas:e.totalContas+a.totalContas,conciliadas:e.conciliadas+a.conciliadas,jaConciliadas:e.jaConciliadas+a.jaConciliadas,semCorrespondencia:e.semCorrespondencia+a.semCorrespondencia,detalhes:[...e.detalhes,...a.detalhes]};ae(t),e6(!0),await as()}catch(e){console.error("Erro ao sincronizar:",e),alert("Erro ao sincronizar: "+(e instanceof Error?e.message:"Erro desconhecido"))}finally{at(!1)}},ak=async e=>{if(confirm("Tem certeza que deseja excluir esta conta?"))try{await (0,E.Y8)(e),await as()}catch(e){console.error("Erro ao excluir:",e)}},ay=e=>{e?(eT(e),eF({nome:e.nome,banco:e.banco||"",agencia:e.agencia||"",conta:e.conta||"",tipo:e.tipo,saldo_inicial:e.saldo_inicial})):(eT(null),eF({nome:"",banco:"",agencia:"",conta:"",tipo:"corrente",saldo_inicial:0})),ei(!0)},aw=async e=>{e.preventDefault(),T(!0);try{let e=eI.tipo;eM?await (0,E.gI)(eM.id,{nome:eI.nome,banco:eI.banco,agencia:eI.agencia,conta:eI.conta,tipo:e}):await (0,E.UP)({nome:eI.nome,banco:eI.banco,agencia:eI.agencia,conta:eI.conta,tipo:e,saldo_inicial:eI.saldo_inicial,saldo_atual:eI.saldo_inicial,ativo:!0}),await as(),ei(!1),eT(null),eF({nome:"",banco:"",agencia:"",conta:"",tipo:"corrente",saldo_inicial:0})}catch(e){console.error("Erro ao salvar:",e)}finally{T(!1)}},aC=async e=>{e.preventDefault(),T(!0);try{await (0,E.ZF)(eR),await as(),em(!1),eP({nome:"",tipo:"despesa",cor:"#3B82F6"})}catch(e){console.error("Erro ao salvar:",e)}finally{T(!1)}},aS=async e=>{var a,t,s,r,n,l;let i=null===(a=e.target.files)||void 0===a?void 0:a[0];if(i){eB(null);try{let e=await i.text(),a=[],c=e.match(/<STMTTRN>([\s\S]*?)<\/STMTTRN>/g)||[],o=new Set;for(let e of c){let i=null===(t=e.match(/<TRNTYPE>([^<\s]+)/))||void 0===t?void 0:t[1],c=null===(s=e.match(/<DTPOSTED>(\d+)/))||void 0===s?void 0:s[1],d=null===(r=e.match(/<TRNAMT>([\d.-]+)/))||void 0===r?void 0:r[1],m=null===(n=e.match(/<FITID>([^<\s]+)/))||void 0===n?void 0:n[1],x=null===(l=e.match(/<MEMO>([^<]+)/))||void 0===l?void 0:l[1];if(c&&d&&m){let e=m.replace(/[<>\/]/g,"").trim();if(o.has(e))continue;o.add(e);let t=await (0,E.jk)(e);a.push({id:e,tipo:Number(d)>=0?"entrada":"saida",valor:Math.abs(Number(d)),data:"".concat(c.slice(0,4),"-").concat(c.slice(4,6),"-").concat(c.slice(6,8)),descricao:x||i,duplicado:t,metodoDuplicacao:t?"fitid":null})}}eV(a),eo(!0)}catch(e){console.error("Erro ao processar OFX:",e),alert("Erro ao processar arquivo OFX")}}},aZ=async()=>{if(eH(!0),eB(null),!ee){eU(!0),setTimeout(()=>{var e,a;null===(e=eK.current)||void 0===e||e.focus(),null===(a=eK.current)||void 0===a||a.scrollIntoView({behavior:"smooth",block:"center"})},100);return}eU(!1);let e=eO.filter(e=>!e.duplicado),a=e.filter(e=>!eq[e.id]);if(a.length>0){let e=a.map(e=>e.id);eY(e),setTimeout(()=>{let a=e[0],t=eQ.current[a],s=eW.current[a];t&&t.scrollIntoView({behavior:"smooth",block:"center"}),s&&setTimeout(()=>s.focus(),300)},100);return}T(!0);let t={importados:0,duplicadosFitid:0,duplicadosFingerprint:0,erros:0,detalhes:[]};try{for(let a of e){let e=eq[a.id];if(!e){t.erros++,t.detalhes.push({descricao:a.descricao,status:"erro",mensagem:"Categoria n\xe3o definida"});continue}let s=await (0,E.T6)({fitid:a.id,contaId:ee,data:a.data,valor:a.valor,descricao:a.descricao});if(s.duplicado){"fitid"===s.metodo?(t.duplicadosFitid++,t.detalhes.push({descricao:a.descricao,status:"duplicado_fitid",mensagem:"J\xe1 existe (FITID: ".concat(a.id,")")})):(t.duplicadosFingerprint++,t.detalhes.push({descricao:a.descricao,status:"duplicado_fingerprint",mensagem:"Transa\xe7\xe3o similar j\xe1 existe"}));continue}try{await (0,E.ZH)({conta_id:ee,tipo:"entrada"===a.tipo?"receita":"despesa",valor:a.valor,data_lancamento:a.data,descricao:a.descricao,categoria_id:e,ofx_fitid:a.id,ofx_data_importacao:new Date().toISOString(),conciliado:!1,com_nota_fiscal:!1}),t.importados++,t.detalhes.push({descricao:a.descricao,status:"importado"})}catch(e){console.error("Erro ao inserir lan\xe7amento:",e),t.erros++,t.detalhes.push({descricao:a.descricao,status:"erro",mensagem:e instanceof Error?e.message:"Erro desconhecido"})}}eB(t),await as(),0===t.erros&&setTimeout(()=>{eo(!1),eV([]),eG({}),eH(!1),eY([]),eB(null)},3e3)}catch(e){console.error("Erro ao importar:",e),alert("Erro ao importar lan\xe7amentos: "+(e instanceof Error?e.message:"Erro desconhecido"))}finally{T(!1)}},aD=(e,a)=>{eG(t=>({...t,[e]:a})),eX.includes(e)&&eY(a=>a.filter(a=>a!==e))},aE=(()=>{let e=new Date,a=new Date(e.getFullYear(),e.getMonth(),1),t=A.filter(e=>("receita"===e.tipo||"entrada"===e.tipo)&&new Date(e.data||e.data_lancamento)>=a).reduce((e,a)=>e+a.valor,0),s=A.filter(e=>("despesa"===e.tipo||"saida"===e.tipo)&&new Date(e.data||e.data_lancamento)>=a).reduce((e,a)=>e+a.valor,0);return{receitas:t,despesas:s,lucro:t-s,despesasPorCategoria:q.filter(e=>"despesa"===e.tipo).map(e=>({categoria:e.nome,valor:A.filter(t=>("despesa"===t.tipo||"saida"===t.tipo)&&t.categoria_id===e.id&&new Date(t.data||t.data_lancamento)>=a).reduce((e,a)=>e+a.valor,0)})).filter(e=>e.valor>0)}})();return t?(0,s.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,s.jsx)(Z.TK,{size:"lg"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold font-heading text-white",children:"Financeiro"}),(0,s.jsx)("p",{className:"text-dark-400 mt-1",children:"Gerencie contas a pagar, receber e extrato banc\xe1rio"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(C.z,{variant:"secondary",onClick:()=>em(!0),leftIcon:(0,s.jsx)(n.Z,{className:"w-4 h-4"}),children:"Categoria"}),(0,s.jsx)(C.z,{variant:"secondary",onClick:()=>ay(),leftIcon:(0,s.jsx)(l.Z,{className:"w-4 h-4"}),children:"Conta Banc\xe1ria"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-red-500/20 flex items-center justify-center",children:(0,s.jsx)(i.Z,{className:"w-5 h-5 text-red-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"A Pagar"}),(0,s.jsx)("p",{className:"text-xl font-bold text-red-400",children:(0,z.xG)(ar)})]})]})}),(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center",children:(0,s.jsx)(c.Z,{className:"w-5 h-5 text-green-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"A Receber"}),(0,s.jsx)("p",{className:"text-xl font-bold text-green-400",children:(0,z.xG)(an)})]})]})}),(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary-500/20 flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"w-5 h-5 text-primary-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Saldo em Conta"}),(0,s.jsx)("p",{className:"text-xl font-bold text-white",children:(0,z.xG)(al)})]})]})}),(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center",children:(0,s.jsx)(d.Z,{className:"w-5 h-5 text-yellow-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Vencidos"}),(0,s.jsx)("p",{className:"text-xl font-bold text-yellow-400",children:ai})]})]})})]}),(0,s.jsx)("div",{className:"flex gap-2 border-b border-dark-700 pb-4 overflow-x-auto",children:[{id:"pagar",label:"Contas a Pagar",icon:i.Z},{id:"receber",label:"Contas a Receber",icon:c.Z},{id:"extrato",label:"Extrato",icon:m.Z},{id:"contas",label:"Contas Banc\xe1rias",icon:l.Z},{id:"dre",label:"DRE",icon:x.Z}].map(t=>(0,s.jsxs)("button",{onClick:()=>a(t.id),className:"px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors flex items-center gap-2 ".concat(e===t.id?"bg-primary-500 text-white":"bg-dark-700 text-dark-300 hover:bg-dark-600"),children:[(0,s.jsx)(t.icon,{className:"w-4 h-4"}),t.label]},t.id))}),("pagar"===e||"receber"===e||"extrato"===e)&&(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{className:"relative md:col-span-2",children:[(0,s.jsx)(u.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar...",value:J,onChange:e=>U(e.target.value),className:"input pl-12 w-full"})]}),(0,s.jsxs)("select",{value:ee||"",onChange:e=>ea(e.target.value?Number(e.target.value):null),className:"input",children:[(0,s.jsx)("option",{value:"",children:"Todas as contas"}),O.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]}),("pagar"===e||"receber"===e)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("select",{value:Q,onChange:e=>W(e.target.value),className:"input",children:[(0,s.jsx)("option",{value:"todos",children:"Todos os status"}),(0,s.jsx)("option",{value:"pendente",children:"Pendente"}),(0,s.jsx)("option",{value:"vencido",children:"Vencido"}),(0,s.jsx)("option",{value:"pagar"===e?"pago":"recebido",children:"pagar"===e?"Pago":"Recebido"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(C.z,{onClick:()=>"pagar"===e?am():ag(),leftIcon:(0,s.jsx)(n.Z,{className:"w-4 h-4"}),children:"pagar"===e?"Nova Conta a Pagar":"Nova Conta a Receber"}),(0,s.jsx)(C.z,{variant:"secondary",onClick:a_,leftIcon:aa?(0,s.jsx)(h.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(p.Z,{className:"w-4 h-4"}),disabled:aa,title:"Sincronizar boletos com entradas no extrato banc\xe1rio para evitar duplicatas",children:aa?"Sincronizando...":"Sincronizar"})]})]}),"extrato"===e&&(0,s.jsxs)("div",{className:"relative md:col-span-2",children:[(0,s.jsx)("input",{type:"file",accept:".ofx",onChange:aS,className:"hidden",id:"ofx-upload"}),(0,s.jsx)("label",{htmlFor:"ofx-upload",className:"cursor-pointer",children:(0,s.jsxs)("span",{className:"btn btn-secondary flex items-center gap-2 w-full justify-center",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4"}),"Importar OFX"]})})]})]})}),"pagar"===e&&(0,s.jsx)("div",{className:"glass-card overflow-hidden",children:ac.length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Descri\xe7\xe3o"}),(0,s.jsx)("th",{children:"Fornecedor"}),(0,s.jsx)("th",{children:"Vencimento"}),(0,s.jsx)("th",{className:"text-right",children:"Valor"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{className:"text-right",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{children:ac.map(e=>{var a,t;return(0,s.jsxs)("tr",{className:"group",children:[(0,s.jsx)("td",{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-white",children:e.descricao}),(null!==(t=e.total_parcelas)&&void 0!==t?t:0)>1&&(0,s.jsxs)("span",{className:"text-xs text-dark-400 ml-2",children:["(",e.parcela_atual,"/",e.total_parcelas,")"]})]})}),(0,s.jsx)("td",{className:"text-dark-300",children:e.fornecedor_id?(0,s.jsx)("button",{onClick:()=>{eN(e.fornecedor_id),ep(!0)},className:"text-primary-400 hover:text-primary-300 transition-colors",children:(null===(a=L.find(a=>a.id===e.fornecedor_id))||void 0===a?void 0:a.razao_social)||"Ver Fornecedor"}):"-"}),(0,s.jsx)("td",{className:"text-dark-300",children:(0,z.p6)(e.data_vencimento)}),(0,s.jsx)("td",{className:"text-right font-medium text-white",children:(0,z.xG)(e.valor)}),(0,s.jsx)("td",{children:(0,s.jsx)(Z.Ct,{variant:"pago"===e.status?"success":"vencido"===e.status?"danger":"warning",children:"pago"===e.status?"Pago":"vencido"===e.status?"Vencido":"Pendente"})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["pago"!==e.status&&(0,s.jsx)("button",{onClick:()=>ah(e),className:"p-2 rounded-lg text-dark-400 hover:text-green-400 hover:bg-green-500/10 transition-colors",title:"Confirmar Pagamento",children:(0,s.jsx)(v.Z,{className:"w-4 h-4"})}),"pago"===e.status&&(0,s.jsx)("button",{onClick:()=>ap(e),className:"p-2 rounded-lg text-dark-400 hover:text-orange-400 hover:bg-orange-500/10 transition-colors",title:"Anular Pagamento",children:(0,s.jsx)(b,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>am(e),className:"p-2 rounded-lg text-dark-400 hover:text-primary-400 hover:bg-primary-500/10 transition-colors",title:"Editar",children:(0,s.jsx)(f.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>av(e.id),className:"p-2 rounded-lg text-dark-400 hover:text-red-400 hover:bg-red-500/10 transition-colors",title:"Excluir",children:(0,s.jsx)(N.Z,{className:"w-4 h-4"})})]})})]},e.id)})})]})}):(0,s.jsx)(Z.ub,{icon:(0,s.jsx)(i.Z,{className:"w-10 h-10 text-dark-500"}),title:"Nenhuma conta a pagar",description:"Cadastre contas a pagar para controlar suas despesas",action:(0,s.jsx)(C.z,{onClick:()=>am(),leftIcon:(0,s.jsx)(n.Z,{className:"w-4 h-4"}),children:"Nova Conta"})})}),"receber"===e&&(0,s.jsx)("div",{className:"glass-card overflow-hidden",children:ao.length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Descri\xe7\xe3o"}),(0,s.jsx)("th",{children:"Cliente"}),(0,s.jsx)("th",{children:"Vencimento"}),(0,s.jsx)("th",{className:"text-right",children:"Valor"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{className:"text-right",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{children:ao.map(e=>{var a,t,r;return(0,s.jsxs)("tr",{className:"group",children:[(0,s.jsx)("td",{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-white",children:e.descricao}),(null!==(r=e.total_parcelas)&&void 0!==r?r:0)>1&&(0,s.jsxs)("span",{className:"text-xs text-dark-400 ml-2",children:["(",e.parcela_atual,"/",e.total_parcelas,")"]})]})}),(0,s.jsx)("td",{className:"text-dark-300",children:e.cliente_id?(0,s.jsx)("button",{onClick:()=>{eb(e.cliente_id),eu(!0)},className:"text-primary-400 hover:text-primary-300 transition-colors",children:(null===(a=X.find(a=>a.id===e.cliente_id))||void 0===a?void 0:a.nome)||(null===(t=X.find(a=>a.id===e.cliente_id))||void 0===t?void 0:t.razao_social)||"Ver Cliente"}):"-"}),(0,s.jsx)("td",{className:"text-dark-300",children:(0,z.p6)(e.data_vencimento)}),(0,s.jsx)("td",{className:"text-right font-medium text-white",children:(0,z.xG)(e.valor)}),(0,s.jsx)("td",{children:(0,s.jsx)(Z.Ct,{variant:"recebido"===e.status?"success":"vencido"===e.status?"danger":"warning",children:"recebido"===e.status?"Recebido":"vencido"===e.status?"Vencido":"Pendente"})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["recebido"!==e.status&&(0,s.jsx)("button",{onClick:()=>af(e),className:"p-2 rounded-lg text-dark-400 hover:text-green-400 hover:bg-green-500/10 transition-colors",title:"Confirmar Recebimento",children:(0,s.jsx)(v.Z,{className:"w-4 h-4"})}),"recebido"===e.status&&(0,s.jsx)("button",{onClick:()=>aN(e),className:"p-2 rounded-lg text-dark-400 hover:text-orange-400 hover:bg-orange-500/10 transition-colors",title:"Anular Recebimento",children:(0,s.jsx)(b,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>ag(e),className:"p-2 rounded-lg text-dark-400 hover:text-primary-400 hover:bg-primary-500/10 transition-colors",title:"Editar",children:(0,s.jsx)(f.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>ak(e.id),className:"p-2 rounded-lg text-dark-400 hover:text-red-400 hover:bg-red-500/10 transition-colors",title:"Excluir",children:(0,s.jsx)(N.Z,{className:"w-4 h-4"})})]})})]},e.id)})})]})}):(0,s.jsx)(Z.ub,{icon:(0,s.jsx)(c.Z,{className:"w-10 h-10 text-dark-500"}),title:"Nenhuma conta a receber",description:"Cadastre contas a receber para controlar suas receitas",action:(0,s.jsx)(C.z,{onClick:()=>ag(),leftIcon:(0,s.jsx)(n.Z,{className:"w-4 h-4"}),children:"Nova Conta"})})}),"extrato"===e&&(0,s.jsx)("div",{className:"glass-card overflow-hidden",children:ad.length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Data"}),(0,s.jsx)("th",{children:"Descri\xe7\xe3o"}),(0,s.jsx)("th",{children:"Conta"}),(0,s.jsx)("th",{children:"Categoria"}),(0,s.jsx)("th",{className:"text-right",children:"Entrada"}),(0,s.jsx)("th",{className:"text-right",children:"Sa\xedda"}),(0,s.jsx)("th",{children:"Conciliado"})]})}),(0,s.jsx)("tbody",{children:ad.map(e=>{var a,t;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"text-dark-300",children:(0,z.p6)(e.data||e.data_lancamento)}),(0,s.jsx)("td",{className:"font-medium text-white",children:e.descricao}),(0,s.jsx)("td",{className:"text-dark-300",children:null===(a=O.find(a=>a.id===(e.conta_bancaria_id||e.conta_id)))||void 0===a?void 0:a.nome}),(0,s.jsx)("td",{className:"text-dark-300",children:(null===(t=q.find(a=>a.id===e.categoria_id))||void 0===t?void 0:t.nome)||"-"}),(0,s.jsx)("td",{className:"text-right text-green-400",children:"entrada"===e.tipo||"receita"===e.tipo?(0,z.xG)(e.valor):"-"}),(0,s.jsx)("td",{className:"text-right text-red-400",children:"saida"===e.tipo||"despesa"===e.tipo?(0,z.xG)(e.valor):"-"}),(0,s.jsx)("td",{children:e.conciliado?(0,s.jsx)(v.Z,{className:"w-4 h-4 text-green-400"}):(0,s.jsx)(_.Z,{className:"w-4 h-4 text-dark-500"})})]},e.id)})})]})}):(0,s.jsx)(Z.ub,{icon:(0,s.jsx)(m.Z,{className:"w-10 h-10 text-dark-500"}),title:"Nenhum lan\xe7amento",description:"Importe um arquivo OFX ou fa\xe7a pagamentos/recebimentos"})}),"contas"===e&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[O.map(e=>(0,s.jsxs)("div",{className:"glass-card p-6 relative group",children:[(0,s.jsx)("button",{onClick:()=>ay(e),className:"absolute top-4 right-4 p-2 rounded-lg text-dark-400 hover:text-primary-400 hover:bg-primary-500/10 transition-colors opacity-0 group-hover:opacity-100",title:"Editar conta",children:(0,s.jsx)(f.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-primary-500/20 flex items-center justify-center",children:(0,s.jsx)(l.Z,{className:"w-6 h-6 text-primary-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-white",children:e.nome}),(0,s.jsx)("p",{className:"text-sm text-dark-400",children:e.banco})]})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-dark-400",children:"Ag\xeancia:"}),(0,s.jsx)("span",{className:"text-white",children:e.agencia})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-dark-400",children:"Conta:"}),(0,s.jsx)("span",{className:"text-white",children:e.conta})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-dark-400",children:"Tipo:"}),(0,s.jsx)("span",{className:"text-white capitalize",children:e.tipo})]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-dark-700",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Saldo Atual"}),(0,s.jsx)("p",{className:"text-2xl font-bold ".concat(e.saldo_atual>=0?"text-green-400":"text-red-400"),children:(0,z.xG)(e.saldo_atual)})]})]},e.id)),0===O.length&&(0,s.jsx)("div",{className:"col-span-full",children:(0,s.jsx)(Z.ub,{icon:(0,s.jsx)(l.Z,{className:"w-10 h-10 text-dark-500"}),title:"Nenhuma conta banc\xe1ria",description:"Cadastre suas contas banc\xe1rias para gerenciar o fluxo de caixa",action:(0,s.jsx)(C.z,{onClick:()=>ay(),leftIcon:(0,s.jsx)(n.Z,{className:"w-4 h-4"}),children:"Nova Conta"})})})]}),"dre"===e&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm mb-2",children:"Receitas do M\xeas"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-400",children:(0,z.xG)(aE.receitas)})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm mb-2",children:"Despesas do M\xeas"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-red-400",children:(0,z.xG)(aE.despesas)})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm mb-2",children:"Resultado"}),(0,s.jsx)("p",{className:"text-3xl font-bold ".concat(aE.lucro>=0?"text-green-400":"text-red-400"),children:(0,z.xG)(aE.lucro)})]})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Despesas por Categoria"}),(0,s.jsxs)("div",{className:"space-y-3",children:[aE.despesasPorCategoria.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-dark-300",children:e.categoria}),(0,s.jsx)("span",{className:"font-medium text-white",children:(0,z.xG)(e.valor)})]},a)),0===aE.despesasPorCategoria.length&&(0,s.jsx)("p",{className:"text-dark-400 text-center py-4",children:"Nenhuma despesa no per\xedodo"})]})]})]}),(0,s.jsx)(S.u,{isOpen:et,onClose:()=>es(!1),title:ey?"Editar Conta a Pagar":"Nova Conta a Pagar",size:"lg",children:(0,s.jsxs)("form",{onSubmit:au,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Descri\xe7\xe3o *"}),(0,s.jsx)("input",{type:"text",value:eZ.descricao,onChange:e=>eD({...eZ,descricao:e.target.value}),className:"input w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Fornecedor"}),(0,s.jsxs)("select",{value:eZ.fornecedor_key,onChange:e=>eD({...eZ,fornecedor_key:e.target.value}),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),L.map(e=>(0,s.jsxs)("option",{value:"".concat(e._origem,":").concat(e.id),children:[e.razao_social,"clientes"===e._origem?" (Clientes)":""]},"".concat(e._origem,":").concat(e.id)))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Categoria"}),(0,s.jsxs)("select",{value:eZ.categoria_id||"",onChange:e=>eD({...eZ,categoria_id:e.target.value?Number(e.target.value):null}),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),q.filter(e=>"despesa"===e.tipo).map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Valor *"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:eZ.valor,onChange:e=>eD({...eZ,valor:Number(e.target.value)}),className:"input w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Vencimento *"}),(0,s.jsx)("input",{type:"date",value:eZ.data_vencimento,onChange:e=>eD({...eZ,data_vencimento:e.target.value}),className:"input w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Conta Banc\xe1ria"}),(0,s.jsxs)("select",{value:eZ.conta_bancaria_id||"",onChange:e=>eD({...eZ,conta_bancaria_id:e.target.value?Number(e.target.value):null}),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),O.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Forma de Pagamento"}),(0,s.jsxs)("select",{value:eZ.forma_pagamento,onChange:e=>eD({...eZ,forma_pagamento:e.target.value}),className:"input w-full",children:[(0,s.jsx)("option",{value:"boleto",children:"Boleto"}),(0,s.jsx)("option",{value:"pix",children:"PIX"}),(0,s.jsx)("option",{value:"ted",children:"TED"}),(0,s.jsx)("option",{value:"debito",children:"D\xe9bito"}),(0,s.jsx)("option",{value:"dinheiro",children:"Dinheiro"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"N\xba Documento"}),(0,s.jsx)("input",{type:"text",value:eZ.numero_documento,onChange:e=>eD({...eZ,numero_documento:e.target.value}),className:"input w-full"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Parcela"}),(0,s.jsx)("input",{type:"number",min:"1",value:eZ.parcela_atual,onChange:e=>eD({...eZ,parcela_atual:Number(e.target.value)}),className:"input w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"de"}),(0,s.jsx)("input",{type:"number",min:"1",value:eZ.total_parcelas,onChange:e=>eD({...eZ,total_parcelas:Number(e.target.value)}),className:"input w-full"})]})]}),!ey&&(0,s.jsxs)("div",{className:"md:col-span-2 p-4 rounded-lg bg-dark-800/50 border border-dark-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("input",{type:"checkbox",id:"recorrente-pagar",checked:eZ.recorrente,onChange:e=>eD({...eZ,recorrente:e.target.checked}),className:"w-4 h-4 rounded border-dark-600 bg-dark-800 text-primary-500 focus:ring-primary-500"}),(0,s.jsxs)("label",{htmlFor:"recorrente-pagar",className:"flex items-center gap-2 text-sm text-white cursor-pointer",children:[(0,s.jsx)(k,{className:"w-4 h-4 text-primary-400"}),"Conta Recorrente (gerar m\xfaltiplos meses)"]})]}),eZ.recorrente&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Quantidade de Meses"}),(0,s.jsx)("input",{type:"number",min:"2",max:"24",value:eZ.meses_recorrentes,onChange:e=>eD({...eZ,meses_recorrentes:Number(e.target.value)}),className:"input w-full"}),(0,s.jsx)("p",{className:"text-xs text-dark-400 mt-1",children:"Ex: 4 para gerar 4 contas mensais"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Dia do Vencimento"}),(0,s.jsx)("input",{type:"number",min:"1",max:"31",value:eZ.dia_vencimento,onChange:e=>eD({...eZ,dia_vencimento:Number(e.target.value)}),className:"input w-full"}),(0,s.jsx)("p",{className:"text-xs text-dark-400 mt-1",children:"Dia fixo de vencimento em cada m\xeas"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-700",children:[(0,s.jsx)(C.z,{type:"button",variant:"secondary",onClick:()=>es(!1),children:"Cancelar"}),(0,s.jsx)(C.z,{type:"submit",disabled:M,children:M?"Salvando...":eZ.recorrente&&eZ.meses_recorrentes>1?"Criar ".concat(eZ.meses_recorrentes," Contas"):"Salvar"})]})]})}),(0,s.jsx)(S.u,{isOpen:er,onClose:()=>en(!1),title:eC?"Editar Conta a Receber":"Nova Conta a Receber",size:"lg",children:(0,s.jsxs)("form",{onSubmit:ab,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Descri\xe7\xe3o *"}),(0,s.jsx)("input",{type:"text",value:eE.descricao,onChange:e=>ez({...eE,descricao:e.target.value}),className:"input w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Cliente"}),(0,s.jsxs)("select",{value:eE.cliente_id||"",onChange:e=>ez({...eE,cliente_id:e.target.value?Number(e.target.value):null}),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),X.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome||e.razao_social},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Categoria"}),(0,s.jsxs)("select",{value:eE.categoria_id||"",onChange:e=>ez({...eE,categoria_id:e.target.value?Number(e.target.value):null}),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),q.filter(e=>"receita"===e.tipo).map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Valor *"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:eE.valor,onChange:e=>ez({...eE,valor:Number(e.target.value)}),className:"input w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Vencimento *"}),(0,s.jsx)("input",{type:"date",value:eE.data_vencimento,onChange:e=>ez({...eE,data_vencimento:e.target.value}),className:"input w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Conta Banc\xe1ria"}),(0,s.jsxs)("select",{value:eE.conta_bancaria_id||"",onChange:e=>ez({...eE,conta_bancaria_id:e.target.value?Number(e.target.value):null}),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),O.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Forma de Recebimento"}),(0,s.jsxs)("select",{value:eE.forma_pagamento,onChange:e=>ez({...eE,forma_pagamento:e.target.value}),className:"input w-full",children:[(0,s.jsx)("option",{value:"pix",children:"PIX"}),(0,s.jsx)("option",{value:"boleto",children:"Boleto"}),(0,s.jsx)("option",{value:"ted",children:"TED"}),(0,s.jsx)("option",{value:"credito",children:"Cart\xe3o Cr\xe9dito"}),(0,s.jsx)("option",{value:"debito",children:"Cart\xe3o D\xe9bito"}),(0,s.jsx)("option",{value:"dinheiro",children:"Dinheiro"})]})]}),!eC&&(0,s.jsxs)("div",{className:"md:col-span-2 p-4 rounded-lg bg-dark-800/50 border border-dark-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("input",{type:"checkbox",id:"recorrente-receber",checked:eE.recorrente,onChange:e=>ez({...eE,recorrente:e.target.checked}),className:"w-4 h-4 rounded border-dark-600 bg-dark-800 text-primary-500 focus:ring-primary-500"}),(0,s.jsxs)("label",{htmlFor:"recorrente-receber",className:"flex items-center gap-2 text-sm text-white cursor-pointer",children:[(0,s.jsx)(k,{className:"w-4 h-4 text-green-400"}),"Recebimento Recorrente (gerar m\xfaltiplos meses)"]})]}),eE.recorrente&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Quantidade de Meses"}),(0,s.jsx)("input",{type:"number",min:"2",max:"24",value:eE.meses_recorrentes,onChange:e=>ez({...eE,meses_recorrentes:Number(e.target.value)}),className:"input w-full"}),(0,s.jsx)("p",{className:"text-xs text-dark-400 mt-1",children:"Ex: 3 para gerar 3 recebimentos mensais"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Dia do Vencimento"}),(0,s.jsx)("input",{type:"number",min:"1",max:"31",value:eE.dia_vencimento,onChange:e=>ez({...eE,dia_vencimento:Number(e.target.value)}),className:"input w-full"}),(0,s.jsx)("p",{className:"text-xs text-dark-400 mt-1",children:"Dia fixo de vencimento em cada m\xeas"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-700",children:[(0,s.jsx)(C.z,{type:"button",variant:"secondary",onClick:()=>en(!1),children:"Cancelar"}),(0,s.jsx)(C.z,{type:"submit",disabled:M,children:M?"Salvando...":eE.recorrente&&eE.meses_recorrentes>1?"Criar ".concat(eE.meses_recorrentes," Recebimentos"):"Salvar"})]})]})}),(0,s.jsx)(S.u,{isOpen:el,onClose:()=>{ei(!1),eT(null),eF({nome:"",banco:"",agencia:"",conta:"",tipo:"corrente",saldo_inicial:0})},title:eM?"Editar Conta Banc\xe1ria":"Nova Conta Banc\xe1ria",children:(0,s.jsxs)("form",{onSubmit:aw,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Nome da Conta *"}),(0,s.jsx)("input",{type:"text",value:eI.nome,onChange:e=>eF({...eI,nome:e.target.value}),className:"input w-full",placeholder:"Ex: Conta Principal",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Banco"}),(0,s.jsx)("input",{type:"text",value:eI.banco,onChange:e=>eF({...eI,banco:e.target.value}),className:"input w-full",placeholder:"Ex: Banco do Brasil"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Tipo"}),(0,s.jsxs)("select",{value:eI.tipo,onChange:e=>eF({...eI,tipo:e.target.value}),className:"input w-full",children:[(0,s.jsx)("option",{value:"corrente",children:"Conta Corrente"}),(0,s.jsx)("option",{value:"poupanca",children:"Poupan\xe7a"}),(0,s.jsx)("option",{value:"caixa",children:"Caixa"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Ag\xeancia"}),(0,s.jsx)("input",{type:"text",value:eI.agencia,onChange:e=>eF({...eI,agencia:e.target.value}),className:"input w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Conta"}),(0,s.jsx)("input",{type:"text",value:eI.conta,onChange:e=>eF({...eI,conta:e.target.value}),className:"input w-full"})]})]}),!eM&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Saldo Inicial"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:eI.saldo_inicial,onChange:e=>eF({...eI,saldo_inicial:Number(e.target.value)}),className:"input w-full"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-700",children:[(0,s.jsx)(C.z,{type:"button",variant:"secondary",onClick:()=>{ei(!1),eT(null),eF({nome:"",banco:"",agencia:"",conta:"",tipo:"corrente",saldo_inicial:0})},children:"Cancelar"}),(0,s.jsx)(C.z,{type:"submit",disabled:M,children:M?"Salvando...":"Salvar"})]})]})}),(0,s.jsx)(S.u,{isOpen:ed,onClose:()=>em(!1),title:"Nova Categoria Financeira",children:(0,s.jsxs)("form",{onSubmit:aC,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Nome *"}),(0,s.jsx)("input",{type:"text",value:eR.nome,onChange:e=>eP({...eR,nome:e.target.value}),className:"input w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Tipo *"}),(0,s.jsxs)("select",{value:eR.tipo,onChange:e=>eP({...eR,tipo:e.target.value}),className:"input w-full",children:[(0,s.jsx)("option",{value:"despesa",children:"Despesa"}),(0,s.jsx)("option",{value:"receita",children:"Receita"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Cor"}),(0,s.jsx)("input",{type:"color",value:eR.cor,onChange:e=>eP({...eR,cor:e.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-700",children:[(0,s.jsx)(C.z,{type:"button",variant:"secondary",onClick:()=>em(!1),children:"Cancelar"}),(0,s.jsx)(C.z,{type:"submit",disabled:M,children:M?"Salvando...":"Salvar"})]})]})}),(0,s.jsx)(S.u,{isOpen:ec,onClose:()=>{eo(!1),eV([]),eG({}),eH(!1),eY([]),eU(!1),eB(null)},title:"Importar Extrato OFX",size:"xl",children:(0,s.jsxs)("div",{className:"space-y-4",children:[eL&&(eJ||eX.length>0)&&(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:[(0,s.jsx)(y.Z,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),(0,s.jsxs)("div",{className:"text-sm text-red-300",children:[eJ&&(0,s.jsx)("div",{children:(0,s.jsx)("strong",{children:"Selecione uma conta banc\xe1ria."})}),eX.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("strong",{children:["Existem ",eX.length," ",1===eX.length?"item":"itens"," sem categoria."]})," ","Preencha todas as categorias para importar."]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Conta Banc\xe1ria *"}),(0,s.jsxs)("select",{ref:eK,value:ee||"",onChange:e=>{ea(Number(e.target.value)),e.target.value&&eU(!1)},className:"input w-full ".concat(eL&&eJ?"border-red-500 ring-1 ring-red-500":""),children:[(0,s.jsx)("option",{value:"",children:"Selecione a conta..."}),O.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]}),eL&&eJ&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-red-400 mt-1",children:[(0,s.jsx)(y.Z,{className:"w-3 h-3"}),"Conta banc\xe1ria obrigat\xf3ria"]})]}),(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto",children:(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Data"}),(0,s.jsx)("th",{children:"Descri\xe7\xe3o"}),(0,s.jsx)("th",{children:"Tipo"}),(0,s.jsx)("th",{className:"text-right",children:"Valor"}),(0,s.jsx)("th",{children:"Categoria *"}),(0,s.jsx)("th",{children:"Status"})]})}),(0,s.jsx)("tbody",{children:eO.map(e=>{let a=eL&&eX.includes(e.id);return(0,s.jsxs)("tr",{ref:a=>{eQ.current[e.id]=a},className:"\n                        ".concat(e.duplicado?"opacity-50":"","\n                        ").concat(a?"bg-red-500/10 border-l-2 border-l-red-500":"","\n                      "),children:[(0,s.jsx)("td",{className:"text-dark-300",children:(0,z.p6)(e.data)}),(0,s.jsx)("td",{className:"text-white",children:e.descricao}),(0,s.jsx)("td",{children:(0,s.jsx)(Z.Ct,{variant:"entrada"===e.tipo?"success":"danger",children:"entrada"===e.tipo?"Entrada":"Sa\xedda"})}),(0,s.jsx)("td",{className:"text-right font-medium ".concat("entrada"===e.tipo?"text-green-400":"text-red-400"),children:(0,z.xG)(e.valor)}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("select",{ref:a=>{eW.current[e.id]=a},value:eq[e.id]||"",onChange:a=>aD(e.id,Number(a.target.value)),className:"input text-sm ".concat(a?"border-red-500 ring-1 ring-red-500":""),disabled:e.duplicado,children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),q.filter(a=>a.tipo===("entrada"===e.tipo?"receita":"despesa")).map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]}),a&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-red-400",children:[(0,s.jsx)(y.Z,{className:"w-3 h-3"}),"Categoria obrigat\xf3ria"]})]})}),(0,s.jsx)("td",{children:e.duplicado?(0,s.jsx)(Z.Ct,{variant:"warning",children:"Duplicado"}):a?(0,s.jsx)(Z.Ct,{variant:"danger",children:"Pendente"}):(0,s.jsx)(Z.Ct,{variant:"success",children:"Novo"})})]},e.id)})})]})}),eA&&(0,s.jsxs)("div",{className:"p-4 rounded-lg border ".concat(eA.erros>0?"bg-red-500/10 border-red-500/30":"bg-green-500/10 border-green-500/30"),children:[(0,s.jsx)("h4",{className:"font-medium mb-2 ".concat(eA.erros>0?"text-red-400":"text-green-400"),children:eA.erros>0?" Importa\xe7\xe3o parcial":" Importa\xe7\xe3o conclu\xedda"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,s.jsxs)("div",{className:"bg-dark-700 p-2 rounded",children:[(0,s.jsx)("span",{className:"text-dark-400",children:"Importados:"}),(0,s.jsx)("span",{className:"text-green-400 ml-2 font-medium",children:eA.importados})]}),(0,s.jsxs)("div",{className:"bg-dark-700 p-2 rounded",children:[(0,s.jsx)("span",{className:"text-dark-400",children:"Dup. FITID:"}),(0,s.jsx)("span",{className:"text-yellow-400 ml-2 font-medium",children:eA.duplicadosFitid})]}),(0,s.jsxs)("div",{className:"bg-dark-700 p-2 rounded",children:[(0,s.jsx)("span",{className:"text-dark-400",children:"Dup. Similar:"}),(0,s.jsx)("span",{className:"text-orange-400 ml-2 font-medium",children:eA.duplicadosFingerprint})]}),(0,s.jsxs)("div",{className:"bg-dark-700 p-2 rounded",children:[(0,s.jsx)("span",{className:"text-dark-400",children:"Erros:"}),(0,s.jsx)("span",{className:"text-red-400 ml-2 font-medium",children:eA.erros})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-dark-700",children:[(0,s.jsxs)("div",{className:"text-sm text-dark-400",children:[eO.filter(e=>!e.duplicado).length," lan\xe7amentos ser\xe3o importados",eO.filter(e=>e.duplicado).length>0&&(0,s.jsxs)("span",{className:"text-yellow-400 ml-2",children:["(",eO.filter(e=>e.duplicado).length," duplicados ignorados)"]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(C.z,{variant:"secondary",onClick:()=>{eo(!1),eV([]),eG({}),eH(!1),eY([]),eU(!1),eB(null)},children:"Cancelar"}),(0,s.jsx)(C.z,{onClick:aZ,disabled:M,children:M?"Importando...":"Importar"})]})]})]})}),(0,s.jsx)(S.u,{isOpen:e$,onClose:()=>e0(!1),title:"pagar"===e1?"Confirmar Pagamento":"Confirmar Recebimento",size:"md",children:(0,s.jsx)("div",{className:"space-y-4",children:e4&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"glass-card p-4 bg-dark-800/50",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"text-dark-400 text-sm",children:"Descri\xe7\xe3o"}),(0,s.jsx)("span",{className:"text-white font-medium",children:e4.descricao})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-dark-400 text-sm",children:"Valor"}),(0,s.jsx)("span",{className:"text-green-400 font-bold text-lg",children:(0,z.xG)(e4.valor)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm text-dark-300 mb-2",children:[(0,s.jsx)(w.Z,{className:"w-4 h-4 inline mr-2"}),"Data do ","pagar"===e1?"Pagamento":"Recebimento"," *"]}),(0,s.jsx)("input",{type:"date",value:e3,onChange:e=>e8(e.target.value),className:"input w-full",required:!0}),(0,s.jsxs)("p",{className:"text-xs text-dark-500 mt-1",children:["Informe a data real do ","pagar"===e1?"pagamento":"recebimento"," para conciliar com o extrato banc\xe1rio (OFX)."]})]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end pt-2",children:[(0,s.jsx)(C.z,{variant:"secondary",onClick:()=>e0(!1),children:"Cancelar"}),(0,s.jsx)(C.z,{onClick:aj,leftIcon:M?(0,s.jsx)(h.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(v.Z,{className:"w-4 h-4"}),disabled:M||!e3,children:M?"Processando...":"Confirmar ".concat("pagar"===e1?"Pagamento":"Recebimento")})]})]})})}),(0,s.jsx)(S.u,{isOpen:e7,onClose:()=>{e6(!1),ae(null)},title:"Resultado da Sincroniza\xe7\xe3o",size:"lg",children:e9&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,s.jsxs)("div",{className:"glass-card p-3 text-center bg-dark-800/50",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:e9.totalContas}),(0,s.jsx)("p",{className:"text-xs text-dark-400",children:"Total Analisadas"})]}),(0,s.jsxs)("div",{className:"glass-card p-3 text-center bg-dark-800/50",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-green-400",children:e9.conciliadas}),(0,s.jsx)("p",{className:"text-xs text-dark-400",children:"Conciliadas Agora"})]}),(0,s.jsxs)("div",{className:"glass-card p-3 text-center bg-dark-800/50",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:e9.jaConciliadas}),(0,s.jsx)("p",{className:"text-xs text-dark-400",children:"J\xe1 Conciliadas"})]}),(0,s.jsxs)("div",{className:"glass-card p-3 text-center bg-dark-800/50",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-yellow-400",children:e9.semCorrespondencia}),(0,s.jsx)("p",{className:"text-xs text-dark-400",children:"Sem Correspond\xeancia"})]})]}),e9.conciliadas>0&&(0,s.jsx)("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:(0,s.jsxs)("p",{className:"text-green-400 text-sm flex items-center gap-2",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4"}),e9.conciliadas," lan\xe7amento(s) duplicado(s) foram removidos/conciliados com sucesso!"]})}),e9.detalhes.length>0&&(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto",children:(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Descri\xe7\xe3o"}),(0,s.jsx)("th",{className:"text-right",children:"Valor"}),(0,s.jsx)("th",{children:"Status"})]})}),(0,s.jsx)("tbody",{children:e9.detalhes.map((e,a)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"text-white text-sm",children:e.descricao}),(0,s.jsx)("td",{className:"text-right text-white text-sm",children:(0,z.xG)(e.valor)}),(0,s.jsx)("td",{children:(0,s.jsx)(Z.Ct,{variant:"conciliado"===e.status?"success":"ja_conciliado"===e.status?"info":"warning",children:"conciliado"===e.status?"Conciliado":"ja_conciliado"===e.status?"J\xe1 Conciliado":"Sem Correspond\xeancia"})})]},a))})]})}),(0,s.jsx)("div",{className:"flex justify-end pt-2",children:(0,s.jsx)(C.z,{onClick:()=>{e6(!1),ae(null)},children:"Fechar"})})]})}),(0,s.jsx)(D.W3,{isOpen:ex,onClose:()=>eu(!1),clienteId:eg}),(0,s.jsx)(D.i,{isOpen:eh,onClose:()=>ep(!1),fornecedorId:ef}),(0,s.jsx)(D.hJ,{isOpen:ej,onClose:()=>ev(!1),vendaId:e_})]})}}},function(e){e.O(0,[149,985,900,548,971,938,744],function(){return e(e.s=38955)}),_N_E=e.O()}]);