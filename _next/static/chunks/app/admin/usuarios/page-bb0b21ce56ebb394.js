(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[798],{11981:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},77216:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},99670:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},86264:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9883:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},41827:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},92851:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},45367:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},25750:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},82549:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},43959:function(e,r,t){Promise.resolve().then(t.bind(t,1347))},1347:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return y}});var n=t(57437),a=t(2265),s=t(9883),i=t(41827),o=t(25750);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,t(62898).Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var l=t(45367),u=t(11981),d=t(77216),m=t(99670),f=t(66651),x=t(70492),h=t(548),p=t(14958);function y(){let[e,r]=(0,a.useState)([]),[t,y]=(0,a.useState)(!0),[b,g]=(0,a.useState)(""),[w,j]=(0,a.useState)(!1),[N,v]=(0,a.useState)(null),[k,E]=(0,a.useState)(!1),[C,A]=(0,a.useState)(!1),[S,O]=(0,a.useState)(""),[L,M]=(0,a.useState)(""),[I,Z]=(0,a.useState)(""),[T,D]=(0,a.useState)(""),[R,U]=(0,a.useState)("funcionario"),[z,q]=(0,a.useState)(!1),[G,F]=(0,a.useState)(null),[P,_]=(0,a.useState)(!1);(0,a.useEffect)(()=>{J()},[]);let J=async()=>{try{y(!0);let e=await (0,p.FZ)();r(e)}catch(e){console.error("Erro ao carregar usu\xe1rios:",e)}finally{y(!1)}},B=e.filter(e=>e.nome.toLowerCase().includes(b.toLowerCase())||e.email.toLowerCase().includes(b.toLowerCase())),Q=e=>{v(e),M(e.nome),Z(e.email),D(""),U(e.tipo),O(""),A(!1),j(!0)},X=()=>{j(!1),v(null),O("")},K=e=>{F(e),q(!0)},V=()=>{q(!1),F(null)},Y=async r=>{if(r.preventDefault(),O(""),!L.trim()){O("Nome \xe9 obrigat\xf3rio");return}if(!I.trim()){O("Email \xe9 obrigat\xf3rio");return}if(!N&&!T.trim()){O("Senha \xe9 obrigat\xf3ria para novo usu\xe1rio");return}if(e.some(e=>e.email.toLowerCase()===I.trim().toLowerCase()&&e.id!==(null==N?void 0:N.id))){O("J\xe1 existe um usu\xe1rio com este email");return}E(!0);try{if(N){let e={nome:L.trim(),email:I.trim(),tipo:R};T.trim()&&(e.senha=T.trim()),await (0,p.AT)(N.id,e)}else{let e={nome:L.trim(),email:I.trim(),senha:T.trim(),tipo:R};await (0,p.mU)(e)}await J(),X()}catch(e){console.error("Erro ao salvar usu\xe1rio:",e),O("Erro ao salvar usu\xe1rio. Tente novamente.")}finally{E(!1)}},W=async()=>{if(G){_(!0);try{await (0,p.S3)(G.id),await J(),V()}catch(e){console.error("Erro ao excluir usu\xe1rio:",e)}finally{_(!1)}}};return t?(0,n.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,n.jsx)(h.TK,{size:"lg"})}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold font-heading text-white",children:"Gerenciar Usu\xe1rios"}),(0,n.jsx)("p",{className:"text-dark-400 mt-1",children:"Crie e gerencie os usu\xe1rios que ter\xe3o acesso ao sistema"})]}),(0,n.jsx)(f.z,{onClick:()=>{v(null),M(""),Z(""),D(""),U("funcionario"),O(""),A(!1),j(!0)},leftIcon:(0,n.jsx)(s.Z,{className:"w-4 h-4"}),children:"Novo Usu\xe1rio"})]}),(0,n.jsx)("div",{className:"glass-card p-4",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(i.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),(0,n.jsx)("input",{type:"text",placeholder:"Buscar por nome ou email...",value:b,onChange:e=>g(e.target.value),className:"input pl-12 w-full"})]})}),B.length>0?(0,n.jsx)("div",{className:"space-y-3",children:B.map(e=>(0,n.jsx)("div",{className:"glass-card p-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 rounded-xl bg-primary-500/10 flex items-center justify-center",children:(0,n.jsx)(o.Z,{className:"w-6 h-6 text-primary-400"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-white",children:e.nome}),(0,n.jsx)("p",{className:"text-sm text-dark-400",children:e.email})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(h.Ct,{variant:"admin"===e.tipo?"warning":"info",children:"admin"===e.tipo?"Administrador":"Funcion\xe1rio"}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("button",{onClick:()=>Q(e),className:"p-2 rounded-lg hover:bg-dark-700 text-dark-400 hover:text-primary-400 transition-colors",title:"Editar",children:(0,n.jsx)(c,{className:"w-4 h-4"})}),(0,n.jsx)("button",{onClick:()=>K(e),className:"p-2 rounded-lg hover:bg-dark-700 text-dark-400 hover:text-red-400 transition-colors",title:"Excluir",children:(0,n.jsx)(l.Z,{className:"w-4 h-4"})})]})]})]})},e.id))}):(0,n.jsx)("div",{className:"glass-card",children:(0,n.jsx)(h.ub,{icon:(0,n.jsx)(o.Z,{className:"w-10 h-10 text-dark-500"}),title:"Nenhum usu\xe1rio encontrado",description:b?"Tente buscar com outros termos":'Clique em "Novo Usu\xe1rio" para come\xe7ar'})}),(0,n.jsx)(x.u,{isOpen:w,onClose:X,title:N?"Editar Usu\xe1rio":"Novo Usu\xe1rio",size:"md",children:(0,n.jsxs)("form",{onSubmit:Y,className:"space-y-4",children:[S&&(0,n.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:[(0,n.jsx)(u.Z,{className:"w-4 h-4 flex-shrink-0"}),S]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-1.5",children:"Nome *"}),(0,n.jsx)("input",{type:"text",value:L,onChange:e=>M(e.target.value),placeholder:"Nome completo",className:"input w-full",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-1.5",children:"Email *"}),(0,n.jsx)("input",{type:"email",value:I,onChange:e=>Z(e.target.value),placeholder:"email@exemplo.com",className:"input w-full",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block text-sm font-medium text-dark-300 mb-1.5",children:["Senha ",N?"(deixe vazio para manter a atual)":"*"]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:C?"text":"password",value:T,onChange:e=>D(e.target.value),placeholder:N?"••••••••":"Digite a senha",className:"input w-full pr-12",required:!N}),(0,n.jsx)("button",{type:"button",onClick:()=>A(!C),className:"absolute right-3 top-1/2 -translate-y-1/2 text-dark-400 hover:text-white transition-colors",children:C?(0,n.jsx)(d.Z,{className:"w-5 h-5"}):(0,n.jsx)(m.Z,{className:"w-5 h-5"})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-1.5",children:"Tipo de Usu\xe1rio"}),(0,n.jsxs)("select",{value:R,onChange:e=>U(e.target.value),className:"input w-full",children:[(0,n.jsx)("option",{value:"funcionario",children:"Funcion\xe1rio"}),(0,n.jsx)("option",{value:"admin",children:"Administrador"})]})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-700",children:[(0,n.jsx)(f.z,{type:"button",variant:"secondary",onClick:X,children:"Cancelar"}),(0,n.jsx)(f.z,{type:"submit",isLoading:k,children:N?"Salvar Altera\xe7\xf5es":"Criar Usu\xe1rio"})]})]})}),(0,n.jsx)(x.u,{isOpen:z,onClose:V,title:"Confirmar Exclus\xe3o",size:"sm",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("p",{className:"text-dark-300",children:["Tem certeza que deseja excluir o usu\xe1rio"," ",(0,n.jsx)("span",{className:"font-semibold text-white",children:null==G?void 0:G.nome}),"?"]}),(0,n.jsx)("p",{className:"text-sm text-dark-400",children:"Esta a\xe7\xe3o n\xe3o pode ser desfeita. O usu\xe1rio perder\xe1 o acesso ao sistema."}),(0,n.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-700",children:[(0,n.jsx)(f.z,{type:"button",variant:"secondary",onClick:V,children:"Cancelar"}),(0,n.jsx)(f.z,{onClick:W,isLoading:P,className:"bg-red-600 hover:bg-red-700 border-red-600",children:"Excluir Usu\xe1rio"})]})]})})]})}},66651:function(e,r,t){"use strict";t.d(r,{z:function(){return i}});var n=t(57437),a=t(86264),s=t(22169);function i(e){let{children:r,className:t,variant:i="primary",size:o="md",isLoading:c=!1,leftIcon:l,rightIcon:u,disabled:d,...m}=e;return(0,n.jsxs)("button",{className:(0,s.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",danger:"btn-danger",success:"btn-success",ghost:"btn-ghost"}[i],{sm:"px-3 py-1.5 text-xs",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base"}[o],t),disabled:d||c,...m,children:[c?(0,n.jsx)(a.Z,{className:"w-4 h-4 animate-spin"}):l,r,!c&&u]})}},548:function(e,r,t){"use strict";t.d(r,{Ct:function(){return c},TK:function(){return o},ub:function(){return i}});var n=t(57437),a=t(22169),s=t(92851);function i(e){let{icon:r,title:t,description:a,action:i}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center",children:[(0,n.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-dark-800 flex items-center justify-center mb-6",children:r||(0,n.jsx)(s.Z,{className:"w-10 h-10 text-dark-500"})}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:t}),a&&(0,n.jsx)("p",{className:"text-dark-400 max-w-sm mb-6",children:a}),i]})}function o(e){let{size:r="md"}=e;return(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsx)("div",{className:(0,a.cn)("rounded-full border-dark-700 border-t-primary-500 animate-spin",{sm:"w-6 h-6 border-2",md:"w-10 h-10 border-3",lg:"w-16 h-16 border-4"}[r])})})}function c(e){let{children:r,variant:t="success",size:s="md",className:i}=e;return(0,n.jsx)("span",{className:(0,a.cn)("badge",{success:"badge-success",danger:"badge-danger",warning:"badge-warning",info:"badge-info",primary:"badge-info",secondary:"bg-dark-600 text-dark-300"}[t],{sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1",lg:"text-sm px-3 py-1.5"}[s],i),children:r})}},70492:function(e,r,t){"use strict";t.d(r,{u:function(){return o}});var n=t(57437),a=t(82549),s=t(2265),i=t(22169);function o(e){let{isOpen:r,onClose:t,title:o,children:c,size:l="md"}=e;return((0,s.useEffect)(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),r)?(0,n.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:t}),(0,n.jsxs)("div",{className:(0,i.cn)("relative w-full bg-dark-900 border border-dark-700 rounded-2xl shadow-2xl animate-slide-up",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[l]),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-700",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-white",children:o}),(0,n.jsx)("button",{onClick:t,className:"p-2 rounded-xl text-dark-400 hover:text-white hover:bg-dark-800 transition-colors",children:(0,n.jsx)(a.Z,{className:"w-5 h-5"})})]}),(0,n.jsx)("div",{className:"px-6 py-6 max-h-[70vh] overflow-y-auto scrollbar-thin",children:c})]})]}):null}},14958:function(e,r,t){"use strict";t.d(r,{AE:function(){return x},AT:function(){return N},FZ:function(){return w},GL:function(){return o},Gx:function(){return d},JA:function(){return i},Kx:function(){return g},OQ:function(){return n},Qf:function(){return y},S3:function(){return v},SE:function(){return c},SL:function(){return a},VR:function(){return u},gQ:function(){return p},hM:function(){return l},mU:function(){return j},nx:function(){return s},r0:function(){return m},uY:function(){return f},y5:function(){return h},zM:function(){return b}});let n=(0,t(69073).eI)("https://yhiiupamxdjmnrktkjku.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InloaWl1cGFteGRqbW5ya3Rramt1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0ODg2NzUsImV4cCI6MjA4NDA2NDY3NX0._QjYtYAlypJdursHe0-rPz14QOT4NNP2EklqcJ6TpkI");async function a(){let{data:e,error:r}=await n.from("orcamentos").select("*").order("data",{ascending:!1});if(r)throw console.error("Erro ao buscar or\xe7amentos:",r),r;return e||[]}async function s(e){let{data:r,error:t}=await n.from("orcamentos").insert([e]).select().single();if(t)throw console.error("Erro ao criar or\xe7amento:",t),Error(t.message);return r}async function i(e,r){let{data:t,error:a}=await n.from("orcamentos").update(r).eq("id",e).select().single();if(a)throw console.error("Erro ao atualizar or\xe7amento:",a),Error(a.message);return t}async function o(e){let{error:r}=await n.from("orcamentos").delete().eq("id",e);if(r)throw console.error("Erro ao excluir or\xe7amento:",r),Error(r.message)}async function c(){let{data:e,error:r}=await n.from("materiais").select("*").order("nome",{ascending:!0});if(r)throw console.error("Erro ao buscar materiais:",r),r;return e||[]}async function l(e){let{data:r,error:t}=await n.from("materiais").insert([e]).select().single();if(t)throw console.error("Erro ao criar material:",t),Error(t.message);return r}async function u(e,r){let{data:t,error:a}=await n.from("materiais").update(r).eq("id",e).select().single();if(a)throw console.error("Erro ao atualizar material:",a),Error(a.message);return t}async function d(e){let{error:r}=await n.from("materiais").delete().eq("id",e);if(r)throw console.error("Erro ao excluir material:",r),Error(r.message)}async function m(){let{data:e,error:r}=await n.from("obras").select("\n      *,\n      orcamento:orcamentos(id, cliente, status)\n    ").order("created_at",{ascending:!1});if(r)throw console.error("Erro ao buscar obras:",r),r;return e||[]}async function f(){let{data:e,error:r}=await n.from("obras").select("\n      *,\n      orcamento:orcamentos(id, cliente)\n    ").eq("status","em_andamento").order("created_at",{ascending:!1});if(r)throw console.error("Erro ao buscar obras em andamento:",r),r;return e||[]}async function x(e){let{data:r,error:t}=await n.from("obras").insert([e]).select().single();if(t)throw console.error("Erro ao criar obra:",t),Error(t.message);return r}async function h(e,r){let{data:t,error:a}=await n.from("obras").update(r).eq("id",e).select().single();if(a)throw console.error("Erro ao atualizar obra:",a),Error(a.message);return t}async function p(e){let{error:r}=await n.from("obras").delete().eq("id",e);if(r)throw console.error("Erro ao excluir obra:",r),Error(r.message)}async function y(e){let{data:r,error:t}=await n.from("obra_materiais").select("\n      *,\n      material:materiais(id, nome)\n    ").eq("obra_id",e);if(t)throw console.error("Erro ao buscar materiais da obra:",t),t;return r||[]}async function b(e){let{data:r}=await n.from("obra_materiais").select("id").eq("obra_id",e.obra_id).eq("material_id",e.material_id).single();if(r){let{data:t,error:a}=await n.from("obra_materiais").update({quantidade:e.quantidade}).eq("id",r.id).select().single();if(a)throw Error(a.message);return t}{let{data:r,error:t}=await n.from("obra_materiais").insert([e]).select().single();if(t)throw Error(t.message);return r}}async function g(e,r){let{data:t,error:a}=await n.from("usuarios").select("*").ilike("email",e.trim()).eq("senha",r).single();return a?(console.error("Erro no login:",a),null):t}async function w(){let{data:e,error:r}=await n.from("usuarios").select("*").order("nome",{ascending:!0});if(r)throw console.error("Erro ao buscar usu\xe1rios:",r),r;return e||[]}async function j(e){let{data:r,error:t}=await n.from("usuarios").insert([e]).select().single();if(t)throw console.error("Erro ao criar usu\xe1rio:",t),Error(t.message);return r}async function N(e,r){let{data:t,error:a}=await n.from("usuarios").update(r).eq("id",e).select().single();if(a)throw console.error("Erro ao atualizar usu\xe1rio:",a),Error(a.message);return t}async function v(e){let{error:r}=await n.from("usuarios").delete().eq("id",e);if(r)throw console.error("Erro ao excluir usu\xe1rio:",r),Error(r.message)}},22169:function(e,r,t){"use strict";t.d(r,{K3:function(){return f},T3:function(){return c},Wi:function(){return u},Wt:function(){return d},cn:function(){return s},d5:function(){return l},fj:function(){return m},p6:function(){return o},xG:function(){return i},zm:function(){return p}});var n=t(57042),a=t(74769);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,n.W)(r))}function i(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function o(e){if(!e)return"-";let r=new Date(e);return isNaN(r.getTime())?"-":r.toLocaleDateString("pt-BR")}function c(e){return"".concat(e.toFixed(1),"%")}function l(e,r){return r&&0!==r?e/r*100:0}function u(e){return("string"==typeof e?parseFloat(e)||0:e).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}function d(e){return e&&parseFloat(e.replace(/\./g,"").replace(",","."))||0}function m(e){let r=e.replace(/\D/g,"");return r?(parseInt(r)/100).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""}function f(e){return"".concat("/controle-orcamentos").concat(e)}let x=["UN","PC","KG","G","L","ML","M","CM","M2","M3","CX","PAR","SC","FD","PCT","RL","TON","DZ","CT","BD","JG","KIT","AMPOLA","UNID","PECA","METRO","LITRO","QUILO","CAIXA","SACO","FARDO","PACOTE","ROLO","DUZIA","CARTELA","BALDE","JOGO"],h={UNID:"UN",UNIDADE:"UN",UNIDADES:"UN",PECA:"PC",PEÇA:"PC",PECAS:"PC",PEÇAS:"PC",METRO:"M",METROS:"M",LITRO:"L",LITROS:"L",QUILO:"KG",QUILOS:"KG",QUILOGRAMA:"KG",QUILOGRAMAS:"KG",GRAMA:"G",GRAMAS:"G",MILILITRO:"ML",MILILITROS:"ML",CENTIMETRO:"CM",CENTIMETROS:"CM",CENTÍMETRO:"CM",CENTÍMETROS:"CM",CAIXA:"CX",CAIXAS:"CX",SACO:"SC",SACOS:"SC",FARDO:"FD",FARDOS:"FD",PACOTE:"PCT",PACOTES:"PCT",ROLO:"RL",ROLOS:"RL",TONELADA:"TON",TONELADAS:"TON",DUZIA:"DZ",DÚZIA:"DZ",DUZIAS:"DZ",CARTELA:"CT",CARTELAS:"CT",BALDE:"BD",BALDES:"BD",JOGO:"JG",JOGOS:"JG"};function p(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UN";if(null==e)return r;if("number"==typeof e)return console.warn("[normalizeUnidade] Valor num\xe9rico recebido: ".concat(e,". Usando default: ").concat(r)),r;let t=String(e).trim().toUpperCase();if(!t)return r;if(/^\d+$/.test(t))return console.warn('[normalizeUnidade] String num\xe9rica recebida: "'.concat(e,'". Usando default: ').concat(r)),r;if(h[t])return h[t];if(x.includes(t))return t;let n=t.split(/\s+/)[0];return x.includes(n)?n:h[n]?h[n]:(console.warn('[normalizeUnidade] Unidade desconhecida: "'.concat(e,'". Usando default: ').concat(r)),r)}}},function(e){e.O(0,[149,985,971,938,744],function(){return e(e.s=43959)}),_N_E=e.O()}]);