(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{72894:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},13008:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},41298:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},82293:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("FileUp",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]])},94136:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},29409:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},92851:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},85790:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},31541:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},82104:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62898).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},2088:function(e,a,s){Promise.resolve().then(s.bind(s,95693))},95693:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return _}});var t=s(57437),l=s(2265),r=s(82293),i=s(29409),c=s(9883),o=s(4322),n=s(85790),d=s(72894),m=s(41298),x=s(41827),u=s(45367);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,s(62898).Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var p=s(94136),j=s(31541),g=s(82104),v=s(13008),N=s(66651),f=s(70492),b=s(548),k=s(40971),y=s(87431),w=s(22169);let C=[{codigo:"00",nome:"Mercadoria para Revenda"},{codigo:"01",nome:"Mat\xe9ria-Prima"},{codigo:"02",nome:"Embalagem"},{codigo:"03",nome:"Produto em Processo"},{codigo:"04",nome:"Produto Acabado"},{codigo:"05",nome:"Subproduto"},{codigo:"06",nome:"Produto Intermedi\xe1rio"},{codigo:"07",nome:"Material de Uso e Consumo"},{codigo:"08",nome:"Ativo Imobilizado"},{codigo:"09",nome:"Servi\xe7os"},{codigo:"10",nome:"Outros Insumos"},{codigo:"99",nome:"Outras"}];function _(){let[e,a]=(0,l.useState)([]),[s,_]=(0,l.useState)([]),[q,S]=(0,l.useState)([]),[z,Z]=(0,l.useState)([]),[M,E]=(0,l.useState)(!0),[F,V]=(0,l.useState)(!1),[L,P]=(0,l.useState)(""),[I,G]=(0,l.useState)(""),[D,O]=(0,l.useState)(""),[T,A]=(0,l.useState)(new Set),[U,H]=(0,l.useState)(!1),[R,B]=(0,l.useState)(!1),[K,X]=(0,l.useState)(!1),[Q,J]=(0,l.useState)(!1),[$,W]=(0,l.useState)(!1),[Y,ee]=(0,l.useState)(!1),[ea,es]=(0,l.useState)(!1),[et,el]=(0,l.useState)(!1),[er,ei]=(0,l.useState)(null),[ec,eo]=(0,l.useState)(!1),[en,ed]=(0,l.useState)(null),[em,ex]=(0,l.useState)([]),[eu,eh]=(0,l.useState)("select"),ep=(0,l.useRef)(null),[ej,eg]=(0,l.useState)(null),[ev,eN]=(0,l.useState)(null),[ef,eb]=(0,l.useState)(null),[ek,ey]=(0,l.useState)([]),[ew,eC]=(0,l.useState)(null),[e_,eq]=(0,l.useState)({codigo:"",codigo_barras:"",gtin_ean:"",nome:"",descricao:"",unidade:"UN",ncm:"",cfop:"",origem:"0",categoria_id:null,classificacao_fiscal:"07",valor_custo:0,valor_venda:0,custo_medio:0,margem_lucro:0,quantidade_estoque:0,estoque_minimo:0,estoque_maximo:0,marca:"",peso_kg:0,tamanho:"",fornecedor_id:null,localizacao:""}),[eS,ez]=(0,l.useState)({nome:"",descricao:"",cor:"#3B82F6"}),[eZ,eM]=(0,l.useState)(null),[eE,eF]=(0,l.useState)({custo:"",margem:"30",impostos:"",frete:"",outros:""});(0,l.useEffect)(()=>{eV()},[]);let eV=async()=>{try{E(!0);let[e,s,t]=await Promise.all([(0,y.Xh)(),(0,y.FH)(),(0,y.Df)()]);a(e),_(s),Z(t);try{let e=await (0,y.Bj)();S(e.length>0?e:C)}catch(e){S(C)}}catch(e){console.error("Erro ao carregar dados:",e)}finally{E(!1)}},eL=e.filter(e=>{var a,s;let t=e.nome.toLowerCase().includes(L.toLowerCase())||(null===(a=e.codigo)||void 0===a?void 0:a.toLowerCase().includes(L.toLowerCase()))||(null===(s=e.codigo_barras)||void 0===s?void 0:s.includes(L)),l=!I||("sem_categoria"===I?!e.categoria_id:e.categoria_id===Number(I)),r=!D||e.classificacao_fiscal===D;return t&&l&&r}),eP=async e=>{eq({...e_,nome:e}),eb(null),e.length>3&&await (0,y.zb)(e,ej||void 0)&&eb("J\xe1 existe um produto com nome similar!")},eI=e=>{eN(null),eb(null),e?(eg(e.id),eq({codigo:e.codigo||"",codigo_barras:e.codigo_barras||"",gtin_ean:e.gtin_ean||"",nome:e.nome,descricao:e.descricao||"",unidade:e.unidade,ncm:e.ncm||"",cfop:e.cfop||"",origem:e.origem,categoria_id:e.categoria_id,classificacao_fiscal:e.classificacao_fiscal,valor_custo:e.valor_custo,valor_venda:e.valor_venda,custo_medio:e.custo_medio,margem_lucro:e.margem_lucro,quantidade_estoque:e.quantidade_estoque,estoque_minimo:e.estoque_minimo,estoque_maximo:e.estoque_maximo,marca:e.marca||"",peso_kg:e.peso_kg,tamanho:e.tamanho||"",fornecedor_id:e.fornecedor_id,localizacao:e.localizacao||""})):(eg(null),eq({codigo:"",codigo_barras:"",gtin_ean:"",nome:"",descricao:"",unidade:"UN",ncm:"",cfop:"",origem:"0",categoria_id:null,classificacao_fiscal:"07",valor_custo:0,valor_venda:0,custo_medio:0,margem_lucro:0,quantidade_estoque:0,estoque_minimo:0,estoque_maximo:0,marca:"",peso_kg:0,tamanho:"",fornecedor_id:null,localizacao:""})),B(!0)},eG=()=>{B(!1),eg(null),eN(null),eb(null)},eD=async e=>{e.preventDefault(),V(!0),eN(null);try{ej?await (0,y.Me)(ej,e_):await (0,y.LK)(e_),await eV(),eG()}catch(e){eN(e instanceof Error?e.message:"Erro ao salvar produto")}finally{V(!1)}},eO=async e=>{if(confirm("Tem certeza que deseja excluir este produto?"))try{await (0,y.Ow)(e),await eV()}catch(e){console.error("Erro ao excluir:",e),alert("Erro ao excluir produto")}},eT=e=>{A(a=>{let s=new Set(a);return s.has(e)?s.delete(e):s.add(e),s})},eA=async()=>{if(0===T.size)return;let e=T.size;if(!confirm("Tem certeza que deseja excluir ".concat(e," produto(s)?\n\nEsta a\xe7\xe3o n\xe3o pode ser desfeita.")))return;H(!0);let a=0,s=0;for(let e of Array.from(T))try{await (0,y.Ow)(e),a++}catch(a){console.error("Erro ao excluir produto ".concat(e,":"),a),s++}A(new Set),await eV(),H(!1),s>0&&alert("".concat(a," exclu\xeddo(s) com sucesso.\n").concat(s," erro(s) ao excluir."))},eU=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",s=[],t="",l=!1,r=0;for(;r<e.length;){let i=e[r];if('"'===i){if(l&&'"'===e[r+1]){t+='"',r+=2;continue}l=!l,r++;continue}if(i===a&&!l){s.push(t.trim()),t="",r++;continue}t+=i,r++}return s.push(t.trim()),s},eH=e=>e&&parseFloat(e.replace(/[^\d,.-]/g,"").replace(",","."))||0,eR=async e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!t)return;let l=new FileReader;l.onload=async e=>{try{var s,t;let l=(null===(s=e.target)||void 0===s?void 0:s.result).split("\n").filter(e=>e.trim()),r=l[0].includes(";")?";":",",i=l.slice(1),c=await (0,y.Xh)();a(c);let o=[],n=new Map,d=new Map,m=new Map;for(let e=0;e<i.length;e++){let a=i[e];if(!a.trim())continue;let s=eU(a,r),l=s[0]||"",x=s[2]||"",u=s[5]||"",h=eH(s[6]),p=eH(s[7]),j=eH(s[8]),g=(0,w.zm)(s[9]),v=eH(s[11]),N=eH(s[12]),f=eH(s[13]),b=s[22]||"",k=s[23]||"0",y=s[25]||"",C=s[26]||"07",_=s[27]||"",q=(null===(t=s[30])||void 0===t?void 0:t.toLowerCase().includes("ativo"))!==!1,S=s[31]||"",z=s[32]||"",Z=!1,M="",E=c.find(e=>l&&e.codigo===l||e.nome.toLowerCase()===x.toLowerCase()||y&&e.codigo_barras===y);if(E&&(Z=!0,M=l&&E.codigo===l?'C\xf3digo "'.concat(l,'" j\xe1 cadastrado: ').concat(E.nome):y&&E.codigo_barras===y?"C\xf3digo de barras j\xe1 cadastrado: ".concat(E.nome):"Nome similar j\xe1 cadastrado: ".concat(E.nome)),!Z){if(l){let a=n.get(l);void 0!==a?(Z=!0,M='C\xf3digo "'.concat(l,'" duplicado no CSV (mesmo que linha ').concat(a,")")):n.set(l,e+2)}if(!Z&&x){let a=x.toLowerCase().trim(),s=d.get(a);void 0!==s?(Z=!0,M='Nome "'.concat(x,'" duplicado no CSV (mesmo que linha ').concat(s,")")):d.set(a,e+2)}if(!Z&&y){let a=m.get(y);void 0!==a?(Z=!0,M="C\xf3digo de barras duplicado no CSV (mesmo que linha ".concat(a,")")):m.set(y,e+2)}}o.push({linha:e+2,selected:!Z&&!!x,isDuplicate:Z,duplicateReason:M,data:{codigo:l,codigo_barras:y,gtin_ean:y,nome:x,descricao:_,unidade:g.toUpperCase(),ncm:b.replace(/\D/g,""),origem:k,classificacao_fiscal:C,valor_custo:N,valor_venda:v,custo_medio:N,margem_lucro:N>0?(v-N)/N*100:0,quantidade_estoque:j,estoque_minimo:h,estoque_maximo:p,marca:u,peso_kg:f,tamanho:S,localizacao:z,ativo:q}})}ex(o),eh("preview")}catch(e){console.error("Erro ao processar CSV:",e),alert("Erro ao ler o arquivo CSV")}ep.current&&(ep.current.value="")},l.readAsText(t,"UTF-8")},eB=async()=>{let e=em.filter(e=>e.selected);if(0===e.length){alert("Selecione pelo menos um item para importar");return}eo(!0);let a=0,s=[];for(let t of e)try{if(!t.data.nome){s.push({linha:t.linha,erro:"Nome do produto n\xe3o informado"});continue}await (0,y.LK)(t.data),a++}catch(a){let e=a instanceof Error?a.message:"Erro desconhecido";s.push({linha:t.linha,erro:e})}ed({success:a,errors:s}),eh("result"),eo(!1),await eV()},eK=e=>{ex(a=>a.map((a,s)=>s===e?{...a,selected:!a.selected}:a))},eX=e=>{ex(a=>a.map(a=>({...a,selected:e&&!a.isDuplicate&&!!a.data.nome})))},eQ=()=>{es(!1),ed(null),ex([]),eh("select")},eJ=async e=>{eC(e);try{let a=await (0,y.E8)(e.id);ey(a),W(!0)}catch(e){console.error("Erro ao carregar hist\xf3rico:",e)}},e$=()=>{let e=parseFloat(eE.custo)||0,a=parseFloat(eE.margem)||0,s=parseFloat(eE.impostos)||0,t=parseFloat(eE.frete)||0,l=parseFloat(eE.outros)||0,r=s/100*e,i=t/100*e,c=l/100*e,o=e+r+i+c;return{precoVenda:o*(1+a/100),custoTotal:o,valorImpostos:r,valorFrete:i,valorOutros:c}},eW=e=>{e?(eM(e.id),ez({nome:e.nome,descricao:e.descricao||"",cor:e.cor})):(eM(null),ez({nome:"",descricao:"",cor:"#3B82F6"})),X(!0)},eY=async()=>{try{eZ?await (0,y.rZ)(eZ,eS):await (0,y.q7)(eS);let e=await (0,y.FH)();_(e),X(!1)}catch(e){console.error("Erro ao salvar categoria:",e)}},e0=async e=>{if(confirm("Excluir esta categoria?"))try{await (0,y.Z2)(e);let a=await (0,y.FH)();_(a)}catch(e){alert("Erro ao excluir categoria. Ela pode estar em uso.")}};return M?(0,t.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,t.jsx)(b.TK,{size:"lg"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold font-heading text-white",children:"Estoque"}),(0,t.jsx)("p",{className:"text-dark-400 mt-1",children:"Gerencie produtos, categorias e movimenta\xe7\xf5es"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(N.z,{variant:"secondary",onClick:()=>es(!0),leftIcon:(0,t.jsx)(r.Z,{className:"w-4 h-4"}),children:"Importar CSV"}),(0,t.jsx)(N.z,{variant:"secondary",onClick:()=>J(!0),leftIcon:(0,t.jsx)(i.Z,{className:"w-4 h-4"}),children:"Categorias"}),(0,t.jsx)(N.z,{onClick:()=>eI(),leftIcon:(0,t.jsx)(c.Z,{className:"w-5 h-5"}),children:"Novo Produto"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)("div",{className:"glass-card p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary-500/20 flex items-center justify-center",children:(0,t.jsx)(o.Z,{className:"w-5 h-5 text-primary-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Total Produtos"}),(0,t.jsx)("p",{className:"text-xl font-bold text-white",children:e.length})]})]})}),(0,t.jsx)("div",{className:"glass-card p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center",children:(0,t.jsx)(n.Z,{className:"w-5 h-5 text-green-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Valor em Estoque"}),(0,t.jsx)("p",{className:"text-xl font-bold text-white",children:(0,w.xG)(e.reduce((e,a)=>e+a.quantidade_estoque*a.custo_medio,0))})]})]})}),(0,t.jsx)("div",{className:"glass-card p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center",children:(0,t.jsx)(d.Z,{className:"w-5 h-5 text-yellow-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Estoque Baixo"}),(0,t.jsx)("p",{className:"text-xl font-bold text-white",children:e.filter(e=>e.quantidade_estoque<=e.estoque_minimo&&e.estoque_minimo>0).length})]})]})}),(0,t.jsx)("div",{className:"glass-card p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center",children:(0,t.jsx)(m.Z,{className:"w-5 h-5 text-blue-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Valor Venda"}),(0,t.jsx)("p",{className:"text-xl font-bold text-white",children:(0,w.xG)(e.reduce((e,a)=>e+a.quantidade_estoque*a.valor_venda,0))})]})]})})]}),(0,t.jsxs)("div",{className:"glass-card p-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"relative md:col-span-2",children:[(0,t.jsx)(x.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar por nome, c\xf3digo ou c\xf3digo de barras...",value:L,onChange:e=>P(e.target.value),className:"input pl-12 w-full"})]}),(0,t.jsxs)("select",{value:I,onChange:e=>G(e.target.value),className:"input",children:[(0,t.jsx)("option",{value:"",children:"Todas as categorias"}),(0,t.jsx)("option",{value:"sem_categoria",children:"Sem Categoria"}),s.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nome},e.id))]}),(0,t.jsxs)("select",{value:D,onChange:e=>O(e.target.value),className:"input",children:[(0,t.jsx)("option",{value:"",children:"Todas as classifica\xe7\xf5es"}),(q.length>0?q:C).map(e=>(0,t.jsxs)("option",{value:e.codigo,children:[e.codigo," - ",e.nome]},e.codigo))]})]}),T.size>0&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-red-400 font-medium",children:[T.size," produto(s) selecionado(s)"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(N.z,{variant:"secondary",size:"sm",onClick:()=>A(new Set),children:"Limpar Sele\xe7\xe3o"}),(0,t.jsx)(N.z,{variant:"danger",size:"sm",onClick:eA,disabled:U,leftIcon:(0,t.jsx)(u.Z,{className:"w-4 h-4"}),children:U?"Excluindo...":"Excluir Selecionados"})]})]})]}),(0,t.jsx)("div",{className:"glass-card overflow-hidden",children:eL.length>0?(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"data-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"w-10",children:(0,t.jsx)("input",{type:"checkbox",checked:T.size===eL.length&&eL.length>0,onChange:()=>{T.size===eL.length?A(new Set):A(new Set(eL.map(e=>e.id)))},className:"w-4 h-4 rounded text-primary-500"})}),(0,t.jsx)("th",{children:"C\xf3digo"}),(0,t.jsx)("th",{children:"Produto"}),(0,t.jsx)("th",{children:"Categoria"}),(0,t.jsx)("th",{children:"Classifica\xe7\xe3o"}),(0,t.jsx)("th",{className:"text-right",children:"Estoque"}),(0,t.jsx)("th",{className:"text-right",children:"Custo"}),(0,t.jsx)("th",{className:"text-right",children:"Venda"}),(0,t.jsx)("th",{className:"text-right",children:"Margem"}),(0,t.jsx)("th",{className:"text-right",children:"A\xe7\xf5es"})]})}),(0,t.jsx)("tbody",{children:eL.map(e=>{var a,s;return(0,t.jsxs)("tr",{className:"group ".concat(T.has(e.id)?"bg-primary-500/5":""),children:[(0,t.jsx)("td",{children:(0,t.jsx)("input",{type:"checkbox",checked:T.has(e.id),onChange:()=>eT(e.id),className:"w-4 h-4 rounded text-primary-500"})}),(0,t.jsx)("td",{className:"text-dark-400",children:e.codigo||"-"}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary-500/10 flex items-center justify-center",children:(0,t.jsx)(o.Z,{className:"w-5 h-5 text-primary-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-white",children:e.nome}),e.marca&&(0,t.jsx)("p",{className:"text-xs text-dark-400",children:e.marca})]})]})}),(0,t.jsx)("td",{children:(0,t.jsx)(b.Ct,{variant:"secondary",children:(null===(a=e.categoria)||void 0===a?void 0:a.nome)||"Sem categoria"})}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"text-sm text-dark-400",children:(null===(s=C.find(a=>a.codigo===e.classificacao_fiscal))||void 0===s?void 0:s.nome)||e.classificacao_fiscal})}),(0,t.jsx)("td",{className:"text-right",children:(0,t.jsxs)("span",{className:"font-medium ".concat(e.quantidade_estoque<=e.estoque_minimo&&e.estoque_minimo>0?"text-red-400":"text-white"),children:[e.quantidade_estoque," ",e.unidade]})}),(0,t.jsx)("td",{className:"text-right text-dark-300",children:(0,w.xG)(e.custo_medio||e.valor_custo)}),(0,t.jsx)("td",{className:"text-right text-green-400 font-medium",children:(0,w.xG)(e.valor_venda)}),(0,t.jsx)("td",{className:"text-right",children:(0,t.jsxs)(b.Ct,{variant:e.margem_lucro>=30?"success":e.margem_lucro>=15?"warning":"danger",children:[e.margem_lucro.toFixed(1),"%"]})}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:()=>eJ(e),className:"p-2 rounded-lg text-dark-400 hover:text-blue-400 hover:bg-blue-500/10 transition-colors",title:"Ver hist\xf3rico",children:(0,t.jsx)(h,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>eI(e),className:"p-2 rounded-lg text-dark-400 hover:text-primary-400 hover:bg-primary-500/10 transition-colors",title:"Editar",children:(0,t.jsx)(p.Z,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>eO(e.id),className:"p-2 rounded-lg text-dark-400 hover:text-red-400 hover:bg-red-500/10 transition-colors",title:"Excluir",children:(0,t.jsx)(u.Z,{className:"w-4 h-4"})})]})})]},e.id)})})]})}):(0,t.jsx)(b.ub,{icon:(0,t.jsx)(o.Z,{className:"w-10 h-10 text-dark-500"}),title:"Nenhum produto encontrado",description:"Adicione produtos ao estoque",action:(0,t.jsx)(N.z,{onClick:()=>eI(),leftIcon:(0,t.jsx)(c.Z,{className:"w-4 h-4"}),children:"Novo Produto"})})}),(0,t.jsx)(f.u,{isOpen:R,onClose:eG,title:ej?"Editar Produto":"Novo Produto",size:"xl",children:(0,t.jsxs)("form",{onSubmit:eD,className:"space-y-6",children:[ev&&(0,t.jsx)("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:ev}),ef&&(0,t.jsxs)("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/20 text-yellow-400 text-sm flex items-center gap-2",children:[(0,t.jsx)(d.Z,{className:"w-4 h-4"}),ef]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Nome *"}),(0,t.jsx)("input",{type:"text",value:e_.nome,onChange:e=>eP(e.target.value),className:"input w-full",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"C\xf3digo"}),(0,t.jsx)("input",{type:"text",value:e_.codigo,onChange:e=>eq({...e_,codigo:e.target.value}),className:"input w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"GTIN/EAN"}),(0,t.jsx)("input",{type:"text",value:e_.gtin_ean,onChange:e=>eq({...e_,gtin_ean:e.target.value}),className:"input w-full"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"NCM"}),(0,t.jsx)("input",{type:"text",value:e_.ncm,onChange:e=>eq({...e_,ncm:e.target.value}),className:"input w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Unidade"}),(0,t.jsxs)("select",{value:e_.unidade,onChange:e=>eq({...e_,unidade:e.target.value}),className:"input w-full",children:[(0,t.jsx)("option",{value:"UN",children:"UN - Unidade"}),(0,t.jsx)("option",{value:"KG",children:"KG - Quilograma"}),(0,t.jsx)("option",{value:"L",children:"L - Litro"}),(0,t.jsx)("option",{value:"M",children:"M - Metro"}),(0,t.jsx)("option",{value:"M2",children:"M\xb2 - Metro Quadrado"}),(0,t.jsx)("option",{value:"M3",children:"M\xb3 - Metro C\xfabico"}),(0,t.jsx)("option",{value:"CX",children:"CX - Caixa"}),(0,t.jsx)("option",{value:"PC",children:"PC - Pe\xe7a"}),(0,t.jsx)("option",{value:"PAR",children:"PAR - Par"}),(0,t.jsx)("option",{value:"SC",children:"SC - Saco"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Marca"}),(0,t.jsx)("input",{type:"text",value:e_.marca,onChange:e=>eq({...e_,marca:e.target.value}),className:"input w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Peso (Kg)"}),(0,t.jsx)("input",{type:"number",step:"0.001",value:e_.peso_kg,onChange:e=>eq({...e_,peso_kg:Number(e.target.value)}),className:"input w-full"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Categoria"}),(0,t.jsxs)("select",{value:e_.categoria_id||"",onChange:e=>eq({...e_,categoria_id:e.target.value?Number(e.target.value):null}),className:"input w-full",children:[(0,t.jsx)("option",{value:"",children:"Selecione..."}),s.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Classifica\xe7\xe3o Fiscal"}),(0,t.jsx)("select",{value:e_.classificacao_fiscal,onChange:e=>eq({...e_,classificacao_fiscal:e.target.value}),className:"input w-full",children:C.map(e=>(0,t.jsxs)("option",{value:e.codigo,children:[e.codigo," - ",e.nome]},e.codigo))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Fornecedor"}),(0,t.jsxs)("select",{value:e_.fornecedor_id||"",onChange:e=>eq({...e_,fornecedor_id:e.target.value?Number(e.target.value):null}),className:"input w-full",children:[(0,t.jsx)("option",{value:"",children:"Selecione..."}),z.map(e=>(0,t.jsx)("option",{value:e.id,children:e.razao_social},e.id))]})]})]}),(0,t.jsxs)("div",{className:"border-t border-dark-700 pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h4",{className:"text-white font-medium",children:"Valores"}),(0,t.jsx)(N.z,{type:"button",variant:"secondary",size:"sm",onClick:()=>{eF({...eE,custo:String(e_.valor_custo||"")}),ee(!0)},leftIcon:(0,t.jsx)(m.Z,{className:"w-4 h-4"}),children:"Formador de Pre\xe7o"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Valor de Custo"}),(0,t.jsx)("input",{type:"number",step:"0.01",value:e_.valor_custo,onChange:e=>eq({...e_,valor_custo:Number(e.target.value)}),className:"input w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Custo M\xe9dio"}),(0,t.jsx)("input",{type:"number",step:"0.01",value:e_.custo_medio,onChange:e=>eq({...e_,custo_medio:Number(e.target.value)}),className:"input w-full bg-dark-700",readOnly:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Valor de Venda"}),(0,t.jsx)("input",{type:"number",step:"0.01",value:e_.valor_venda,onChange:e=>eq({...e_,valor_venda:Number(e.target.value)}),className:"input w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Margem (%)"}),(0,t.jsx)("input",{type:"number",step:"0.1",value:e_.margem_lucro,onChange:e=>eq({...e_,margem_lucro:Number(e.target.value)}),className:"input w-full"})]})]})]}),(0,t.jsxs)("div",{className:"border-t border-dark-700 pt-4",children:[(0,t.jsx)("h4",{className:"text-white font-medium mb-4",children:"Estoque"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Quantidade Atual"}),(0,t.jsx)("input",{type:"number",step:"0.0001",value:e_.quantidade_estoque,onChange:e=>eq({...e_,quantidade_estoque:Number(e.target.value)}),className:"input w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Estoque M\xednimo"}),(0,t.jsx)("input",{type:"number",step:"0.0001",value:e_.estoque_minimo,onChange:e=>eq({...e_,estoque_minimo:Number(e.target.value)}),className:"input w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Estoque M\xe1ximo"}),(0,t.jsx)("input",{type:"number",step:"0.0001",value:e_.estoque_maximo,onChange:e=>eq({...e_,estoque_maximo:Number(e.target.value)}),className:"input w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Localiza\xe7\xe3o"}),(0,t.jsx)("input",{type:"text",value:e_.localizacao,onChange:e=>eq({...e_,localizacao:e.target.value}),className:"input w-full",placeholder:"Ex: Prateleira A1"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Descri\xe7\xe3o"}),(0,t.jsx)("textarea",{value:e_.descricao,onChange:e=>eq({...e_,descricao:e.target.value}),className:"input w-full h-24 resize-none"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-700",children:[(0,t.jsx)(N.z,{type:"button",variant:"secondary",onClick:eG,children:"Cancelar"}),(0,t.jsx)(N.z,{type:"submit",disabled:F,children:F?"Salvando...":ej?"Salvar":"Cadastrar"})]})]})}),(0,t.jsx)(f.u,{isOpen:Q,onClose:()=>J(!1),title:"Gerenciar Categorias",size:"lg",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("p",{className:"text-dark-400 text-sm",children:[s.length," categorias cadastradas"]}),(0,t.jsx)(N.z,{size:"sm",onClick:()=>{J(!1),eW()},leftIcon:(0,t.jsx)(c.Z,{className:"w-4 h-4"}),children:"Nova Categoria"})]}),(0,t.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-2",children:s.map(a=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-dark-700/50 hover:bg-dark-700",style:{borderLeft:"4px solid ".concat(a.cor)},children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.cor}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-white font-medium",children:a.nome}),(0,t.jsxs)("span",{className:"text-dark-400 text-sm ml-2",children:["(",e.filter(e=>e.categoria_id===a.id).length," produtos)"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>{J(!1),eW(a)},className:"p-2 rounded-lg text-dark-400 hover:text-primary-400 hover:bg-primary-500/10 transition-colors",title:"Editar",children:(0,t.jsx)(p.Z,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>e0(a.id),className:"p-2 rounded-lg text-dark-400 hover:text-red-400 hover:bg-red-500/10 transition-colors",title:"Excluir",children:(0,t.jsx)(u.Z,{className:"w-4 h-4"})})]})]},a.id))}),(0,t.jsx)("div",{className:"flex justify-end pt-2",children:(0,t.jsx)(N.z,{variant:"secondary",onClick:()=>J(!1),children:"Fechar"})})]})}),(0,t.jsx)(f.u,{isOpen:K,onClose:()=>X(!1),title:eZ?"Editar Categoria":"Nova Categoria",size:"sm",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Nome"}),(0,t.jsx)("input",{type:"text",value:eS.nome,onChange:e=>ez({...eS,nome:e.target.value}),className:"input w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Descri\xe7\xe3o"}),(0,t.jsx)("input",{type:"text",value:eS.descricao,onChange:e=>ez({...eS,descricao:e.target.value}),className:"input w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Cor"}),(0,t.jsx)("input",{type:"color",value:eS.cor,onChange:e=>ez({...eS,cor:e.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,t.jsx)(N.z,{variant:"secondary",onClick:()=>X(!1),children:"Cancelar"}),(0,t.jsx)(N.z,{onClick:eY,children:"Salvar"})]})]})}),(0,t.jsx)(f.u,{isOpen:$,onClose:()=>W(!1),title:"Hist\xf3rico - ".concat(null==ew?void 0:ew.nome),size:"lg",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"glass-card p-3",children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Estoque Atual"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-white",children:[null==ew?void 0:ew.quantidade_estoque," ",null==ew?void 0:ew.unidade]})]}),(0,t.jsxs)("div",{className:"glass-card p-3",children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Custo M\xe9dio"}),(0,t.jsx)("p",{className:"text-xl font-bold text-white",children:(0,w.xG)((null==ew?void 0:ew.custo_medio)||0)})]}),(0,t.jsxs)("div",{className:"glass-card p-3",children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"\xdaltima Compra"}),(0,t.jsx)("p",{className:"text-xl font-bold text-white",children:(0,w.xG)((null==ew?void 0:ew.custo_ultima_compra)||0)})]})]}),ek.length>0?(0,t.jsx)("div",{className:"overflow-x-auto max-h-96",children:(0,t.jsxs)("table",{className:"data-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Data"}),(0,t.jsx)("th",{children:"Tipo"}),(0,t.jsx)("th",{className:"text-right",children:"Quantidade"}),(0,t.jsx)("th",{className:"text-right",children:"Valor Unit."}),(0,t.jsx)("th",{children:"Motivo"})]})}),(0,t.jsx)("tbody",{children:ek.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:new Date(e.data_movimentacao).toLocaleDateString("pt-BR")}),(0,t.jsx)("td",{children:(0,t.jsx)(b.Ct,{variant:"entrada"===e.tipo?"success":"saida"===e.tipo?"danger":"warning",children:e.tipo})}),(0,t.jsxs)("td",{className:"text-right font-medium",children:["saida"===e.tipo?"-":"+",e.quantidade]}),(0,t.jsx)("td",{className:"text-right",children:(0,w.xG)(e.valor_unitario||0)}),(0,t.jsx)("td",{className:"text-dark-400",children:e.motivo||"-"})]},e.id))})]})}):(0,t.jsx)("p",{className:"text-center text-dark-400 py-8",children:"Nenhuma movimenta\xe7\xe3o registrada"})]})}),(0,t.jsx)(f.u,{isOpen:Y,onClose:()=>ee(!1),title:"Formador de Pre\xe7o",size:"sm",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Custo do Produto (R$)"}),(0,t.jsx)("input",{type:"number",step:"0.01",value:eE.custo,onChange:e=>eF({...eE,custo:e.target.value}),className:"input w-full",placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Impostos (%)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"number",step:"0.1",value:eE.impostos,onChange:e=>eF({...eE,impostos:e.target.value}),className:"input w-full pr-8",placeholder:"0"}),(0,t.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-dark-400",children:"%"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Frete (%)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"number",step:"0.1",value:eE.frete,onChange:e=>eF({...eE,frete:e.target.value}),className:"input w-full pr-8",placeholder:"0"}),(0,t.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-dark-400",children:"%"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Outros (%)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"number",step:"0.1",value:eE.outros,onChange:e=>eF({...eE,outros:e.target.value}),className:"input w-full pr-8",placeholder:"0"}),(0,t.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-dark-400",children:"%"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Margem de Lucro (%)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"number",step:"0.1",value:eE.margem,onChange:e=>eF({...eE,margem:e.target.value}),className:"input w-full pr-8"}),(0,t.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-dark-400",children:"%"})]})]}),(0,t.jsxs)("div",{className:"border-t border-dark-700 pt-4 space-y-2",children:[parseFloat(eE.custo)>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Custo Base:"}),(0,t.jsx)("span",{className:"text-white",children:(0,w.xG)(parseFloat(eE.custo)||0)})]}),parseFloat(eE.impostos)>0&&(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsxs)("span",{className:"text-dark-400",children:["+ Impostos (",eE.impostos,"%):"]}),(0,t.jsx)("span",{className:"text-white",children:(0,w.xG)(e$().valorImpostos)})]}),parseFloat(eE.frete)>0&&(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsxs)("span",{className:"text-dark-400",children:["+ Frete (",eE.frete,"%):"]}),(0,t.jsx)("span",{className:"text-white",children:(0,w.xG)(e$().valorFrete)})]}),parseFloat(eE.outros)>0&&(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsxs)("span",{className:"text-dark-400",children:["+ Outros (",eE.outros,"%):"]}),(0,t.jsx)("span",{className:"text-white",children:(0,w.xG)(e$().valorOutros)})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-dark-700",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Custo Total:"}),(0,t.jsx)("span",{className:"text-white font-medium",children:(0,w.xG)(e$().custoTotal)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Pre\xe7o de Venda Sugerido:"}),(0,t.jsx)("span",{className:"text-green-400 font-bold text-lg",children:(0,w.xG)(e$().precoVenda)})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,t.jsx)(N.z,{variant:"secondary",onClick:()=>ee(!1),children:"Cancelar"}),(0,t.jsx)(N.z,{onClick:()=>{let{precoVenda:e}=e$(),a=parseFloat(eE.custo)||0,s=parseFloat(eE.margem)||0;eq({...e_,valor_custo:a,valor_venda:Number(e.toFixed(2)),margem_lucro:s}),ee(!1)},children:"Aplicar"})]})]})}),(0,t.jsx)(f.u,{isOpen:ea,onClose:eQ,title:"Importar Produtos",size:"xl",children:(0,t.jsxs)("div",{className:"space-y-6",children:["select"===eu&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"p-4 bg-dark-700/50 rounded-lg",children:[(0,t.jsx)("h4",{className:"text-white font-medium mb-2",children:"Formato do arquivo CSV"}),(0,t.jsx)("p",{className:"text-dark-400 text-sm mb-3",children:"O arquivo deve conter as colunas separadas por v\xedrgula (,) ou ponto e v\xedrgula (;):"}),(0,t.jsx)("div",{className:"text-xs text-dark-500 font-mono bg-dark-800 p-3 rounded overflow-x-auto",children:"C\xf3digo;Tipo;Nome;Fornecedor;ID Fornec;Marca;Est.Min;Est.Max;Est.Atual;Unidade;Variado;Valor Venda;Valor Custo;..."})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-dark-600 rounded-lg hover:border-primary-500 transition-colors",children:[(0,t.jsx)("input",{ref:ep,type:"file",accept:".csv,.txt",onChange:eR,className:"hidden"}),(0,t.jsx)(r.Z,{className:"w-12 h-12 text-dark-400 mb-4"}),(0,t.jsx)("p",{className:"text-dark-300 mb-4",children:"Selecione o arquivo CSV para importar"}),(0,t.jsx)(N.z,{onClick:()=>{var e;return null===(e=ep.current)||void 0===e?void 0:e.click()},leftIcon:(0,t.jsx)(j.Z,{className:"w-4 h-4"}),children:"Selecionar Arquivo"})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t border-dark-700",children:(0,t.jsx)(N.z,{variant:"secondary",onClick:eQ,children:"Cancelar"})})]}),"preview"===eu&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-white font-medium",children:"Revis\xe3o dos dados"}),(0,t.jsxs)("p",{className:"text-dark-400 text-sm",children:[em.filter(e=>e.selected).length," de ",em.length," itens selecionados",em.filter(e=>e.isDuplicate).length>0&&(0,t.jsxs)("span",{className:"text-yellow-400 ml-2",children:["(",em.filter(e=>e.isDuplicate).length," duplicados)"]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(N.z,{variant:"secondary",size:"sm",onClick:()=>eX(!0),children:"Selecionar Todos"}),(0,t.jsx)(N.z,{variant:"secondary",size:"sm",onClick:()=>eX(!1),children:"Desmarcar Todos"})]})]}),(0,t.jsx)("div",{className:"max-h-96 overflow-y-auto border border-dark-700 rounded-lg",children:(0,t.jsxs)("table",{className:"data-table",children:[(0,t.jsx)("thead",{className:"sticky top-0 bg-dark-800 z-10",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"w-10"}),(0,t.jsx)("th",{children:"Linha"}),(0,t.jsx)("th",{children:"C\xf3digo"}),(0,t.jsx)("th",{children:"Nome"}),(0,t.jsx)("th",{children:"Marca"}),(0,t.jsx)("th",{className:"text-right",children:"Custo"}),(0,t.jsx)("th",{className:"text-right",children:"Venda"}),(0,t.jsx)("th",{className:"text-right",children:"Estoque"}),(0,t.jsx)("th",{children:"Status"})]})}),(0,t.jsx)("tbody",{children:em.map((e,a)=>(0,t.jsxs)("tr",{className:"".concat(e.isDuplicate?"bg-yellow-500/5":""," ").concat(e.selected?"":"opacity-50"),children:[(0,t.jsx)("td",{children:(0,t.jsx)("input",{type:"checkbox",checked:e.selected,onChange:()=>eK(a),className:"w-4 h-4 rounded text-primary-500"})}),(0,t.jsx)("td",{className:"text-dark-400",children:e.linha}),(0,t.jsx)("td",{className:"text-dark-300 font-mono text-sm",children:e.data.codigo||"-"}),(0,t.jsx)("td",{className:"text-white",children:e.data.nome||(0,t.jsx)("span",{className:"text-red-400",children:"Nome vazio"})}),(0,t.jsx)("td",{className:"text-dark-400",children:e.data.marca||"-"}),(0,t.jsx)("td",{className:"text-right text-dark-300",children:(0,w.xG)(e.data.valor_custo)}),(0,t.jsx)("td",{className:"text-right text-green-400",children:(0,w.xG)(e.data.valor_venda)}),(0,t.jsxs)("td",{className:"text-right text-white",children:[e.data.quantidade_estoque," ",e.data.unidade]}),(0,t.jsx)("td",{children:e.isDuplicate?(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(d.Z,{className:"w-4 h-4 text-yellow-400"}),(0,t.jsx)("span",{className:"text-yellow-400 text-xs",title:e.duplicateReason,children:"Duplicado"})]}):e.data.nome?(0,t.jsx)(v.Z,{className:"w-4 h-4 text-green-400"}):(0,t.jsx)(g.Z,{className:"w-4 h-4 text-red-400"})})]},a))})]})}),em.some(e=>e.isDuplicate)&&(0,t.jsx)("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:(0,t.jsxs)("p",{className:"text-yellow-400 text-sm flex items-center gap-2",children:[(0,t.jsx)(d.Z,{className:"w-4 h-4"}),"Itens duplicados foram automaticamente desmarcados. Voc\xea pode selecion\xe1-los manualmente se desejar."]})}),(0,t.jsxs)("div",{className:"flex justify-between pt-4 border-t border-dark-700",children:[(0,t.jsx)(N.z,{variant:"secondary",onClick:()=>{eh("select"),ex([])},children:"Voltar"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(N.z,{variant:"secondary",onClick:eQ,children:"Cancelar"}),(0,t.jsx)(N.z,{onClick:eB,disabled:ec||0===em.filter(e=>e.selected).length,leftIcon:ec?(0,t.jsx)(b.TK,{size:"sm"}):(0,t.jsx)(v.Z,{className:"w-4 h-4"}),children:ec?"Importando...":"Importar ".concat(em.filter(e=>e.selected).length," itens")})]})]})]}),"result"===eu&&en&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-green-500/10 rounded-lg flex-1",children:[(0,t.jsx)(v.Z,{className:"w-6 h-6 text-green-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-green-400 font-bold text-xl",children:en.success}),(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Importados com sucesso"})]})]}),en.errors.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-red-500/10 rounded-lg flex-1",children:[(0,t.jsx)(g.Z,{className:"w-6 h-6 text-red-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-red-400 font-bold text-xl",children:en.errors.length}),(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Erros encontrados"})]})]})]}),en.errors.length>0&&(0,t.jsxs)("div",{className:"max-h-48 overflow-y-auto bg-dark-800 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm mb-2",children:"Detalhes dos erros:"}),en.errors.slice(0,50).map((e,a)=>(0,t.jsxs)("p",{className:"text-red-400 text-xs mb-1",children:["Linha ",e.linha,": ",e.erro]},a)),en.errors.length>50&&(0,t.jsxs)("p",{className:"text-dark-500 text-xs mt-2",children:["... e mais ",en.errors.length-50," erros"]})]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t border-dark-700",children:(0,t.jsx)(N.z,{onClick:eQ,children:"Fechar"})})]})]})}),(0,t.jsx)(k.i,{isOpen:et,onClose:()=>el(!1),fornecedorId:er})]})}}},function(e){e.O(0,[149,985,900,548,971,938,744],function(){return e(e.s=2088)}),_N_E=e.O()}]);