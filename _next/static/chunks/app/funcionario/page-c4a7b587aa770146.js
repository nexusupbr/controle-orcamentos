(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[852],{83523:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(62898).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},9224:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(62898).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},78083:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(62898).Z)("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]])},64891:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(62898).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},4322:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(62898).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},9883:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(62898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},92295:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(62898).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},41827:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(62898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},92851:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(62898).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},82549:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(62898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},31309:function(e,t,a){Promise.resolve().then(a.bind(a,86291))},86291:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z}});var s=a(57437),r=a(2265),n=a(11981),l=a(67972),i=a(5589),c=a(81097),d=a(41827),o=a(78083),u=a(9224),m=a(83523),h=a(4322),x=a(64891),f=a(9883),p=a(92295),j=a(66651),v=a(70492),y=a(548),b=a(14958),N=a(83779),g=a(16691),w=a.n(g),k=a(22169);function Z(){let{usuario:e,loading:t,authEnabled:a}=(0,N.a)(),[g,Z]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[M,z]=(0,r.useState)(""),[E,L]=(0,r.useState)(!1),{login:q}=(0,N.a)(),[_,P]=(0,r.useState)([]),[K,O]=(0,r.useState)([]),[T,A]=(0,r.useState)(!0),[H,I]=(0,r.useState)(""),[F,V]=(0,r.useState)(null),[D,Q]=(0,r.useState)(!1),[B,R]=(0,r.useState)(null),[U,X]=(0,r.useState)([]),[Y,G]=(0,r.useState)(!1),[J,W]=(0,r.useState)(!1),[$,ee]=(0,r.useState)({}),et=a&&null!==e;(0,r.useEffect)(()=>{et&&es()},[et]);let ea=async e=>{e.preventDefault(),z(""),L(!0);try{await q(g,C)||z("Email ou senha inv\xe1lidos")}catch(e){z("Erro ao fazer login. Tente novamente.")}finally{L(!1)}},es=async()=>{try{A(!0);let[e,t]=await Promise.all([(0,b.uY)(),(0,b.SE)()]);P(e),O(t)}catch(e){console.error("Erro ao carregar dados:",e)}finally{A(!1)}},er=_.filter(e=>{var t;return e.nome.toLowerCase().includes(H.toLowerCase())||(null===(t=e.descricao)||void 0===t?void 0:t.toLowerCase().includes(H.toLowerCase()))}),en=async e=>{R(e),Q(!0),G(!0);try{let t=await (0,b.Qf)(e.id);X(t);let a={};t.forEach(e=>{a[e.material_id]=e.quantidade}),K.forEach(e=>{e.id in a||(a[e.id]=0)}),ee(a)}catch(e){console.error("Erro ao carregar materiais da obra:",e)}finally{G(!1)}},el=()=>{Q(!1),R(null),X([]),ee({})},ei=(e,t)=>{ee(a=>({...a,[e]:Math.max(0,(a[e]||0)+t)}))},ec=(e,t)=>{let a=parseInt(t)||0;ee(t=>({...t,[e]:Math.max(0,a)}))},ed=async()=>{if(B){W(!0);try{let e=Object.entries($).map(e=>{let[t,a]=e;return(0,b.zM)({obra_id:B.id,material_id:Number(t),quantidade:a})});await Promise.all(e),el()}catch(e){console.error("Erro ao salvar:",e),alert("Erro ao salvar quantidades")}finally{W(!1)}}};return t?(0,s.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,s.jsx)(y.TK,{size:"lg"})}):et?T?(0,s.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,s.jsx)(y.TK,{size:"lg"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold font-heading text-white",children:"Obras em Andamento"}),(0,s.jsx)("p",{className:"text-dark-400 mt-1",children:"Selecione uma obra para registrar materiais utilizados"})]}),(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar obra...",value:H,onChange:e=>I(e.target.value),className:"input pl-12 w-full"})]})}),er.length>0?(0,s.jsx)("div",{className:"space-y-4",children:er.map(e=>(0,s.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-dark-700/30 transition-colors",onClick:()=>V(F===e.id?null:e.id),children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-accent-500/10 flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"w-6 h-6 text-accent-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-white",children:e.nome}),e.descricao&&(0,s.jsx)("p",{className:"text-sm text-dark-400 mt-0.5",children:e.descricao})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(y.Ct,{variant:"success",children:"Em Andamento"}),F===e.id?(0,s.jsx)(u.Z,{className:"w-5 h-5 text-dark-400"}):(0,s.jsx)(m.Z,{className:"w-5 h-5 text-dark-400"})]})]}),F===e.id&&(0,s.jsx)("div",{className:"px-4 pb-4 pt-2 border-t border-dark-700",children:(0,s.jsx)(j.z,{onClick:t=>{t.stopPropagation(),en(e)},leftIcon:(0,s.jsx)(h.Z,{className:"w-4 h-4"}),className:"w-full sm:w-auto",children:"Registrar Materiais"})})]},e.id))}):(0,s.jsx)("div",{className:"glass-card",children:(0,s.jsx)(y.ub,{icon:(0,s.jsx)(o.Z,{className:"w-10 h-10 text-dark-500"}),title:"Nenhuma obra em andamento",description:"N\xe3o h\xe1 obras ativas no momento"})}),(0,s.jsx)(v.u,{isOpen:D,onClose:el,title:"Materiais - ".concat((null==B?void 0:B.nome)||""),size:"lg",children:Y?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(y.TK,{size:"lg"})}):(0,s.jsx)("div",{className:"space-y-4",children:K.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-3 pr-2",children:K.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-dark-700/50 border border-dark-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary-500/10 flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"w-5 h-5 text-primary-400"})}),(0,s.jsx)("span",{className:"font-medium text-white",children:e.nome})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>ei(e.id,-1),className:"w-8 h-8 rounded-lg bg-dark-600 hover:bg-dark-500 flex items-center justify-center text-white transition-colors",children:(0,s.jsx)(x.Z,{className:"w-4 h-4"})}),(0,s.jsx)("input",{type:"number",min:"0",value:$[e.id]||0,onChange:t=>ec(e.id,t.target.value),className:"w-16 h-8 text-center rounded-lg bg-dark-600 border border-dark-500 text-white text-sm focus:outline-none focus:border-primary-500"}),(0,s.jsx)("button",{type:"button",onClick:()=>ei(e.id,1),className:"w-8 h-8 rounded-lg bg-dark-600 hover:bg-dark-500 flex items-center justify-center text-white transition-colors",children:(0,s.jsx)(f.Z,{className:"w-4 h-4"})})]})]},e.id))}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-700",children:[(0,s.jsx)(j.z,{type:"button",variant:"secondary",onClick:el,children:"Cancelar"}),(0,s.jsx)(j.z,{onClick:ed,isLoading:J,leftIcon:(0,s.jsx)(p.Z,{className:"w-4 h-4"}),children:"Salvar Quantidades"})]})]}):(0,s.jsx)(y.ub,{icon:(0,s.jsx)(h.Z,{className:"w-10 h-10 text-dark-500"}),title:"Nenhum material cadastrado",description:"Solicite ao administrador para cadastrar materiais"})})})]}):(0,s.jsx)("div",{className:"min-h-[80vh] flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl overflow-hidden shadow-glow mb-4",children:(0,s.jsx)(w(),{src:(0,k.K3)("/images/logo.jpeg"),alt:"Logo",width:80,height:80,className:"w-full h-full object-cover"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-white font-heading",children:"\xc1rea do Funcion\xe1rio"}),(0,s.jsx)("p",{className:"text-dark-400 mt-1",children:"Fa\xe7a login para acessar as obras"})]}),(0,s.jsx)("div",{className:"glass-card p-8",children:(0,s.jsxs)("form",{onSubmit:ea,className:"space-y-6",children:[M&&(0,s.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:[(0,s.jsx)(n.Z,{className:"w-4 h-4 flex-shrink-0"}),M]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),(0,s.jsx)("input",{type:"email",placeholder:"Email",value:g,onChange:e=>Z(e.target.value),required:!0,className:"input pl-12 w-full"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),(0,s.jsx)("input",{type:"password",placeholder:"Senha",value:C,onChange:e=>S(e.target.value),required:!0,className:"input pl-12 w-full"})]})]}),(0,s.jsx)(j.z,{type:"submit",className:"w-full",isLoading:E,leftIcon:(0,s.jsx)(c.Z,{className:"w-5 h-5"}),children:"Entrar"})]})})]})})}},548:function(e,t,a){"use strict";a.d(t,{Ct:function(){return c},TK:function(){return i},ub:function(){return l}});var s=a(57437),r=a(22169),n=a(92851);function l(e){let{icon:t,title:a,description:r,action:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-dark-800 flex items-center justify-center mb-6",children:t||(0,s.jsx)(n.Z,{className:"w-10 h-10 text-dark-500"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:a}),r&&(0,s.jsx)("p",{className:"text-dark-400 max-w-sm mb-6",children:r}),l]})}function i(e){let{size:t="md"}=e;return(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:(0,r.cn)("rounded-full border-dark-700 border-t-primary-500 animate-spin",{sm:"w-6 h-6 border-2",md:"w-10 h-10 border-3",lg:"w-16 h-16 border-4"}[t])})})}function c(e){let{children:t,variant:a="success",size:n="md",className:l}=e;return(0,s.jsx)("span",{className:(0,r.cn)("badge",{success:"badge-success",danger:"badge-danger",warning:"badge-warning",info:"badge-info",primary:"badge-info",secondary:"bg-dark-600 text-dark-300"}[a],{sm:"text-xs px-1.5 py-0.5",md:"text-xs px-2 py-1",lg:"text-sm px-3 py-1.5"}[n],l),children:t})}},70492:function(e,t,a){"use strict";a.d(t,{u:function(){return i}});var s=a(57437),r=a(82549),n=a(2265),l=a(22169);function i(e){let{isOpen:t,onClose:a,title:i,children:c,size:d="md"}=e;return((0,n.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t)?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:a}),(0,s.jsxs)("div",{className:(0,l.cn)("relative w-full bg-dark-900 border border-dark-700 rounded-2xl shadow-2xl animate-slide-up",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[d]),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-700",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white",children:i}),(0,s.jsx)("button",{onClick:a,className:"p-2 rounded-xl text-dark-400 hover:text-white hover:bg-dark-800 transition-colors",children:(0,s.jsx)(r.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"px-6 py-6 max-h-[70vh] overflow-y-auto scrollbar-thin",children:c})]})]}):null}}},function(e){e.O(0,[149,985,691,675,971,938,744],function(){return e(e.s=31309)}),_N_E=e.O()}]);