(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97],{11981:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},72894:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},13008:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},83523:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},17158:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6141:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},35817:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},41310:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},94136:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},15713:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]])},92295:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},31541:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},7669:function(e,a,t){Promise.resolve().then(t.bind(t,25977))},25977:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return X}});var s=t(57437),r=t(2265),l=t(35817),i=t(31541),n=t(62898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,n.Z)("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);var c=t(11961),o=t(9883),x=t(85790),m=t(74522),h=t(41298),u=t(76637),p=t(41827),j=t(45367),g=t(83523),v=t(17158),N=t(41310),f=t(92295),b=t(82549),y=t(94136),k=t(15713),w=t(13008),_=t(6141);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let C=(0,n.Z)("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);var S=t(22812),F=t(72894),E=t(11981),Z=t(66651),z=t(70492),D=t(548),T=t(40971),I=t(87431),O=t(22169),M=t(45253),A=t(44909),L=t(16573),V=t(24235),q=t(50039),R=t(86812),B=t(31346),G=t(57703),P=t(28485),H=t(36612);let K=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"];function X(){var e,a,t;let[n,X]=(0,r.useState)(!0),[Y,U]=(0,r.useState)(!1),[W,J]=(0,r.useState)([]),[$,Q]=(0,r.useState)([]),[ee,ea]=(0,r.useState)([]),[et,es]=(0,r.useState)([]),[er,el]=(0,r.useState)(""),[ei,en]=(0,r.useState)("mes"),[ed,ec]=(0,r.useState)("todos"),[eo,ex]=(0,r.useState)(null),[em,eh]=(0,r.useState)(null),[eu,ep]=(0,r.useState)(""),[ej,eg]=(0,r.useState)(""),[ev,eN]=(0,r.useState)("todos"),[ef,eb]=(0,r.useState)(!1),[ey,ek]=(0,r.useState)(!1),[ew,e_]=(0,r.useState)(!1),[eC,eS]=(0,r.useState)(!1),[eF,eE]=(0,r.useState)(null),[eZ,ez]=(0,r.useState)(!1),[eD,eT]=(0,r.useState)(null),[eI,eO]=(0,r.useState)(!1),[eM,eA]=(0,r.useState)(new Set),[eL,eV]=(0,r.useState)(!1),[eq,eR]=(0,r.useState)(!1),[eB,eG]=(0,r.useState)({current:0,total:0,errors:0}),[eP,eH]=(0,r.useState)(!1),[eK,eX]=(0,r.useState)(!1),[eY,eU]=(0,r.useState)(!1),[eW,eJ]=(0,r.useState)(!1),[e$,eQ]=(0,r.useState)(null),[e0,e1]=(0,r.useState)(null),[e2,e4]=(0,r.useState)(null),[e5,e3]=(0,r.useState)(null),[e6,e7]=(0,r.useState)({tipo:"entrada",valor:0,data:new Date().toISOString().split("T")[0],descricao:"",categoria_id:null,conta_bancaria_id:null,venda_id:null,numero_nf:"",observacoes:""}),[e8,e9]=(0,r.useState)({numero_cte:"",chave_cte:"",valor_frete:0,data:new Date().toISOString().split("T")[0],transportadora:"",observacoes:"",categoria_id:null,conta_bancaria_id:null}),[ae,aa]=(0,r.useState)([]),[at,as]=(0,r.useState)({}),[ar,al]=(0,r.useState)(null),[ai,an]=(0,r.useState)([]),[ad,ac]=(0,r.useState)(!1),[ao,ax]=(0,r.useState)(new Set),[am,ah]=(0,r.useState)(!1),[au,ap]=(0,r.useState)(new Set),[aj,ag]=(0,r.useState)(!1),[av,aN]=(0,r.useState)([]),[af,ab]=(0,r.useState)(!1),[ay,ak]=(0,r.useState)(null),[aw,a_]=(0,r.useState)(null),[aC,aS]=(0,r.useState)(null),[aF,aE]=(0,r.useState)(!1),[aZ,az]=(0,r.useState)(!1),[aD,aT]=(0,r.useState)([]),[aI,aO]=(0,r.useState)(!1),aM=(0,r.useRef)({}),aA=(0,r.useRef)({}),aL=(0,r.useRef)(null);(0,r.useEffect)(()=>{aq(!0),aV()},[]);let aV=()=>{let e=new Date;ep(new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0]),eg(e.toISOString().split("T")[0])},aq=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(X(!0),e){let e=await (0,I.Dr)();e.mesclados>0&&console.log("✅ ".concat(e.mesclados," duplicado(s) reconciliado(s) automaticamente"))}let[a,t,s,r]=await Promise.all([(0,I.j7)(),(0,I.SJ)(),(0,I.i1)(),(0,I.Yz)()]);J(a),Q(t),ea(s),es(r)}catch(e){console.error("Erro ao carregar dados:",e)}finally{X(!1)}},{start:aR,end:aB}=(()=>{let e=new Date,a=new Date,t=e;switch(ei){case"dia":a=new Date(e.getFullYear(),e.getMonth(),e.getDate());break;case"semana":a=new Date(e.getFullYear(),e.getMonth(),e.getDate()-7);break;case"mes":a=new Date(e.getFullYear(),e.getMonth(),1);break;case"ano":a=new Date(e.getFullYear(),0,1);break;case"personalizado":a=eu?new Date(eu):a,t=ej?new Date(ej):t}return{start:a,end:t}})(),aG=W.filter(e=>{var a;let t=new Date(e.data_lancamento),s=null===(a=e.descricao)||void 0===a?void 0:a.toLowerCase().includes(er.toLowerCase()),r="todos"===ed||e.tipo===ed||"entrada"===ed&&"receita"===e.tipo||"saida"===ed&&"despesa"===e.tipo,l=!eo||e.categoria_id===eo,i=!em||e.conta_id===em,n="todos"===ev||"com_nf"===ev&&e.com_nota_fiscal||"sem_nf"===ev&&!e.com_nota_fiscal;return t>=aR&&t<=aB&&s&&r&&l&&i&&n}),aP=aG.filter(e=>"receita"===e.tipo||"entrada"===e.tipo).reduce((e,a)=>e+a.valor,0),aH=aG.filter(e=>"despesa"===e.tipo||"saida"===e.tipo).reduce((e,a)=>e+a.valor,0),aK=aP-aH,aX=$.map(e=>{let a=aG.filter(a=>a.categoria_id===e.id).reduce((e,a)=>e+("saida"===a.tipo||"despesa"===a.tipo?a.valor:0),0);return{name:e.nome,value:a,cor:e.cor}}).filter(e=>e.value>0),aY=async()=>{if(!e6.data||!e6.valor||!e6.descricao||e6.descricao.length<3){an([]);return}ac(!0);try{let e=(await (0,I.j)({data_lancamento:e6.data,valor:e6.valor,descricao:e6.descricao})).filter(e=>!ao.has(e.id));an(e)}catch(e){console.error("Erro ao buscar semelhantes:",e)}finally{ac(!1)}};(0,r.useEffect)(()=>{let e=setTimeout(()=>{ef&&e6.data&&e6.valor>0&&e6.descricao.length>=3&&aY()},500);return()=>clearTimeout(e)},[e6.data,e6.valor,e6.descricao,ef]);let aU=async e=>{if(e6.data&&e6.valor){ah(!0);try{let a=await (0,I.ZH)({tipo:"entrada"===e6.tipo?"receita":"despesa",valor:e6.valor,data_lancamento:e6.data,descricao:e6.descricao,categoria_id:e6.categoria_id,conta_id:e6.conta_bancaria_id,venda_id:e6.venda_id,observacao:e6.observacoes,conciliado:!1,com_nota_fiscal:!!e6.numero_nf});if(!a){alert("Erro ao criar lan\xe7amento");return}let t=await (0,I.Uu)({principal_id:e,duplicado_id:a.id});t.success?(await aq(),eb(!1),a2(),an([])):alert("Erro ao agrupar: "+t.error)}catch(e){console.error("Erro ao agrupar:",e),alert("Erro ao agrupar lan\xe7amentos")}finally{ah(!1)}}},aW=e=>{ap(a=>{let t=new Set(a);return t.has(e)?t.delete(e):t.add(e),t})},aJ=async e=>{if(confirm("Tem certeza que deseja remover este lan\xe7amento do grupo?"))try{let a=await (0,I.$m)(e);a.success?(await aq(),ap(new Set)):alert("Erro ao desagrupar: "+a.error)}catch(e){console.error("Erro ao desagrupar:",e),alert("Erro ao desagrupar lan\xe7amento")}},a$=async()=>{ab(!0),ag(!0);try{let e=await (0,I.wQ)(30);aN(e)}catch(e){console.error("Erro ao detectar duplicados:",e),alert("Erro ao buscar duplicados")}finally{ab(!1)}},aQ=async(e,a,t)=>{ak(e);try{let s=await (0,I.TL)({lancamentoNFId:e,lancamentoOFXId:a,acao:t});s.success?(aN(a=>a.filter(a=>a.lancamentoComNF.id!==e)),await aq()):alert("Erro: "+s.error)}catch(e){console.error("Erro ao mesclar:",e),alert("Erro ao processar")}finally{ak(null)}},a0=async e=>{e.preventDefault(),U(!0);try{await (0,I.ZH)({tipo:"entrada"===e6.tipo?"receita":"despesa",valor:e6.valor,data_lancamento:e6.data,descricao:e6.descricao,categoria_id:e6.categoria_id,conta_id:e6.conta_bancaria_id,venda_id:e6.venda_id,observacao:e6.observacoes,conciliado:!1,com_nota_fiscal:!!e6.numero_nf}),await aq(),eb(!1),a2()}catch(e){console.error("Erro ao salvar:",e),alert("Erro ao salvar lan\xe7amento")}finally{U(!1)}},a1=async e=>{e.preventDefault(),U(!0);try{if(e8.chave_cte&&await (0,I.jk)(e8.chave_cte)){alert("Este CT-e j\xe1 foi lan\xe7ado!"),U(!1);return}await (0,I.ZH)({tipo:"despesa",valor:e8.valor_frete,data_lancamento:e8.data,descricao:"Frete CT-e ".concat(e8.numero_cte," - ").concat(e8.transportadora),categoria_id:e8.categoria_id,conta_id:e8.conta_bancaria_id,ofx_fitid:e8.chave_cte,observacao:e8.observacoes,conciliado:!1,com_nota_fiscal:!0}),await aq(),ek(!1),e9({numero_cte:"",chave_cte:"",valor_frete:0,data:new Date().toISOString().split("T")[0],transportadora:"",observacoes:"",categoria_id:null,conta_bancaria_id:null})}catch(e){console.error("Erro ao salvar:",e),alert("Erro ao salvar lan\xe7amento de frete")}finally{U(!1)}},a2=()=>{e7({tipo:"entrada",valor:0,data:new Date().toISOString().split("T")[0],descricao:"",categoria_id:null,conta_bancaria_id:null,venda_id:null,numero_nf:"",observacoes:""}),an([]),ax(new Set)},a4=async()=>{if(eF){eO(!0),eT(null);try{let e=await (0,I.W4)(eF.id);if(!e.canDelete){eT(e.reason||"N\xe3o \xe9 poss\xedvel excluir este lan\xe7amento"),eO(!1);return}await (0,I.as)(eF.id),ez(!1),eS(!1),eE(null),await aq()}catch(e){console.error("Erro ao excluir:",e),eT("Erro ao excluir lan\xe7amento: "+(e instanceof Error?e.message:"Erro desconhecido"))}finally{eO(!1)}}},a5=async(e,a)=>{aE(!0);try{await (0,I.RS)(e,{categoria_id:a}),J(t=>t.map(t=>t.id===e?{...t,categoria_id:a}:t)),(null==eF?void 0:eF.id)===e&&eE(e=>e?{...e,categoria_id:a}:null),a_(null)}catch(e){console.error("Erro ao alterar categoria:",e),alert("Erro ao alterar categoria: "+(e instanceof Error?e.message:"Erro desconhecido"))}finally{aE(!1)}},a3=async()=>{if(!eF)return;eT(null);let e=await (0,I.W4)(eF.id);e.canDelete||eT(e.reason||"N\xe3o \xe9 poss\xedvel excluir este lan\xe7amento"),ez(!0)},a6=e=>{let a=new Set(Array.from(eM));a.has(e)?a.delete(e):a.add(e),eA(a)},a7=async()=>{if(0===eM.size)return;eR(!0),eG({current:0,total:eM.size,errors:0});let e=0,a=0;for(let t of Array.from(eM)){try{(await (0,I.W4)(t)).canDelete?await (0,I.as)(t):e++}catch(a){console.error("Erro ao excluir lan\xe7amento ".concat(t,":"),a),e++}eG({current:++a,total:eM.size,errors:e})}eR(!1),eV(!1),eA(new Set),await aq(),e>0&&alert("Exclus\xe3o conclu\xedda. ".concat(a-e," exclu\xeddos, ").concat(e," erros (lan\xe7amentos vinculados ou conciliados)."))},a8=async e=>{var a,t,s,r,l,i;let n=null===(a=e.target.files)||void 0===a?void 0:a[0];if(n){al(null);try{let e=await n.text(),a=[],d=e.match(/<STMTTRN>([\s\S]*?)<\/STMTTRN>/g)||[],c=new Set;for(let e of d){let n=null===(t=e.match(/<TRNTYPE>([^<\s]+)/))||void 0===t?void 0:t[1],d=null===(s=e.match(/<DTPOSTED>(\d+)/))||void 0===s?void 0:s[1],o=null===(r=e.match(/<TRNAMT>([\d.-]+)/))||void 0===r?void 0:r[1],x=null===(l=e.match(/<FITID>([^<\s]+)/))||void 0===l?void 0:l[1],m=null===(i=e.match(/<MEMO>([^<]+)/))||void 0===i?void 0:i[1];if(d&&o&&x){let e=x.replace(/[<>\/]/g,"").trim();if(c.has(e))continue;c.add(e);let t=await (0,I.jk)(e);a.push({id:e,tipo:Number(o)>=0?"entrada":"saida",valor:Math.abs(Number(o)),data:"".concat(d.slice(0,4),"-").concat(d.slice(4,6),"-").concat(d.slice(6,8)),descricao:m||n,duplicado:t,metodoDuplicacao:t?"fitid":null})}}aa(a),e_(!0)}catch(e){console.error("Erro ao processar OFX:",e),alert("Erro ao processar arquivo OFX")}}},a9=async()=>{if(az(!0),al(null),!em){aO(!0),setTimeout(()=>{var e,a;null===(e=aL.current)||void 0===e||e.focus(),null===(a=aL.current)||void 0===a||a.scrollIntoView({behavior:"smooth",block:"center"})},100);return}aO(!1);let e=ae.filter(e=>!e.duplicado),a=e.filter(e=>!at[e.id]);if(a.length>0){let e=a.map(e=>e.id);aT(e),setTimeout(()=>{let a=e[0],t=aM.current[a],s=aA.current[a];t&&t.scrollIntoView({behavior:"smooth",block:"center"}),s&&setTimeout(()=>s.focus(),300)},100);return}U(!0);let t={importados:0,duplicadosFitid:0,duplicadosFingerprint:0,erros:0,detalhes:[]};try{for(let a of e){let e=at[a.id];if(!e){t.erros++,t.detalhes.push({descricao:a.descricao,status:"erro",mensagem:"Categoria n\xe3o definida"});continue}let s=await (0,I.T6)({fitid:a.id,contaId:em,data:a.data,valor:a.valor,descricao:a.descricao});if(s.duplicado){"fitid"===s.metodo?(t.duplicadosFitid++,t.detalhes.push({descricao:a.descricao,status:"duplicado_fitid",mensagem:"J\xe1 existe (FITID: ".concat(a.id,")")})):(t.duplicadosFingerprint++,t.detalhes.push({descricao:a.descricao,status:"duplicado_fingerprint",mensagem:"Transa\xe7\xe3o similar j\xe1 existe"}));continue}try{await (0,I.ZH)({conta_id:em,tipo:"entrada"===a.tipo?"receita":"despesa",valor:a.valor,data_lancamento:a.data,descricao:a.descricao,categoria_id:e,ofx_fitid:a.id,ofx_data_importacao:new Date().toISOString(),conciliado:!1,com_nota_fiscal:!1}),t.importados++,t.detalhes.push({descricao:a.descricao,status:"importado"})}catch(e){console.error("Erro ao inserir lan\xe7amento:",e),t.erros++,t.detalhes.push({descricao:a.descricao,status:"erro",mensagem:e instanceof Error?e.message:"Erro desconhecido"})}}al(t),await aq(),0===t.erros&&setTimeout(()=>{e_(!1),aa([]),as({}),az(!1),aT([]),al(null)},3e3)}catch(e){console.error("Erro ao importar:",e),alert("Erro ao importar lan\xe7amentos: "+(e instanceof Error?e.message:"Erro desconhecido"))}finally{U(!1)}},te=(e,a)=>{as(t=>({...t,[e]:a})),aD.includes(e)&&aT(a=>a.filter(a=>a!==e))};return n?(0,s.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,s.jsx)(D.TK,{size:"lg"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold font-heading text-white",children:"Caixa"}),(0,s.jsx)("p",{className:"text-dark-400 mt-1",children:"Controle de fluxo de caixa e movimenta\xe7\xf5es financeiras"})]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsx)(Z.z,{variant:"secondary",onClick:()=>{let e=["Data;Descri\xe7\xe3o;Categoria;Tipo;Valor;NF;Conta",...aG.map(e=>{var a,t;return[(0,O.p6)(e.data_lancamento),e.descricao,(null===(a=$.find(a=>a.id===e.categoria_id))||void 0===a?void 0:a.nome)||"",e.tipo,e.valor.toFixed(2),e.com_nota_fiscal?"Sim":"N\xe3o",(null===(t=ee.find(a=>a.id===e.conta_id))||void 0===t?void 0:t.nome)||""]}).map(e=>e.join(";"))].join("\n"),a=new Blob([e],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(a),t.download="caixa_".concat(new Date().toISOString().split("T")[0],".csv"),t.click()},leftIcon:(0,s.jsx)(l.Z,{className:"w-4 h-4"}),children:"Exportar"}),(0,s.jsx)("input",{type:"file",accept:".ofx",onChange:a8,className:"hidden",id:"ofx-caixa"}),(0,s.jsx)("label",{htmlFor:"ofx-caixa",children:(0,s.jsxs)("span",{className:"btn btn-secondary flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4"}),"Importar OFX"]})}),(0,s.jsx)(Z.z,{variant:"secondary",onClick:a$,leftIcon:(0,s.jsx)(d,{className:"w-4 h-4"}),title:"Detectar lan\xe7amentos duplicados (OFX vs NF)",children:"Duplicados"}),(0,s.jsx)(Z.z,{variant:"secondary",onClick:()=>ek(!0),leftIcon:(0,s.jsx)(c.Z,{className:"w-4 h-4"}),children:"Lan\xe7ar Frete"}),(0,s.jsx)(Z.z,{onClick:()=>eb(!0),leftIcon:(0,s.jsx)(o.Z,{className:"w-4 h-4"}),children:"Novo Lan\xe7amento"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center",children:(0,s.jsx)(x.Z,{className:"w-5 h-5 text-green-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Entradas"}),(0,s.jsx)("p",{className:"text-xl font-bold text-green-400",children:(0,O.xG)(aP)})]})]})}),(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-red-500/20 flex items-center justify-center",children:(0,s.jsx)(m.Z,{className:"w-5 h-5 text-red-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Sa\xeddas"}),(0,s.jsx)("p",{className:"text-xl font-bold text-red-400",children:(0,O.xG)(aH)})]})]})}),(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat(aK>=0?"bg-primary-500/20":"bg-red-500/20"),children:(0,s.jsx)(h.Z,{className:"w-5 h-5 ".concat(aK>=0?"text-primary-400":"text-red-400")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Saldo do Per\xedodo"}),(0,s.jsx)("p",{className:"text-xl font-bold ".concat(aK>=0?"text-primary-400":"text-red-400"),children:(0,O.xG)(aK)})]})]})}),(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center",children:(0,s.jsx)(u.Z,{className:"w-5 h-5 text-blue-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Lan\xe7amentos"}),(0,s.jsx)("p",{className:"text-xl font-bold text-white",children:aG.length})]})]})})]}),(0,s.jsxs)("div",{className:"glass-card p-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,s.jsxs)("div",{className:"relative md:col-span-2",children:[(0,s.jsx)(p.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar...",value:er,onChange:e=>el(e.target.value),className:"input pl-12 w-full"})]}),(0,s.jsxs)("select",{value:ei,onChange:e=>en(e.target.value),className:"input",children:[(0,s.jsx)("option",{value:"dia",children:"Hoje"}),(0,s.jsx)("option",{value:"semana",children:"\xdaltima Semana"}),(0,s.jsx)("option",{value:"mes",children:"Este M\xeas"}),(0,s.jsx)("option",{value:"ano",children:"Este Ano"}),(0,s.jsx)("option",{value:"personalizado",children:"Personalizado"})]}),(0,s.jsxs)("select",{value:ed,onChange:e=>ec(e.target.value),className:"input",children:[(0,s.jsx)("option",{value:"todos",children:"Todos os tipos"}),(0,s.jsx)("option",{value:"entrada",children:"Entradas"}),(0,s.jsx)("option",{value:"saida",children:"Sa\xeddas"})]}),(0,s.jsxs)("select",{value:eo||"",onChange:e=>ex(e.target.value?Number(e.target.value):null),className:"input",children:[(0,s.jsx)("option",{value:"",children:"Todas categorias"}),$.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]}),(0,s.jsxs)("select",{value:ev,onChange:e=>eN(e.target.value),className:"input",children:[(0,s.jsx)("option",{value:"todos",children:"Com/Sem NF"}),(0,s.jsx)("option",{value:"com_nf",children:"Com NF"}),(0,s.jsx)("option",{value:"sem_nf",children:"Sem NF"})]})]}),"personalizado"===ei&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Data In\xedcio"}),(0,s.jsx)("input",{type:"date",value:eu,onChange:e=>ep(e.target.value),className:"input w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Data Fim"}),(0,s.jsx)("input",{type:"date",value:ej,onChange:e=>eg(e.target.value),className:"input w-full"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Fluxo de Caixa"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(M.h,{width:"100%",height:"100%",children:(0,s.jsxs)(A.v,{data:(()=>{let e={};return aG.forEach(a=>{var t;let s=null===(t=a.data_lancamento)||void 0===t?void 0:t.split("T")[0];s&&(e[s]||(e[s]={entradas:0,saidas:0}),"entrada"===a.tipo||"receita"===a.tipo?e[s].entradas+=a.valor:e[s].saidas+=a.valor)}),Object.entries(e).map(e=>{let[a,t]=e;return{data:(0,O.p6)(a),entradas:t.entradas,saidas:t.saidas,saldo:t.entradas-t.saidas}}).slice(-10)})(),children:[(0,s.jsx)(L.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,s.jsx)(V.K,{dataKey:"data",stroke:"#9CA3AF",fontSize:12}),(0,s.jsx)(q.B,{stroke:"#9CA3AF",fontSize:12}),(0,s.jsx)(R.u,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"},formatter:e=>(0,O.xG)(e)}),(0,s.jsx)(B.$,{dataKey:"entradas",fill:"#10B981",name:"Entradas"}),(0,s.jsx)(B.$,{dataKey:"saidas",fill:"#EF4444",name:"Sa\xeddas"})]})})})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Despesas por Categoria"}),(0,s.jsx)("div",{className:"h-64",children:aX.length>0?(0,s.jsx)(M.h,{width:"100%",height:"100%",children:(0,s.jsxs)(G.u,{children:[(0,s.jsx)(P.b,{data:aX,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:aX.map((e,a)=>(0,s.jsx)(H.b,{fill:e.cor||K[a%K.length]},"cell-".concat(a)))}),(0,s.jsx)(R.u,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"},formatter:e=>(0,O.xG)(e)})]})}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-dark-400",children:"Sem despesas no per\xedodo"})}),aX.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:aX.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.cor||K[a%K.length]}}),(0,s.jsx)("span",{className:"text-dark-300",children:e.name})]},a))})]})]}),(0,s.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-dark-700 flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Lan\xe7amentos"}),eM.size>0&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-dark-300 text-sm",children:[eM.size," ",1===eM.size?"selecionado":"selecionados"]}),(0,s.jsx)(Z.z,{variant:"danger",size:"sm",leftIcon:(0,s.jsx)(j.Z,{className:"w-4 h-4"}),onClick:()=>eV(!0),children:"Excluir Selecionados"}),(0,s.jsx)(Z.z,{variant:"secondary",size:"sm",onClick:()=>eA(new Set),children:"Limpar"})]})]}),aG.length>0?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"w-10",children:(0,s.jsx)("input",{type:"checkbox",checked:eM.size===aG.length&&aG.length>0,onChange:()=>{eM.size===aG.length?eA(new Set):eA(new Set(aG.map(e=>e.id)))},className:"w-4 h-4 rounded border-dark-500 bg-dark-700 text-primary-500 focus:ring-primary-500"})}),(0,s.jsx)("th",{children:"Data"}),(0,s.jsx)("th",{children:"Cadastro"}),(0,s.jsx)("th",{children:"Descri\xe7\xe3o"}),(0,s.jsx)("th",{children:"Categoria"}),(0,s.jsx)("th",{children:"Conta"}),(0,s.jsx)("th",{children:"NF"}),(0,s.jsx)("th",{className:"text-right",children:"Entrada"}),(0,s.jsx)("th",{className:"text-right",children:"Sa\xedda"}),(0,s.jsx)("th",{children:"Conciliado"})]})}),(0,s.jsx)("tbody",{children:aG.map(e=>{var a,t,r,l;let i=e.is_grupo_principal&&(e.grupo_total_itens||0)>1,n=au.has(e.id),d=e.grupo_possui_nf||e.com_nota_fiscal;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("tr",{className:"cursor-pointer hover:bg-dark-600/50 transition-colors ".concat(eM.has(e.id)?"bg-primary-500/10":""," ").concat(i?"border-l-2 border-l-primary-500":""),onClick:()=>{eE(e),eS(!0)},children:[(0,s.jsx)("td",{onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[i&&(0,s.jsx)("button",{onClick:a=>{a.stopPropagation(),aW(e.id)},className:"p-1 hover:bg-dark-600 rounded",children:n?(0,s.jsx)(g.Z,{className:"w-4 h-4 text-primary-400"}):(0,s.jsx)(v.Z,{className:"w-4 h-4 text-dark-400"})}),(0,s.jsx)("input",{type:"checkbox",checked:eM.has(e.id),onChange:()=>a6(e.id),className:"w-4 h-4 rounded border-dark-500 bg-dark-700 text-primary-500 focus:ring-primary-500"})]})}),(0,s.jsx)("td",{className:"text-dark-300",children:(0,O.p6)(e.data_lancamento||"")}),(0,s.jsx)("td",{className:"text-dark-400 text-xs",children:e.created_at?(0,O.p6)(e.created_at):"-"}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-white",children:e.descricao}),i&&(0,s.jsxs)(D.Ct,{variant:"secondary",size:"sm",className:"bg-primary-500/20 text-primary-400",children:[(0,s.jsx)(N.Z,{className:"w-3 h-3 mr-1"}),e.grupo_total_itens]}),e.venda_id&&(0,s.jsxs)(D.Ct,{variant:"primary",size:"sm",children:["Venda #",e.venda_id]})]})}),(0,s.jsx)("td",{onClick:e=>e.stopPropagation(),children:aw===e.id?(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsxs)("select",{value:aC||"",onChange:e=>aS(e.target.value?Number(e.target.value):null),className:"input text-xs py-1 px-2 w-32",autoFocus:!0,children:[(0,s.jsx)("option",{value:"",children:"Sem categoria"}),$.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]}),(0,s.jsx)("button",{onClick:()=>a5(e.id,aC),disabled:aF,className:"p-1 rounded hover:bg-green-500/20 text-green-400",title:"Salvar",children:(0,s.jsx)(f.Z,{className:"w-3 h-3"})}),(0,s.jsx)("button",{onClick:()=>a_(null),className:"p-1 rounded hover:bg-red-500/20 text-red-400",title:"Cancelar",children:(0,s.jsx)(b.Z,{className:"w-3 h-3"})})]}):(0,s.jsxs)("div",{className:"flex items-center gap-1 group/cat",children:[e.categoria_id?(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs text-white",style:{backgroundColor:(null===(a=$.find(a=>a.id===e.categoria_id))||void 0===a?void 0:a.cor)||"#3B82F6"},children:null===(t=$.find(a=>a.id===e.categoria_id))||void 0===t?void 0:t.nome}):(0,s.jsx)("span",{className:"text-dark-500 text-sm",children:"Sem categoria"}),(0,s.jsx)("button",{onClick:()=>{a_(e.id),aS(e.categoria_id)},className:"p-1 rounded opacity-0 group-hover/cat:opacity-100 hover:bg-primary-500/20 text-dark-400 hover:text-primary-400 transition-all",title:"Alterar categoria",children:(0,s.jsx)(y.Z,{className:"w-3 h-3"})})]})}),(0,s.jsx)("td",{className:"text-dark-300",children:(null===(r=ee.find(a=>a.id===e.conta_id))||void 0===r?void 0:r.nome)||"-"}),(0,s.jsx)("td",{className:"text-dark-300",children:d?(0,s.jsxs)("div",{className:"flex items-center gap-1 text-green-400",children:[(0,s.jsx)(k.Z,{className:"w-3 h-3"}),"Sim"]}):"-"}),(0,s.jsx)("td",{className:"text-right text-green-400",children:"entrada"===e.tipo||"receita"===e.tipo?(0,O.xG)(e.valor):"-"}),(0,s.jsx)("td",{className:"text-right text-red-400",children:"saida"===e.tipo||"despesa"===e.tipo?(0,O.xG)(e.valor):"-"}),(0,s.jsx)("td",{children:e.conciliado?(0,s.jsx)(w.Z,{className:"w-4 h-4 text-green-400"}):(0,s.jsx)(_.Z,{className:"w-4 h-4 text-dark-500"})})]},e.id),i&&n&&(null===(l=e.itens_grupo)||void 0===l?void 0:l.map(e=>{var a,t,r;return(0,s.jsxs)("tr",{className:"bg-dark-700/50 cursor-pointer hover:bg-dark-600/50 border-l-2 border-l-dark-500",onClick:()=>{eE(e),eS(!0)},children:[(0,s.jsx)("td",{onClick:e=>e.stopPropagation(),children:(0,s.jsx)("div",{className:"flex items-center gap-2 pl-6",children:(0,s.jsx)("input",{type:"checkbox",checked:eM.has(e.id),onChange:()=>a6(e.id),className:"w-4 h-4 rounded border-dark-500 bg-dark-700 text-primary-500 focus:ring-primary-500"})})}),(0,s.jsx)("td",{className:"text-dark-400 text-sm",children:(0,O.p6)(e.data_lancamento||"")}),(0,s.jsx)("td",{className:"text-dark-500 text-xs",children:e.created_at?(0,O.p6)(e.created_at):"-"}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-dark-300 text-sm",children:e.descricao}),(0,s.jsx)("button",{onClick:a=>{a.stopPropagation(),aJ(e.id)},className:"p-1 hover:bg-dark-600 rounded text-dark-400 hover:text-red-400",title:"Remover do grupo",children:(0,s.jsx)(C,{className:"w-3 h-3"})})]})}),(0,s.jsx)("td",{children:e.categoria_id?(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs text-white opacity-70",style:{backgroundColor:(null===(a=$.find(a=>a.id===e.categoria_id))||void 0===a?void 0:a.cor)||"#3B82F6"},children:null===(t=$.find(a=>a.id===e.categoria_id))||void 0===t?void 0:t.nome}):(0,s.jsx)("span",{className:"text-dark-500 text-sm",children:"-"})}),(0,s.jsx)("td",{className:"text-dark-400 text-sm",children:(null===(r=ee.find(a=>a.id===e.conta_id))||void 0===r?void 0:r.nome)||"-"}),(0,s.jsx)("td",{className:"text-dark-400",children:e.com_nota_fiscal?(0,s.jsxs)("div",{className:"flex items-center gap-1 text-green-400/70",children:[(0,s.jsx)(k.Z,{className:"w-3 h-3"}),"Sim"]}):"-"}),(0,s.jsx)("td",{className:"text-right text-green-400/70 text-sm",children:"entrada"===e.tipo||"receita"===e.tipo?(0,O.xG)(e.valor):"-"}),(0,s.jsx)("td",{className:"text-right text-red-400/70 text-sm",children:"saida"===e.tipo||"despesa"===e.tipo?(0,O.xG)(e.valor):"-"}),(0,s.jsx)("td",{children:e.conciliado?(0,s.jsx)(w.Z,{className:"w-4 h-4 text-green-400/70"}):(0,s.jsx)(_.Z,{className:"w-4 h-4 text-dark-500"})})]},"sub-".concat(e.id))}))]})})})]})}):(0,s.jsx)(D.ub,{icon:(0,s.jsx)(h.Z,{className:"w-10 h-10 text-dark-500"}),title:"Nenhum lan\xe7amento",description:"Fa\xe7a lan\xe7amentos ou importe um arquivo OFX",action:(0,s.jsx)(Z.z,{onClick:()=>eb(!0),leftIcon:(0,s.jsx)(o.Z,{className:"w-4 h-4"}),children:"Novo Lan\xe7amento"})})]}),(0,s.jsx)(z.u,{isOpen:eC,onClose:()=>{eS(!1),eE(null)},title:"Detalhes do Lan\xe7amento",size:"lg",children:eF&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"p-4 rounded-lg ".concat("receita"===eF.tipo||"entrada"===eF.tipo?"bg-green-500/10 border border-green-500/30":"bg-red-500/10 border border-red-500/30"),children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(D.Ct,{variant:"receita"===eF.tipo||"entrada"===eF.tipo?"success":"danger",children:"receita"===eF.tipo||"entrada"===eF.tipo?"ENTRADA":"SA\xcdDA"}),(0,s.jsx)("p",{className:"text-white mt-2 text-lg",children:eF.descricao})]}),(0,s.jsx)("p",{className:"text-3xl font-bold ".concat("receita"===eF.tipo||"entrada"===eF.tipo?"text-green-400":"text-red-400"),children:(0,O.xG)(eF.valor)})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Data"}),(0,s.jsx)("p",{className:"text-white",children:(0,O.p6)(eF.data_lancamento||"")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Forma de Pagamento"}),(0,s.jsx)("p",{className:"text-white capitalize",children:eF.forma_pagamento||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Categoria"}),aw===eF.id?(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsxs)("select",{value:aC||"",onChange:e=>aS(e.target.value?Number(e.target.value):null),className:"input text-sm py-1 px-2",autoFocus:!0,children:[(0,s.jsx)("option",{value:"",children:"Sem categoria"}),$.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]}),(0,s.jsx)("button",{onClick:()=>a5(eF.id,aC),disabled:aF,className:"p-1.5 rounded-lg bg-green-500/20 text-green-400 hover:bg-green-500/30",title:"Salvar",children:(0,s.jsx)(f.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>a_(null),className:"p-1.5 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30",title:"Cancelar",children:(0,s.jsx)(b.Z,{className:"w-4 h-4"})})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[eF.categoria_id?(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs text-white inline-block",style:{backgroundColor:(null===(e=$.find(e=>e.id===eF.categoria_id))||void 0===e?void 0:e.cor)||"#3B82F6"},children:null===(a=$.find(e=>e.id===eF.categoria_id))||void 0===a?void 0:a.nome}):(0,s.jsx)("span",{className:"text-dark-500",children:"Sem categoria"}),(0,s.jsx)("button",{onClick:()=>{a_(eF.id),aS(eF.categoria_id)},className:"p-1.5 rounded-lg text-dark-400 hover:text-primary-400 hover:bg-primary-500/20 transition-colors",title:"Alterar categoria",children:(0,s.jsx)(y.Z,{className:"w-4 h-4"})})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Conta Banc\xe1ria"}),(0,s.jsx)("p",{className:"text-white",children:(null===(t=ee.find(e=>e.id===eF.conta_id))||void 0===t?void 0:t.nome)||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Nota Fiscal"}),(0,s.jsx)("p",{className:"text-white",children:eF.com_nota_fiscal?"Sim":"N\xe3o"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm",children:"Status"}),eF.conciliado?(0,s.jsx)(D.Ct,{variant:"success",children:"Conciliado"}):(0,s.jsx)(D.Ct,{variant:"warning",children:"Pendente"})]})]})]}),(eF.venda_id||eF.cliente_id||eF.fornecedor_id||eF.nota_fiscal_entrada_id)&&(0,s.jsxs)("div",{className:"border-t border-dark-600 pt-4",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm mb-3",children:"V\xednculos"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[eF.venda_id&&(0,s.jsxs)("button",{onClick:()=>{e1(eF.venda_id),eX(!0)},className:"flex items-center gap-2 px-3 py-2 bg-primary-500/20 text-primary-400 rounded-lg hover:bg-primary-500/30 transition-colors",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4"}),"Ver Venda #",eF.venda_id]}),eF.cliente_id&&(0,s.jsxs)("button",{onClick:()=>{eQ(eF.cliente_id),eH(!0)},className:"flex items-center gap-2 px-3 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors",children:[(0,s.jsx)(S.Z,{className:"w-4 h-4"}),"Ver Cliente"]}),eF.fornecedor_id&&(0,s.jsxs)("button",{onClick:()=>{e4(eF.fornecedor_id),eU(!0)},className:"flex items-center gap-2 px-3 py-2 bg-orange-500/20 text-orange-400 rounded-lg hover:bg-orange-500/30 transition-colors",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),"Ver Fornecedor"]}),eF.nota_fiscal_entrada_id&&(0,s.jsxs)("button",{onClick:()=>{e3(eF.nota_fiscal_entrada_id),eJ(!0)},className:"flex items-center gap-2 px-3 py-2 bg-yellow-500/20 text-yellow-400 rounded-lg hover:bg-yellow-500/30 transition-colors",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4"}),"Ver NF de Entrada"]})]})]}),eF.observacao&&(0,s.jsxs)("div",{className:"border-t border-dark-600 pt-4",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm mb-2",children:"Observa\xe7\xf5es"}),(0,s.jsx)("p",{className:"text-white bg-dark-700 p-3 rounded-lg",children:eF.observacao})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-2 pt-4 border-t border-dark-600",children:[(0,s.jsx)(Z.z,{variant:"danger",onClick:a3,leftIcon:(0,s.jsx)(j.Z,{className:"w-4 h-4"}),children:"Excluir"}),(0,s.jsx)(Z.z,{variant:"secondary",onClick:()=>eS(!1),children:"Fechar"})]})]})}),(0,s.jsx)(z.u,{isOpen:eZ,onClose:()=>{ez(!1),eT(null)},title:"Confirmar Exclus\xe3o",size:"sm",children:(0,s.jsxs)("div",{className:"space-y-4",children:[eD?(0,s.jsx)("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(F.Z,{className:"w-5 h-5 text-red-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-red-400 font-medium",children:"N\xe3o \xe9 poss\xedvel excluir"}),(0,s.jsx)("p",{className:"text-dark-300 text-sm mt-1",children:eD})]})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(F.Z,{className:"w-5 h-5 text-yellow-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-yellow-400 font-medium",children:"Aten\xe7\xe3o"}),(0,s.jsx)("p",{className:"text-dark-300 text-sm mt-1",children:"Tem certeza que deseja excluir este lan\xe7amento? Esta a\xe7\xe3o n\xe3o pode ser desfeita."})]})]})}),eF&&(0,s.jsxs)("div",{className:"p-3 bg-dark-700 rounded-lg",children:[(0,s.jsx)("p",{className:"text-white font-medium",children:eF.descricao}),(0,s.jsx)("p",{className:"text-lg font-bold ".concat("receita"===eF.tipo||"entrada"===eF.tipo?"text-green-400":"text-red-400"),children:(0,O.xG)(eF.valor)})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,s.jsx)(Z.z,{variant:"secondary",onClick:()=>{ez(!1),eT(null)},children:eD?"Fechar":"Cancelar"}),!eD&&(0,s.jsx)(Z.z,{variant:"danger",onClick:a4,isLoading:eI,children:"Excluir Lan\xe7amento"})]})]})}),(0,s.jsx)(z.u,{isOpen:ef,onClose:()=>{eb(!1),a2()},title:"Novo Lan\xe7amento",size:"lg",children:(0,s.jsxs)("form",{onSubmit:a0,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>e7({...e6,tipo:"entrada"}),className:"flex-1 py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 ".concat("entrada"===e6.tipo?"bg-green-500 text-white":"bg-dark-700 text-dark-300 hover:bg-dark-600"),children:[(0,s.jsx)(x.Z,{className:"w-4 h-4"}),"Entrada"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>e7({...e6,tipo:"saida"}),className:"flex-1 py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 ".concat("saida"===e6.tipo?"bg-red-500 text-white":"bg-dark-700 text-dark-300 hover:bg-dark-600"),children:[(0,s.jsx)(m.Z,{className:"w-4 h-4"}),"Sa\xedda"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Descri\xe7\xe3o *"}),(0,s.jsx)("input",{type:"text",value:e6.descricao,onChange:e=>e7({...e6,descricao:e.target.value}),className:"input w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Valor *"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:e6.valor,onChange:e=>e7({...e6,valor:Number(e.target.value)}),className:"input w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Data *"}),(0,s.jsx)("input",{type:"date",value:e6.data,onChange:e=>e7({...e6,data:e.target.value}),className:"input w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Categoria"}),(0,s.jsxs)("select",{value:e6.categoria_id||"",onChange:e=>e7({...e6,categoria_id:e.target.value?Number(e.target.value):null}),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),$.filter(e=>e.tipo===("entrada"===e6.tipo?"receita":"despesa")).map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Conta Banc\xe1ria"}),(0,s.jsxs)("select",{value:e6.conta_bancaria_id||"",onChange:e=>e7({...e6,conta_bancaria_id:e.target.value?Number(e.target.value):null}),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),ee.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),"entrada"===e6.tipo&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Vincular \xe0 Venda"}),(0,s.jsxs)("select",{value:e6.venda_id||"",onChange:e=>e7({...e6,venda_id:e.target.value?Number(e.target.value):null}),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"Nenhuma"}),et.map(e=>(0,s.jsxs)("option",{value:e.id,children:["Venda #",e.id," - ",(0,O.xG)(e.valor_total)]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"N\xba NF"}),(0,s.jsx)("input",{type:"text",value:e6.numero_nf,onChange:e=>e7({...e6,numero_nf:e.target.value}),className:"input w-full"})]})]}),ai.length>0&&(0,s.jsxs)("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(F.Z,{className:"w-5 h-5 text-yellow-500"}),(0,s.jsx)("h4",{className:"text-yellow-500 font-medium",children:"Lan\xe7amentos Semelhantes Encontrados"})]}),(0,s.jsx)("p",{className:"text-dark-300 text-sm mb-3",children:"Encontramos lan\xe7amentos que podem ser duplicados. Voc\xea pode agrupar este lan\xe7amento com um existente:"}),(0,s.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:ai.map(e=>(0,s.jsxs)("div",{className:"bg-dark-700 rounded-lg p-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-white font-medium",children:(0,O.xG)(e.valor)}),(0,s.jsx)("span",{className:"text-dark-400",children:"•"}),(0,s.jsx)("span",{className:"text-dark-300 text-sm",children:(0,O.p6)(e.data_lancamento)}),e.categoria_nome&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-dark-400",children:"•"}),(0,s.jsx)(D.Ct,{variant:"secondary",size:"sm",children:e.categoria_nome})]})]}),(0,s.jsx)("p",{className:"text-dark-400 text-sm mt-1 truncate",children:e.descricao}),(0,s.jsxs)("p",{className:"text-dark-500 text-xs mt-1",children:["Similaridade: ",Math.round(100*e.score),"%"]})]}),(0,s.jsxs)("div",{className:"flex gap-2 ml-3",children:[(0,s.jsxs)("button",{type:"button",disabled:am,onClick:()=>aU(e.id),className:"px-3 py-1 bg-primary-500/20 text-primary-400 rounded text-sm hover:bg-primary-500/30 transition-colors flex items-center gap-1 disabled:opacity-50",children:[(0,s.jsx)(N.Z,{className:"w-3 h-3"}),am?"Agrupando...":"Agrupar"]}),(0,s.jsx)("button",{type:"button",onClick:()=>{eb(!1),a2();let a=W.find(a=>a.id===e.id);a&&(eE(a),eS(!0))},className:"px-3 py-1 bg-blue-500/20 text-blue-400 rounded text-sm hover:bg-blue-500/30 transition-colors",children:"Ver"}),(0,s.jsx)("button",{type:"button",onClick:()=>{ax(a=>new Set([...Array.from(a),e.id])),an(a=>a.filter(a=>a.id!==e.id))},className:"px-3 py-1 bg-dark-600 text-dark-300 rounded text-sm hover:bg-dark-500 transition-colors",children:"Ignorar"})]})]},e.id))})]}),ad&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-dark-400 text-sm mt-2",children:[(0,s.jsx)(D.TK,{size:"sm"}),"Buscando lan\xe7amentos semelhantes..."]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-700",children:[(0,s.jsx)(Z.z,{type:"button",variant:"secondary",onClick:()=>{eb(!1),a2()},children:"Cancelar"}),(0,s.jsx)(Z.z,{type:"submit",disabled:Y,children:Y?"Salvando...":"Salvar"})]})]})}),(0,s.jsx)(z.u,{isOpen:ey,onClose:()=>ek(!1),title:"Lan\xe7ar Frete (CT-e)",size:"lg",children:(0,s.jsxs)("form",{onSubmit:a1,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"N\xba CT-e"}),(0,s.jsx)("input",{type:"text",value:e8.numero_cte,onChange:e=>e9({...e8,numero_cte:e.target.value}),className:"input w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Chave CT-e"}),(0,s.jsx)("input",{type:"text",value:e8.chave_cte,onChange:e=>e9({...e8,chave_cte:e.target.value}),className:"input w-full",placeholder:"44 d\xedgitos"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Transportadora"}),(0,s.jsx)("input",{type:"text",value:e8.transportadora,onChange:e=>e9({...e8,transportadora:e.target.value}),className:"input w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Valor do Frete *"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:e8.valor_frete,onChange:e=>e9({...e8,valor_frete:Number(e.target.value)}),className:"input w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Data"}),(0,s.jsx)("input",{type:"date",value:e8.data,onChange:e=>e9({...e8,data:e.target.value}),className:"input w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Categoria"}),(0,s.jsxs)("select",{value:e8.categoria_id||"",onChange:e=>e9({...e8,categoria_id:e.target.value?Number(e.target.value):null}),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),$.filter(e=>"despesa"===e.tipo).map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Conta Banc\xe1ria"}),(0,s.jsxs)("select",{value:e8.conta_bancaria_id||"",onChange:e=>e9({...e8,conta_bancaria_id:e.target.value?Number(e.target.value):null}),className:"input w-full",children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),ee.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Observa\xe7\xf5es"}),(0,s.jsx)("textarea",{value:e8.observacoes,onChange:e=>e9({...e8,observacoes:e.target.value}),className:"input w-full h-20 resize-none"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-dark-700",children:[(0,s.jsx)(Z.z,{type:"button",variant:"secondary",onClick:()=>ek(!1),children:"Cancelar"}),(0,s.jsx)(Z.z,{type:"submit",disabled:Y,children:Y?"Salvando...":"Lan\xe7ar"})]})]})}),(0,s.jsx)(z.u,{isOpen:ew,onClose:()=>{e_(!1),aa([]),as({}),az(!1),aT([]),aO(!1),al(null)},title:"Importar Extrato OFX",size:"xl",children:(0,s.jsxs)("div",{className:"space-y-4",children:[aZ&&(aI||aD.length>0)&&(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:[(0,s.jsx)(E.Z,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),(0,s.jsxs)("div",{className:"text-sm text-red-300",children:[aI&&(0,s.jsx)("div",{children:(0,s.jsx)("strong",{children:"Selecione uma conta banc\xe1ria."})}),aD.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("strong",{children:["Existem ",aD.length," ",1===aD.length?"item":"itens"," sem categoria."]})," ","Preencha todas as categorias para importar."]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-dark-300 mb-2",children:"Conta Banc\xe1ria *"}),(0,s.jsxs)("select",{ref:aL,value:em||"",onChange:e=>{eh(Number(e.target.value)),e.target.value&&aO(!1)},className:"input w-full ".concat(aZ&&aI?"border-red-500 ring-1 ring-red-500":""),children:[(0,s.jsx)("option",{value:"",children:"Selecione a conta..."}),ee.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]}),aZ&&aI&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-red-400 mt-1",children:[(0,s.jsx)(E.Z,{className:"w-3 h-3"}),"Conta banc\xe1ria obrigat\xf3ria"]})]}),(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto",children:(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Data"}),(0,s.jsx)("th",{children:"Descri\xe7\xe3o"}),(0,s.jsx)("th",{children:"Tipo"}),(0,s.jsx)("th",{className:"text-right",children:"Valor"}),(0,s.jsx)("th",{children:"Categoria *"}),(0,s.jsx)("th",{children:"Status"})]})}),(0,s.jsx)("tbody",{children:ae.map(e=>{let a=aZ&&aD.includes(e.id);return(0,s.jsxs)("tr",{ref:a=>{aM.current[e.id]=a},className:"\n                        ".concat(e.duplicado?"opacity-50":"","\n                        ").concat(a?"bg-red-500/10 border-l-2 border-l-red-500":"","\n                      "),children:[(0,s.jsx)("td",{className:"text-dark-300",children:(0,O.p6)(e.data)}),(0,s.jsx)("td",{className:"text-white",children:e.descricao}),(0,s.jsx)("td",{children:(0,s.jsx)(D.Ct,{variant:"entrada"===e.tipo||"receita"===e.tipo?"success":"danger",children:"entrada"===e.tipo||"receita"===e.tipo?"Entrada":"Sa\xedda"})}),(0,s.jsx)("td",{className:"text-right font-medium ".concat("entrada"===e.tipo||"receita"===e.tipo?"text-green-400":"text-red-400"),children:(0,O.xG)(e.valor)}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("select",{ref:a=>{aA.current[e.id]=a},value:at[e.id]||"",onChange:a=>te(e.id,Number(a.target.value)),className:"input text-sm ".concat(a?"border-red-500 ring-1 ring-red-500":""),disabled:e.duplicado,children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),$.filter(a=>a.tipo===("entrada"===e.tipo||"receita"===e.tipo?"receita":"despesa")).map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]}),a&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-red-400",children:[(0,s.jsx)(E.Z,{className:"w-3 h-3"}),"Categoria obrigat\xf3ria"]})]})}),(0,s.jsx)("td",{children:e.duplicado?(0,s.jsx)(D.Ct,{variant:"warning",children:"Duplicado"}):a?(0,s.jsx)(D.Ct,{variant:"danger",children:"Pendente"}):(0,s.jsx)(D.Ct,{variant:"success",children:"Novo"})})]},e.id)})})]})}),ar&&(0,s.jsxs)("div",{className:"p-4 rounded-lg border ".concat(ar.erros>0?"bg-red-500/10 border-red-500/30":"bg-green-500/10 border-green-500/30"),children:[(0,s.jsx)("h4",{className:"font-medium mb-2 ".concat(ar.erros>0?"text-red-400":"text-green-400"),children:ar.erros>0?"⚠️ Importa\xe7\xe3o parcial":"✅ Importa\xe7\xe3o conclu\xedda"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,s.jsxs)("div",{className:"bg-dark-700 p-2 rounded",children:[(0,s.jsx)("span",{className:"text-dark-400",children:"Importados:"}),(0,s.jsx)("span",{className:"text-green-400 ml-2 font-medium",children:ar.importados})]}),(0,s.jsxs)("div",{className:"bg-dark-700 p-2 rounded",children:[(0,s.jsx)("span",{className:"text-dark-400",children:"Dup. FITID:"}),(0,s.jsx)("span",{className:"text-yellow-400 ml-2 font-medium",children:ar.duplicadosFitid})]}),(0,s.jsxs)("div",{className:"bg-dark-700 p-2 rounded",children:[(0,s.jsx)("span",{className:"text-dark-400",children:"Dup. Similar:"}),(0,s.jsx)("span",{className:"text-orange-400 ml-2 font-medium",children:ar.duplicadosFingerprint})]}),(0,s.jsxs)("div",{className:"bg-dark-700 p-2 rounded",children:[(0,s.jsx)("span",{className:"text-dark-400",children:"Erros:"}),(0,s.jsx)("span",{className:"text-red-400 ml-2 font-medium",children:ar.erros})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-dark-700",children:[(0,s.jsxs)("div",{className:"text-sm text-dark-400",children:[ae.filter(e=>!e.duplicado).length," lan\xe7amentos ser\xe3o importados",ae.filter(e=>e.duplicado).length>0&&(0,s.jsxs)("span",{className:"text-yellow-400 ml-2",children:["(",ae.filter(e=>e.duplicado).length," duplicados ignorados)"]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(Z.z,{variant:"secondary",onClick:()=>{e_(!1),aa([]),as({}),az(!1),aT([]),aO(!1),al(null)},children:"Cancelar"}),(0,s.jsx)(Z.z,{onClick:a9,disabled:Y,children:Y?"Importando...":"Importar"})]})]})]})}),(0,s.jsx)(z.u,{isOpen:eL,onClose:()=>!eq&&eV(!1),title:"Excluir Lan\xe7amentos Selecionados",size:"md",children:(0,s.jsx)("div",{className:"space-y-4",children:eq?(0,s.jsx)("div",{className:"py-8",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)(D.TK,{size:"lg"}),(0,s.jsxs)("p",{className:"text-white",children:["Excluindo... ",eB.current," de ",eB.total]}),eB.errors>0&&(0,s.jsxs)("p",{className:"text-yellow-400 text-sm",children:[eB.errors," erro",eB.errors>1?"s":""," (ser\xe3o ignorados)"]}),(0,s.jsx)("div",{className:"w-full bg-dark-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-primary-500 h-2 rounded-full transition-all",style:{width:"".concat(eB.current/eB.total*100,"%")}})})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:[(0,s.jsx)(F.Z,{className:"w-6 h-6 text-red-400 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-white font-medium",children:["Tem certeza que deseja excluir ",eM.size," lan\xe7amento",eM.size>1?"s":"","?"]}),(0,s.jsx)("p",{className:"text-dark-400 text-sm mt-1",children:"Esta a\xe7\xe3o n\xe3o pode ser desfeita. Lan\xe7amentos vinculados a vendas ou conciliados ser\xe3o ignorados."})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(Z.z,{variant:"secondary",onClick:()=>eV(!1),children:"Cancelar"}),(0,s.jsxs)(Z.z,{variant:"danger",onClick:a7,children:["Excluir ",eM.size," lan\xe7amento",eM.size>1?"s":""]})]})]})})}),(0,s.jsx)(T.W3,{isOpen:eP,onClose:()=>eH(!1),clienteId:e$}),(0,s.jsx)(T.hJ,{isOpen:eK,onClose:()=>eX(!1),vendaId:e0}),(0,s.jsx)(T.i,{isOpen:eY,onClose:()=>eU(!1),fornecedorId:e2}),(0,s.jsx)(T.nW,{isOpen:eW,onClose:()=>eJ(!1),notaId:e5}),(0,s.jsx)(z.u,{isOpen:aj,onClose:()=>{ag(!1),aN([])},title:"Lan\xe7amentos Duplicados Detectados",size:"xl",children:(0,s.jsx)("div",{className:"space-y-4",children:af?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(D.TK,{size:"lg"}),(0,s.jsx)("p",{className:"text-dark-300 mt-4",children:"Analisando lan\xe7amentos..."})]}):0===av.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(w.Z,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-medium text-white mb-2",children:"Nenhum duplicado encontrado!"}),(0,s.jsx)("p",{className:"text-dark-400",children:"Todos os lan\xe7amentos parecem \xfanicos."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(F.Z,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-yellow-500 font-medium mb-1",children:[av.length," par(es) de duplicados encontrado(s)"]}),(0,s.jsxs)("p",{className:"text-dark-300 text-sm",children:["Estes lan\xe7amentos parecem ser do mesmo evento (valor igual, datas pr\xf3ximas, descri\xe7\xe3o similar). Voc\xea pode ",(0,s.jsx)("strong",{children:"Mesclar"})," (mant\xe9m 1, deleta outro) ou ",(0,s.jsx)("strong",{children:"Ignorar"}),"."]})]})]})}),(0,s.jsx)("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:av.map((e,a)=>{var t,r;return(0,s.jsxs)("div",{className:"bg-dark-700 rounded-lg p-4 border border-dark-600",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)(D.Ct,{variant:"warning",size:"sm",children:["Similaridade: ",Math.round(100*e.score),"%"]}),(0,s.jsxs)("span",{className:"text-dark-400 text-xs",children:["Diferen\xe7a: ",e.diferencaDias," dia(s)"]})]}),(0,s.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-3 mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4 text-green-400"}),(0,s.jsx)("span",{className:"text-green-400 text-xs font-medium",children:"COM NOTA FISCAL"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white font-medium",children:e.lancamentoComNF.descricao}),(0,s.jsxs)("p",{className:"text-dark-400 text-sm",children:[(0,O.p6)(e.lancamentoComNF.data_lancamento)," •",(null===(t=$.find(a=>a.id===e.lancamentoComNF.categoria_id))||void 0===t?void 0:t.nome)||"Sem categoria"]})]}),(0,s.jsx)("span",{className:"text-red-400 font-bold",children:(0,O.xG)(e.lancamentoComNF.valor)})]})]}),(0,s.jsxs)("div",{className:"bg-dark-600 rounded-lg p-3 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4 text-blue-400"}),(0,s.jsx)("span",{className:"text-blue-400 text-xs font-medium",children:"OFX / SEM NF"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white font-medium",children:e.lancamentoSemNF.descricao}),(0,s.jsxs)("p",{className:"text-dark-400 text-sm",children:[(0,O.p6)(e.lancamentoSemNF.data_lancamento)," •",(null===(r=ee.find(a=>a.id===e.lancamentoSemNF.conta_id))||void 0===r?void 0:r.nome)||"Sem conta"]})]}),(0,s.jsx)("span",{className:"text-red-400 font-bold",children:(0,O.xG)(e.lancamentoSemNF.valor)})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(Z.z,{size:"sm",variant:"primary",onClick:()=>aQ(e.lancamentoComNF.id,e.lancamentoSemNF.id,"mesclar"),disabled:ay===e.lancamentoComNF.id,leftIcon:(0,s.jsx)(d,{className:"w-4 h-4"}),className:"flex-1",children:ay===e.lancamentoComNF.id?"Mesclando...":"Mesclar (mant\xe9m NF)"}),(0,s.jsx)(Z.z,{size:"sm",variant:"secondary",onClick:()=>aN(e=>e.filter((e,t)=>t!==a)),className:"flex-1",children:"Ignorar"})]})]},a)})})]})})})]})}}},function(e){e.O(0,[149,985,859,900,548,971,938,744],function(){return e(e.s=7669)}),_N_E=e.O()}]);