"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[548],{22812:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},28203:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},86264:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},96142:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4322:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},12741:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9883:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},41827:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},93505:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},45367:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},11961:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]])},67972:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},82549:function(e,s,a){a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(62898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},40971:function(e,s,a){a.d(s,{W3:function(){return v},i:function(){return g},nW:function(){return b},rT:function(){return k},hJ:function(){return y}});var t=a(57437),r=a(2265),d=a(22812),l=a(67972),c=a(12741),n=a(96142),i=a(93505),x=a(28203),o=a(4322);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,a(62898).Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);var h=a(11961),u=a(70492),j=a(548),p=a(66651),N=a(22169),f=a(87431);function v(e){let{isOpen:s,onClose:a,clienteId:x}=e,[o,m]=(0,r.useState)(null),[h,v]=(0,r.useState)(!1),[y,k]=(0,r.useState)([]);(0,r.useEffect)(()=>{s&&x&&g()},[s,x]);let g=async()=>{if(x){v(!0);try{let{data:e}=await f.OQ.from("clientes").select("*").eq("id",x).single();m(e);let{data:s}=await f.OQ.from("vendas").select("id, numero, data_venda, valor_total, status").eq("cliente_id",x).order("data_venda",{ascending:!1}).limit(5);k(s||[])}catch(e){console.error("Erro ao carregar cliente:",e)}finally{v(!1)}}};return(0,t.jsx)(u.u,{isOpen:s,onClose:a,title:"Detalhes do Cliente",size:"xl",children:h?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.TK,{})}):o?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-dark-700/50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary-500/20 flex items-center justify-center",children:"juridica"===o.tipo_pessoa?(0,t.jsx)(d.Z,{className:"w-8 h-8 text-primary-400"}):(0,t.jsx)(l.Z,{className:"w-8 h-8 text-primary-400"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white",children:o.razao_social||o.nome}),(0,t.jsx)(j.Ct,{variant:"juridica"===o.tipo_pessoa?"primary":"secondary",children:"juridica"===o.tipo_pessoa?"Pessoa Jur\xeddica":"Pessoa F\xedsica"})]}),o.nome&&o.razao_social&&(0,t.jsx)("p",{className:"text-dark-400",children:o.nome}),(0,t.jsxs)("p",{className:"text-dark-400 text-sm mt-1",children:["juridica"===o.tipo_pessoa?"CNPJ":"CPF",": ",o.cnpj||o.cpf||"-"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h4",{className:"font-medium text-white flex items-center gap-2",children:[(0,t.jsx)(c.Z,{className:"w-4 h-4 text-primary-400"}),"Contato"]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Telefone:"}),(0,t.jsx)("span",{className:"text-white",children:o.telefone||"-"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Celular:"}),(0,t.jsx)("span",{className:"text-white",children:o.celular||"-"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Email:"}),(0,t.jsx)("span",{className:"text-white",children:o.email||"-"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h4",{className:"font-medium text-white flex items-center gap-2",children:[(0,t.jsx)(n.Z,{className:"w-4 h-4 text-primary-400"}),"Endere\xe7o"]}),(0,t.jsx)("div",{className:"text-sm text-white",children:o.endereco?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{children:[o.endereco,", ",o.numero]}),o.complemento&&(0,t.jsx)("p",{children:o.complemento}),(0,t.jsx)("p",{children:o.bairro}),(0,t.jsxs)("p",{children:[o.cidade," - ",o.estado]}),(0,t.jsxs)("p",{children:["CEP: ",o.cep]})]}):(0,t.jsx)("p",{className:"text-dark-500",children:"Endere\xe7o n\xe3o cadastrado"})})]})]}),y.length>0&&(0,t.jsxs)("div",{className:"border-t border-dark-600 pt-4",children:[(0,t.jsxs)("h4",{className:"font-medium text-white mb-3 flex items-center gap-2",children:[(0,t.jsx)(i.Z,{className:"w-4 h-4 text-primary-400"}),"\xdaltimas Vendas"]}),(0,t.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-2 bg-dark-700 rounded",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"text-white",children:["Venda #",e.numero||e.id]}),(0,t.jsx)("span",{className:"text-dark-400 text-sm ml-2",children:(0,N.p6)(e.data_venda)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-green-400 font-medium",children:(0,N.xG)(e.valor_total)}),(0,t.jsx)(j.Ct,{variant:"concluida"===e.status?"success":"warning",size:"sm",children:e.status})]})]},e.id))})]}),o.observacoes&&(0,t.jsxs)("div",{className:"border-t border-dark-600 pt-4",children:[(0,t.jsx)("h4",{className:"font-medium text-white mb-2",children:"Observa\xe7\xf5es"}),(0,t.jsx)("p",{className:"text-dark-300 bg-dark-700 p-3 rounded",children:o.observacoes})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t border-dark-600",children:(0,t.jsx)(p.z,{variant:"secondary",onClick:a,children:"Fechar"})})]}):(0,t.jsx)("p",{className:"text-dark-400 text-center py-8",children:"Cliente n\xe3o encontrado"})})}function y(e){var s;let{isOpen:a,onClose:d,vendaId:c}=e,[n,i]=(0,r.useState)(null),[m,h]=(0,r.useState)(!1),[v,y]=(0,r.useState)([]),[k,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{a&&c?b():a&&!c&&g("ID da venda n\xe3o informado")},[a,c]),(0,r.useEffect)(()=>{a||(i(null),y([]),g(null))},[a]);let b=async()=>{if(!c){g("ID da venda n\xe3o informado");return}h(!0),g(null);try{console.log("Buscando venda ID:",c);let{data:e,error:s}=await f.OQ.from("vendas").select("\n          *,\n          cliente:clientes(id, nome, razao_social, cpf, cnpj)\n        ").eq("id",c).single();if(s){console.error("Erro ao carregar venda:",s),g("Erro: ".concat(s.message)),i(null),y([]);return}if(!e){g("Venda #".concat(c," n\xe3o encontrada no banco de dados")),i(null),y([]);return}console.log("Venda encontrada:",e),i(e);let{data:a}=await f.OQ.from("itens_venda").select("\n          *,\n          produto:produtos(nome, codigo)\n        ").eq("venda_id",c);y(a||[])}catch(e){console.error("Erro ao carregar venda:",e)}finally{h(!1)}};return(0,t.jsx)(u.u,{isOpen:a,onClose:d,title:"Detalhes da Venda",size:"xl",children:m?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.TK,{})}):n?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between p-4 bg-dark-700/50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-white",children:["Venda #",n.numero||n.id]}),(0,t.jsx)(j.Ct,{variant:"concluida"===n.status?"success":"warning",children:n.status}),n.nota_fiscal_emitida&&(0,t.jsx)(j.Ct,{variant:"primary",children:"NF Emitida"})]}),(0,t.jsxs)("p",{className:"text-dark-400 mt-1",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 inline mr-1"}),(0,N.p6)(n.data_venda)]}),n.cliente&&(0,t.jsxs)("p",{className:"text-dark-300 mt-2",children:[(0,t.jsx)(l.Z,{className:"w-4 h-4 inline mr-1"}),n.cliente.razao_social||n.cliente.nome]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-3xl font-bold text-green-400",children:(0,N.xG)(n.valor_total)}),(0,t.jsxs)("p",{className:"text-dark-400 text-sm",children:["Lucro: ",(0,t.jsx)("span",{className:"text-green-400",children:(0,N.xG)(n.lucro_bruto)}),(0,t.jsxs)("span",{className:"ml-2",children:["(",null===(s=n.margem_lucro)||void 0===s?void 0:s.toFixed(1),"%)"]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-dark-700 rounded-lg",children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Produtos"}),(0,t.jsx)("p",{className:"text-white font-medium",children:(0,N.xG)(n.valor_produtos)})]}),(0,t.jsxs)("div",{className:"p-3 bg-dark-700 rounded-lg",children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Servi\xe7os"}),(0,t.jsx)("p",{className:"text-white font-medium",children:(0,N.xG)(n.valor_servicos)})]}),(0,t.jsxs)("div",{className:"p-3 bg-dark-700 rounded-lg",children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Desconto"}),(0,t.jsxs)("p",{className:"text-red-400 font-medium",children:["-",(0,N.xG)(n.valor_desconto)]})]}),(0,t.jsxs)("div",{className:"p-3 bg-dark-700 rounded-lg",children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Custo Total"}),(0,t.jsx)("p",{className:"text-white font-medium",children:(0,N.xG)(n.custo_total)})]})]}),v.length>0&&(0,t.jsxs)("div",{className:"border-t border-dark-600 pt-4",children:[(0,t.jsxs)("h4",{className:"font-medium text-white mb-3 flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"w-4 h-4 text-primary-400"}),"Itens da Venda"]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-dark-400 border-b border-dark-600",children:[(0,t.jsx)("th",{className:"text-left py-2",children:"Produto"}),(0,t.jsx)("th",{className:"text-center",children:"Qtd"}),(0,t.jsx)("th",{className:"text-right",children:"Unit."}),(0,t.jsx)("th",{className:"text-right",children:"Total"})]})}),(0,t.jsx)("tbody",{children:v.map((e,s)=>{var a,r;return(0,t.jsxs)("tr",{className:"border-b border-dark-700",children:[(0,t.jsxs)("td",{className:"py-2 text-white",children:[(null===(a=e.produto)||void 0===a?void 0:a.nome)||e.descricao,(null===(r=e.produto)||void 0===r?void 0:r.codigo)&&(0,t.jsxs)("span",{className:"text-dark-500 text-xs ml-2",children:["#",e.produto.codigo]})]}),(0,t.jsx)("td",{className:"text-center text-dark-300",children:e.quantidade}),(0,t.jsx)("td",{className:"text-right text-dark-300",children:(0,N.xG)(e.valor_unitario)}),(0,t.jsx)("td",{className:"text-right text-white font-medium",children:(0,N.xG)(e.valor_total)})]},s)})})]})})]}),n.observacoes&&(0,t.jsxs)("div",{className:"border-t border-dark-600 pt-4",children:[(0,t.jsx)("h4",{className:"font-medium text-white mb-2",children:"Observa\xe7\xf5es"}),(0,t.jsx)("p",{className:"text-dark-300 bg-dark-700 p-3 rounded",children:n.observacoes})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t border-dark-600",children:(0,t.jsx)(p.z,{variant:"secondary",onClick:d,children:"Fechar"})})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-dark-400",children:k||"Venda #".concat(c," n\xe3o encontrada")}),(0,t.jsx)("p",{className:"text-dark-500 text-sm mt-2",children:"A venda pode ter sido removida ou o ID est\xe1 incorreto."}),(0,t.jsx)(p.z,{variant:"secondary",onClick:d,className:"mt-4",children:"Fechar"})]})})}function k(e){var s,a;let{isOpen:d,onClose:l,produtoId:c}=e,[n,i]=(0,r.useState)(null),[x,h]=(0,r.useState)(!1),[v,y]=(0,r.useState)([]);(0,r.useEffect)(()=>{d&&c&&k()},[d,c]);let k=async()=>{if(c){h(!0);try{let{data:e}=await f.OQ.from("produtos").select("\n          *,\n          categoria:categorias(nome),\n          fornecedor:fornecedores(razao_social)\n        ").eq("id",c).single();i(e);let{data:s}=await f.OQ.from("movimentacoes_estoque").select("*").eq("produto_id",c).order("created_at",{ascending:!1}).limit(5);y(s||[])}catch(e){console.error("Erro ao carregar produto:",e)}finally{h(!1)}}},g=n?n.quantidade_estoque<=0?{variant:"danger",text:"Sem estoque"}:n.quantidade_estoque<=n.estoque_minimo?{variant:"warning",text:"Estoque baixo"}:{variant:"success",text:"Em estoque"}:{variant:"secondary",text:"-"};return(0,t.jsx)(u.u,{isOpen:d,onClose:l,title:"Detalhes do Produto",size:"xl",children:x?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.TK,{})}):n?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-dark-700/50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-lg bg-primary-500/20 flex items-center justify-center",children:(0,t.jsx)(o.Z,{className:"w-8 h-8 text-primary-400"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white",children:n.nome}),(0,t.jsx)(j.Ct,{variant:g.variant,children:g.text})]}),n.codigo&&(0,t.jsxs)("p",{className:"text-dark-400",children:["C\xf3digo: ",n.codigo]}),n.categoria&&(0,t.jsxs)("p",{className:"text-dark-400 text-sm mt-1",children:[(0,t.jsx)(m,{className:"w-3 h-3 inline mr-1"}),n.categoria.nome]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-green-400",children:(0,N.xG)(n.valor_venda)}),(0,t.jsxs)("p",{className:"text-dark-400 text-sm",children:["Custo: ",(0,N.xG)(n.valor_custo)]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Estoque Atual"}),(0,t.jsxs)("p",{className:"text-2xl font-bold ".concat(n.quantidade_estoque<=0?"text-red-400":n.quantidade_estoque<=n.estoque_minimo?"text-yellow-400":"text-white"),children:[n.quantidade_estoque," ",n.unidade]})]}),(0,t.jsxs)("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Estoque M\xednimo"}),(0,t.jsx)("p",{className:"text-white text-2xl font-bold",children:n.estoque_minimo})]}),(0,t.jsxs)("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm",children:"Margem de Lucro"}),(0,t.jsxs)("p",{className:"text-green-400 text-2xl font-bold",children:[null===(s=n.margem_lucro)||void 0===s?void 0:s.toFixed(1),"%"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Custo M\xe9dio:"}),(0,t.jsx)("span",{className:"text-white",children:(0,N.xG)(n.custo_medio)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Unidade:"}),(0,t.jsx)("span",{className:"text-white",children:n.unidade})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"NCM:"}),(0,t.jsx)("span",{className:"text-white",children:n.ncm||"-"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Marca:"}),(0,t.jsx)("span",{className:"text-white",children:n.marca||"-"})]})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Fornecedor:"}),(0,t.jsx)("span",{className:"text-white",children:(null===(a=n.fornecedor)||void 0===a?void 0:a.razao_social)||"-"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Localiza\xe7\xe3o:"}),(0,t.jsx)("span",{className:"text-white",children:n.localizacao||"-"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Estoque M\xe1ximo:"}),(0,t.jsx)("span",{className:"text-white",children:n.estoque_maximo})]})]})]}),v.length>0&&(0,t.jsxs)("div",{className:"border-t border-dark-600 pt-4",children:[(0,t.jsx)("h4",{className:"font-medium text-white mb-3",children:"\xdaltimas Movimenta\xe7\xf5es"}),(0,t.jsx)("div",{className:"space-y-2",children:v.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-2 bg-dark-700 rounded",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(j.Ct,{variant:"entrada"===e.tipo?"success":"danger",size:"sm",children:["entrada"===e.tipo?"+":"-",e.quantidade]}),(0,t.jsx)("span",{className:"text-dark-400 text-sm ml-2",children:e.motivo})]}),(0,t.jsx)("span",{className:"text-dark-400 text-sm",children:(0,N.p6)(e.created_at)})]},e.id))})]}),n.descricao&&(0,t.jsxs)("div",{className:"border-t border-dark-600 pt-4",children:[(0,t.jsx)("h4",{className:"font-medium text-white mb-2",children:"Descri\xe7\xe3o"}),(0,t.jsx)("p",{className:"text-dark-300 bg-dark-700 p-3 rounded",children:n.descricao})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t border-dark-600",children:(0,t.jsx)(p.z,{variant:"secondary",onClick:l,children:"Fechar"})})]}):(0,t.jsx)("p",{className:"text-dark-400 text-center py-8",children:"Produto n\xe3o encontrado"})})}function g(e){let{isOpen:s,onClose:a,fornecedorId:d}=e,[l,i]=(0,r.useState)(null),[x,m]=(0,r.useState)(!1),[v,y]=(0,r.useState)([]);(0,r.useEffect)(()=>{s&&d&&k()},[s,d]);let k=async()=>{if(d){m(!0);try{let{data:e}=await f.OQ.from("fornecedores").select("*").eq("id",d).single();i(e);let{data:s}=await f.OQ.from("produtos").select("id, nome, codigo, quantidade_estoque, valor_venda").eq("fornecedor_id",d).limit(10);y(s||[])}catch(e){console.error("Erro ao carregar fornecedor:",e)}finally{m(!1)}}};return(0,t.jsx)(u.u,{isOpen:s,onClose:a,title:"Detalhes do Fornecedor",size:"xl",children:x?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.TK,{})}):l?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-dark-700/50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-orange-500/20 flex items-center justify-center",children:(0,t.jsx)(h.Z,{className:"w-8 h-8 text-orange-400"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white",children:l.razao_social}),l.nome_fantasia&&(0,t.jsx)("p",{className:"text-dark-400",children:l.nome_fantasia}),(0,t.jsxs)("p",{className:"text-dark-400 text-sm mt-1",children:["CNPJ: ",l.cnpj||"-"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h4",{className:"font-medium text-white flex items-center gap-2",children:[(0,t.jsx)(c.Z,{className:"w-4 h-4 text-orange-400"}),"Contato"]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Telefone:"}),(0,t.jsx)("span",{className:"text-white",children:l.telefone||"-"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Celular:"}),(0,t.jsx)("span",{className:"text-white",children:l.celular||"-"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-dark-400",children:"Email:"}),(0,t.jsx)("span",{className:"text-white",children:l.email||"-"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h4",{className:"font-medium text-white flex items-center gap-2",children:[(0,t.jsx)(n.Z,{className:"w-4 h-4 text-orange-400"}),"Endere\xe7o"]}),(0,t.jsx)("div",{className:"text-sm text-white",children:l.endereco?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{children:[l.endereco,", ",l.numero]}),(0,t.jsx)("p",{children:l.bairro}),(0,t.jsxs)("p",{children:[l.cidade," - ",l.estado]}),(0,t.jsxs)("p",{children:["CEP: ",l.cep]})]}):(0,t.jsx)("p",{className:"text-dark-500",children:"Endere\xe7o n\xe3o cadastrado"})})]})]}),v.length>0&&(0,t.jsxs)("div",{className:"border-t border-dark-600 pt-4",children:[(0,t.jsxs)("h4",{className:"font-medium text-white mb-3 flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"w-4 h-4 text-orange-400"}),"Produtos deste Fornecedor (",v.length,")"]}),(0,t.jsx)("div",{className:"space-y-2",children:v.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-2 bg-dark-700 rounded",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-white",children:e.nome}),e.codigo&&(0,t.jsxs)("span",{className:"text-dark-500 text-sm ml-2",children:["#",e.codigo]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"text-dark-400 text-sm",children:["Estoque: ",e.quantidade_estoque]}),(0,t.jsx)("span",{className:"text-green-400 font-medium",children:(0,N.xG)(e.valor_venda)})]})]},e.id))})]}),l.observacoes&&(0,t.jsxs)("div",{className:"border-t border-dark-600 pt-4",children:[(0,t.jsx)("h4",{className:"font-medium text-white mb-2",children:"Observa\xe7\xf5es"}),(0,t.jsx)("p",{className:"text-dark-300 bg-dark-700 p-3 rounded",children:l.observacoes})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t border-dark-600",children:(0,t.jsx)(p.z,{variant:"secondary",onClick:a,children:"Fechar"})})]}):(0,t.jsx)("p",{className:"text-dark-400 text-center py-8",children:"Fornecedor n\xe3o encontrado"})})}function b(e){let{isOpen:s,onClose:a,notaId:d}=e,[l,c]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),[x,o]=(0,r.useState)([]);(0,r.useEffect)(()=>{s&&d&&m()},[s,d]);let m=async()=>{if(d){i(!0);try{let{data:e}=await f.OQ.from("notas_fiscais_entrada").select("*").eq("id",d).single();c(e);let{data:s}=await f.OQ.from("itens_nota_entrada").select("\n          *,\n          produto:produtos(nome, codigo)\n        ").eq("nota_fiscal_id",d);o(s||[])}catch(e){console.error("Erro ao carregar nota:",e)}finally{i(!1)}}};return(0,t.jsx)(u.u,{isOpen:s,onClose:a,title:"Detalhes da Nota Fiscal",size:"xl",children:n?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(j.TK,{})}):l?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between p-4 bg-dark-700/50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-white",children:["NF #",l.numero]}),(0,t.jsx)(j.Ct,{variant:"processada"===l.status?"success":"warning",children:l.status})]}),(0,t.jsxs)("p",{className:"text-dark-400 mt-1",children:["S\xe9rie: ",l.serie||"-"]}),(0,t.jsx)("p",{className:"text-dark-300 mt-2",children:l.fornecedor_razao_social})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-3xl font-bold text-white",children:(0,N.xG)(l.valor_total)}),(0,t.jsxs)("p",{className:"text-dark-400 text-sm",children:["Entrada: ",(0,N.p6)(l.data_entrada)]})]})]}),l.chave_acesso&&(0,t.jsxs)("div",{className:"p-3 bg-dark-700 rounded-lg",children:[(0,t.jsx)("p",{className:"text-dark-400 text-sm mb-1",children:"Chave de Acesso"}),(0,t.jsx)("p",{className:"text-white font-mono text-xs break-all",children:l.chave_acesso})]}),x.length>0&&(0,t.jsxs)("div",{className:"border-t border-dark-600 pt-4",children:[(0,t.jsx)("h4",{className:"font-medium text-white mb-3",children:"Itens da Nota"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-dark-400 border-b border-dark-600",children:[(0,t.jsx)("th",{className:"text-left py-2",children:"Produto"}),(0,t.jsx)("th",{className:"text-center",children:"Qtd"}),(0,t.jsx)("th",{className:"text-right",children:"Unit."}),(0,t.jsx)("th",{className:"text-right",children:"Total"})]})}),(0,t.jsx)("tbody",{children:x.map((e,s)=>{var a;return(0,t.jsxs)("tr",{className:"border-b border-dark-700",children:[(0,t.jsx)("td",{className:"py-2 text-white",children:(null===(a=e.produto)||void 0===a?void 0:a.nome)||e.descricao}),(0,t.jsx)("td",{className:"text-center text-dark-300",children:e.quantidade}),(0,t.jsx)("td",{className:"text-right text-dark-300",children:(0,N.xG)(e.valor_unitario)}),(0,t.jsx)("td",{className:"text-right text-white font-medium",children:(0,N.xG)(e.valor_total)})]},s)})})]})})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t border-dark-600",children:(0,t.jsx)(p.z,{variant:"secondary",onClick:a,children:"Fechar"})})]}):(0,t.jsx)("p",{className:"text-dark-400 text-center py-8",children:"Nota fiscal n\xe3o encontrada"})})}},70492:function(e,s,a){a.d(s,{u:function(){return c}});var t=a(57437),r=a(82549),d=a(2265),l=a(22169);function c(e){let{isOpen:s,onClose:a,title:c,children:n,size:i="md"}=e;return((0,d.useEffect)(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),s)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:a}),(0,t.jsxs)("div",{className:(0,l.cn)("relative w-full bg-dark-900 border border-dark-700 rounded-2xl shadow-2xl animate-slide-up",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[i]),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-700",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:c}),(0,t.jsx)("button",{onClick:a,className:"p-2 rounded-xl text-dark-400 hover:text-white hover:bg-dark-800 transition-colors",children:(0,t.jsx)(r.Z,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"px-6 py-6 max-h-[70vh] overflow-y-auto scrollbar-thin",children:n})]})]}):null}}}]);