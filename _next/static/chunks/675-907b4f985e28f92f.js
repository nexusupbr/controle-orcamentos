"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[675],{11981:function(r,e,t){t.d(e,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},86264:function(r,e,t){t.d(e,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5589:function(r,e,t){t.d(e,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},81097:function(r,e,t){t.d(e,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},67972:function(r,e,t){t.d(e,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},66651:function(r,e,t){t.d(e,{z:function(){return i}});var n=t(57437),o=t(86264),a=t(22169);function i(r){let{children:e,className:t,variant:i="primary",size:c="md",isLoading:u=!1,leftIcon:s,rightIcon:l,disabled:f,...m}=r;return(0,n.jsxs)("button",{className:(0,a.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",danger:"btn-danger",success:"btn-success",ghost:"btn-ghost"}[i],{sm:"px-3 py-1.5 text-xs",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base"}[c],t),disabled:f||u,...m,children:[u?(0,n.jsx)(o.Z,{className:"w-4 h-4 animate-spin"}):s,e,!u&&l]})}},83779:function(r,e,t){t.d(e,{H:function(){return u},a:function(){return s}});var n=t(57437),o=t(2265),a=t(14958);let i=(0,o.createContext)(void 0),c={getItem:r=>{try{if(window.localStorage)return localStorage.getItem(r)}catch(r){console.warn("localStorage n\xe3o dispon\xedvel:",r)}return null},setItem:(r,e)=>{try{window.localStorage&&localStorage.setItem(r,e)}catch(r){console.warn("localStorage n\xe3o dispon\xedvel:",r)}},removeItem:r=>{try{window.localStorage&&localStorage.removeItem(r)}catch(r){console.warn("localStorage n\xe3o dispon\xedvel:",r)}}};function u(r){let{children:e}=r,[t,u]=(0,o.useState)(null),[s,l]=(0,o.useState)(!0),[f,m]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let r=c.getItem("usuario");if(r)try{let e=JSON.parse(r);u(e),m(!0)}catch(r){c.removeItem("usuario")}l(!1)},[]);let d=async(r,e)=>{try{let t=await (0,a.Kx)(r,e);if(t)return u(t),m(!0),c.setItem("usuario",JSON.stringify(t)),!0;return!1}catch(r){return console.error("Erro no login:",r),!1}},g=!f||(null==t?void 0:t.tipo)==="admin";return(0,n.jsx)(i.Provider,{value:{usuario:t,loading:s,login:d,logout:()=>{u(null),m(!1),c.removeItem("usuario")},isAdmin:g,authEnabled:f},children:e})}function s(){let r=(0,o.useContext)(i);if(void 0===r)throw Error("useAuth deve ser usado dentro de um AuthProvider");return r}},14958:function(r,e,t){t.d(e,{AE:function(){return g},AT:function(){return O},FZ:function(){return h},GL:function(){return c},Gx:function(){return f},JA:function(){return i},Kx:function(){return I},OQ:function(){return n},Qf:function(){return w},S3:function(){return C},SE:function(){return u},SL:function(){return o},VR:function(){return l},gQ:function(){return E},hM:function(){return s},mU:function(){return p},nx:function(){return a},r0:function(){return m},uY:function(){return d},y5:function(){return y},zM:function(){return A}});let n=(0,t(69073).eI)("https://yhiiupamxdjmnrktkjku.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InloaWl1cGFteGRqbW5ya3Rramt1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0ODg2NzUsImV4cCI6MjA4NDA2NDY3NX0._QjYtYAlypJdursHe0-rPz14QOT4NNP2EklqcJ6TpkI");async function o(){let{data:r,error:e}=await n.from("orcamentos").select("*").order("data",{ascending:!1});if(e)throw console.error("Erro ao buscar or\xe7amentos:",e),e;return r||[]}async function a(r){let{data:e,error:t}=await n.from("orcamentos").insert([r]).select().single();if(t)throw console.error("Erro ao criar or\xe7amento:",t),Error(t.message);return e}async function i(r,e){let{data:t,error:o}=await n.from("orcamentos").update(e).eq("id",r).select().single();if(o)throw console.error("Erro ao atualizar or\xe7amento:",o),Error(o.message);return t}async function c(r){let{error:e}=await n.from("orcamentos").delete().eq("id",r);if(e)throw console.error("Erro ao excluir or\xe7amento:",e),Error(e.message)}async function u(){let{data:r,error:e}=await n.from("materiais").select("*").order("nome",{ascending:!0});if(e)throw console.error("Erro ao buscar materiais:",e),e;return r||[]}async function s(r){let{data:e,error:t}=await n.from("materiais").insert([r]).select().single();if(t)throw console.error("Erro ao criar material:",t),Error(t.message);return e}async function l(r,e){let{data:t,error:o}=await n.from("materiais").update(e).eq("id",r).select().single();if(o)throw console.error("Erro ao atualizar material:",o),Error(o.message);return t}async function f(r){let{error:e}=await n.from("materiais").delete().eq("id",r);if(e)throw console.error("Erro ao excluir material:",e),Error(e.message)}async function m(){let{data:r,error:e}=await n.from("obras").select("\n      *,\n      orcamento:orcamentos(id, cliente, status)\n    ").order("created_at",{ascending:!1});if(e)throw console.error("Erro ao buscar obras:",e),e;return r||[]}async function d(){let{data:r,error:e}=await n.from("obras").select("\n      *,\n      orcamento:orcamentos(id, cliente)\n    ").eq("status","em_andamento").order("created_at",{ascending:!1});if(e)throw console.error("Erro ao buscar obras em andamento:",e),e;return r||[]}async function g(r){let{data:e,error:t}=await n.from("obras").insert([r]).select().single();if(t)throw console.error("Erro ao criar obra:",t),Error(t.message);return e}async function y(r,e){let{data:t,error:o}=await n.from("obras").update(e).eq("id",r).select().single();if(o)throw console.error("Erro ao atualizar obra:",o),Error(o.message);return t}async function E(r){let{error:e}=await n.from("obras").delete().eq("id",r);if(e)throw console.error("Erro ao excluir obra:",e),Error(e.message)}async function w(r){let{data:e,error:t}=await n.from("obra_materiais").select("\n      *,\n      material:materiais(id, nome)\n    ").eq("obra_id",r);if(t)throw console.error("Erro ao buscar materiais da obra:",t),t;return e||[]}async function A(r){let{data:e}=await n.from("obra_materiais").select("id").eq("obra_id",r.obra_id).eq("material_id",r.material_id).single();if(e){let{data:t,error:o}=await n.from("obra_materiais").update({quantidade:r.quantidade}).eq("id",e.id).select().single();if(o)throw Error(o.message);return t}{let{data:e,error:t}=await n.from("obra_materiais").insert([r]).select().single();if(t)throw Error(t.message);return e}}async function I(r,e){let{data:t,error:o}=await n.from("usuarios").select("*").ilike("email",r.trim()).eq("senha",e).single();return o?(console.error("Erro no login:",o),null):t}async function h(){let{data:r,error:e}=await n.from("usuarios").select("*").order("nome",{ascending:!0});if(e)throw console.error("Erro ao buscar usu\xe1rios:",e),e;return r||[]}async function p(r){let{data:e,error:t}=await n.from("usuarios").insert([r]).select().single();if(t)throw console.error("Erro ao criar usu\xe1rio:",t),Error(t.message);return e}async function O(r,e){let{data:t,error:o}=await n.from("usuarios").update(e).eq("id",r).select().single();if(o)throw console.error("Erro ao atualizar usu\xe1rio:",o),Error(o.message);return t}async function C(r){let{error:e}=await n.from("usuarios").delete().eq("id",r);if(e)throw console.error("Erro ao excluir usu\xe1rio:",e),Error(e.message)}},22169:function(r,e,t){t.d(e,{K3:function(){return d},T3:function(){return u},Wi:function(){return l},Wt:function(){return f},cn:function(){return a},d5:function(){return s},fj:function(){return m},p6:function(){return c},xG:function(){return i},zm:function(){return E}});var n=t(57042),o=t(74769);function a(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];return(0,o.m6)((0,n.W)(e))}function i(r){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(r)}function c(r){if(!r)return"-";let e=new Date(r);return isNaN(e.getTime())?"-":e.toLocaleDateString("pt-BR")}function u(r){return"".concat(r.toFixed(1),"%")}function s(r,e){return e&&0!==e?r/e*100:0}function l(r){return("string"==typeof r?parseFloat(r)||0:r).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}function f(r){return r&&parseFloat(r.replace(/\./g,"").replace(",","."))||0}function m(r){let e=r.replace(/\D/g,"");return e?(parseInt(e)/100).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""}function d(r){return"".concat("/controle-orcamentos").concat(r)}let g=["UN","PC","KG","G","L","ML","M","CM","M2","M3","CX","PAR","SC","FD","PCT","RL","TON","DZ","CT","BD","JG","KIT","AMPOLA","UNID","PECA","METRO","LITRO","QUILO","CAIXA","SACO","FARDO","PACOTE","ROLO","DUZIA","CARTELA","BALDE","JOGO"],y={UNID:"UN",UNIDADE:"UN",UNIDADES:"UN",PECA:"PC",PEÇA:"PC",PECAS:"PC",PEÇAS:"PC",METRO:"M",METROS:"M",LITRO:"L",LITROS:"L",QUILO:"KG",QUILOS:"KG",QUILOGRAMA:"KG",QUILOGRAMAS:"KG",GRAMA:"G",GRAMAS:"G",MILILITRO:"ML",MILILITROS:"ML",CENTIMETRO:"CM",CENTIMETROS:"CM",CENTÍMETRO:"CM",CENTÍMETROS:"CM",CAIXA:"CX",CAIXAS:"CX",SACO:"SC",SACOS:"SC",FARDO:"FD",FARDOS:"FD",PACOTE:"PCT",PACOTES:"PCT",ROLO:"RL",ROLOS:"RL",TONELADA:"TON",TONELADAS:"TON",DUZIA:"DZ",DÚZIA:"DZ",DUZIAS:"DZ",CARTELA:"CT",CARTELAS:"CT",BALDE:"BD",BALDES:"BD",JOGO:"JG",JOGOS:"JG"};function E(r){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UN";if(null==r)return e;if("number"==typeof r)return console.warn("[normalizeUnidade] Valor num\xe9rico recebido: ".concat(r,". Usando default: ").concat(e)),e;let t=String(r).trim().toUpperCase();if(!t)return e;if(/^\d+$/.test(t))return console.warn('[normalizeUnidade] String num\xe9rica recebida: "'.concat(r,'". Usando default: ').concat(e)),e;if(y[t])return y[t];if(g.includes(t))return t;let n=t.split(/\s+/)[0];return g.includes(n)?n:y[n]?y[n]:(console.warn('[normalizeUnidade] Unidade desconhecida: "'.concat(r,'". Usando default: ').concat(e)),e)}}}]);